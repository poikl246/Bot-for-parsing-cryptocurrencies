(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2fdfa385"],{"00b4":function(t,e,n){"use strict";n("ac1f");var i=n("23e7"),s=n("da84"),r=n("c65b"),o=n("e330"),a=n("1626"),c=n("861d"),u=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},!0===e.test("abc")&&t}(),l=s.Error,h=o(/./.test);i({target:"RegExp",proto:!0,forced:!u},{test:function(t){var e=this.exec;if(!a(e))return h(this,t);var n=r(e,this,t);if(null!==n&&!c(n))throw new l("RegExp exec method returned something other than an Object or null");return!!n}})},"00cb":function(t,e,n){},"024e":function(t,e,n){"use strict";n("12e1")},"049c":function(t,e,n){},"04d1":function(t,e,n){var i=n("342f"),s=i.match(/firefox\/(\d+)/i);t.exports=!!s&&+s[1]},"06c5":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("fb6a"),n("d3b7"),n("b0c0"),n("a630"),n("3ca3"),n("ac1f"),n("00b4");var i=n("6b75");function s(t,e){if(t){if("string"===typeof t)return Object(i["a"])(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i["a"])(t,e):void 0}}},"0808":function(t,e,n){},"0c47":function(t,e,n){var i=n("da84"),s=n("d44e");s(i.JSON,"JSON",!0)},"0d3b":function(t,e,n){var i=n("d039"),s=n("b622"),r=n("c430"),o=s("iterator");t.exports=!i((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,i){e["delete"]("b"),n+=i+t})),r&&!t.toJSON||!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},"0e1d":function(t,e,n){t.exports=n.p+"img/change-a-batch.dc2de4e5.svg"},1040:function(t,e,n){"use strict";n("b1e5")},"10da":function(t,e,n){"use strict";n("e567")},1148:function(t,e,n){"use strict";var i=n("da84"),s=n("5926"),r=n("577e"),o=n("1d80"),a=i.RangeError;t.exports=function(t){var e=r(o(this)),n="",i=s(t);if(i<0||i==1/0)throw a("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n}},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"12e1":function(t,e,n){},"17ab":function(t,e,n){"use strict";n("3866")},"19aa":function(t,e,n){var i=n("da84"),s=n("3a9b"),r=i.TypeError;t.exports=function(t,e){if(s(e,t))return t;throw r("Incorrect invocation")}},"1b62":function(t,e,n){"use strict";var i=n("5530"),s=(n("d3b7"),n("2f62")),r=n("1da1"),o=(n("96cf"),n("caad"),n("99af"),n("ac1f"),n("1276"),n("3ca3"),n("ddb0"),n("cb24")),a=n.n(o),c=n("a3be"),u={props:{info:{type:Object,default:function(){return{}}}},data:function(){return{loading:!0,timestamp:1}},mounted:function(){var t=this;this.timestamp=+new Date,setTimeout((function(){t.loading=!1,t.$EventBus.$emit("toBottom")}),500)},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(s["d"])("base",["isAPP","config","locale","sceneCode","uid","departmentId","clickedZchatBtnTimestamp"])),Object(s["d"])("zchat",["connection"])),{},{showZendesk:function(){return this.clickedZchatBtnTimestamp<=this.timestamp}}),methods:{toZendedsk:function(t){if("query"!==t||this.uid)if(Object(c["l"])({type:9}),window.sensors.track("customer_sc_call_customer_click"),["ru-ru"].includes(this.locale)||7===+this.sceneCode)this.showTicket();else{var e="query"===t?1*this.departmentId:1*this.info.deptId,n=a.a.getDepartment(e),i=n&&n.status;"offline"===i?this.showTicket():(this.$store.commit("base/setDepartmentId",e),this.uid?this.toArtificial():this.$store.commit("base/setPrechatDiaState",!0),window.sensors.track("customer_sc_customer_pop_expose"))}else this.toLogin()},toArtificial:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r,o,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.uid,"closed"===t.connection&&a.a.reconnect(),i=a.a.getVisitorInfo(),s=i.email,r=i.phone,o=i.display_name,c=o&&-1!==o.indexOf("UID:")?"".concat(o.split("UID:")[0],"UID: ").concat(n):"".concat(o||""," UID: ").concat(n),a.a.setVisitorInfo({email:s||"",phone:r||"",display_name:c},(function(e){if(!e){try{a.a.setVisitorDefaultDepartment(1*t.departmentId)}catch(n){}a.a.sendChatMsg(t.$i18n.t("base.hello"))}})),u=t.locale,setTimeout((function(){a.a.addTags([u],(function(){}))}),3e3),t.$store.dispatch("chats/updateChats",{type:"chat.wating"}),t.$store.commit("base/setZchatBtnTime",+new Date);case 9:case"end":return e.stop()}}),e)})))()},showTicket:function(){this.$store.dispatch("chats/updateChats",{type:"chat.agent.tips",msg:this.$i18n.t("base.contact/information"),className:"unsolve",needTicket:!0}),this.$store.commit("base/setZchatBtnTime",+new Date)},toLogin:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){var e,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=3,n.e("chunk-2d212b4b").then(n.t.bind(null,"aa0e",7));case 3:e=t.sent,i=e.default,i("20010013",(function(){window.location.reload()}));case 6:case"end":return t.stop()}}),t)})))()}}},l=n("d930");e["a"]={mixins:[u],metaInfo:function(){return{title:this.$i18n.t("base.customer/serviceCenter"),script:[{innerHTML:"window.appTokenCallback = function() {};",type:"text/javascript"}],__dangerouslyDisableSanitizers:["script","noscript"]}},data:function(){return{hasInitialized:!1,isSocketClosed:!1,clickedChatBtn:!1}},computed:Object(i["a"])(Object(i["a"])({},Object(s["d"])("base",["visible","sceneCode","uid","departmentId"])),Object(s["d"])("zchat",["connection","account_status"])),methods:{initZchat:function(){var t=this,e=l["e"]?"gUj42jsOShnJLX9O8bhx3WnaLBpsUW3s":"x7ixhJBlttv4MhZ01flFdqbM2OzR2HGQ";a.a.init({account_key:e});var n=["account_status","connection_update","department_update","visitor_update","agent_update","chat","error"];n.forEach((function(e){a.a.on(e,(function(n){t.$store.dispatch("zchat/zchatEventHandle",{type:e,detail:n})}))})),this.$store.commit("zchat/setInitStatus",!0),this.$route.query.departmentId&&this.toZendedsk("query")},logoutZendesk:function(){var t=this;a.a.endChat({clear_dept_id_on_chat_ended:!0},(function(){t.$store.commit("zchat/setChatStatus",!1),a.a.setVisitorInfo({email:"",phone:"",display_name:""})}))}},watch:{connection:function(t){"closed"===t&&(this.isSocketClosed=!0,this.$store.commit("zchat/setChatStatus",!1),a.a.reconnect()),"connected"===t&&(this.hasInitialized=!0,this.isSocketClosed&&(this.logoutZendesk(),this.isSocketClosed=!1))},account_status:function(t){"offline"===t&&(this.logoutZendesk(),this.$store.commit("zchat/setChatStatus",!1))},visible:function(t){if(t&&!this.clickedChatBtn){var e=this.sceneCode;this.$store.dispatch("base/getLatestDomain"),this.$store.dispatch("base/getTicketsList",this.sceneCode),this.$store.dispatch("base/getConfig",e),this.$store.dispatch("base/getQuestionTree",e),this.hasInitialized||this.initZchat(),this.clickedChatBtn=!0}},"$route.query.lang":{handler:function(t,e){var n=window.__BaymaxApp.$i18n.messages,i=n[t]?t:"en-us";this.$i18n.locale=i,this.$store.commit("base/setLanguage",i);try{localStorage.setItem("lang",i)}catch(s){window.lang=i}document.getElementsByTagName("html")[0].classList.remove(e),document.getElementsByTagName("html")[0].classList.add(i),this.$store.commit("base/setTreeLoading",!0),this.sceneCode&&this.clickedChatBtn&&(this.$store.dispatch("base/getTicketsList",this.sceneCode),this.$store.dispatch("base/getConfig",this.sceneCode),this.$store.dispatch("base/getQuestionTree",this.sceneCode))},immediate:!0},"$route.query.sceneCode":{handler:function(t){this.$store.commit("base/setSceneCode",t)},immediate:!0},"$route.query.departmentId":{handler:function(t){t&&this.$store.commit("base/setDepartmentId",1*t)},immediate:!0}}}},"1c7e":function(t,e,n){var i=n("b622"),s=i("iterator"),r=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){r=!0}};a[s]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var i={};i[s]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(c){}return n}},"23dc":function(t,e,n){var i=n("d44e");i(Math,"Math",!0)},"25ce":function(t,e,n){"use strict";n("ebed")},2626:function(t,e,n){"use strict";var i=n("d066"),s=n("9bf2"),r=n("b622"),o=n("83ab"),a=r("species");t.exports=function(t){var e=i(t),n=s.f;o&&e&&!e[a]&&n(e,a,{configurable:!0,get:function(){return this}})}},"288f":function(t,e,n){},"2a62":function(t,e,n){var i=n("c65b"),s=n("825a"),r=n("dc4a");t.exports=function(t,e,n){var o,a;s(t);try{if(o=r(t,"return"),!o){if("throw"===e)throw n;return n}o=i(o,t)}catch(c){a=!0,o=c}if("throw"===e)throw n;if(a)throw o;return s(o),n}},"2b3d":function(t,e,n){"use strict";n("3ca3");var i,s=n("23e7"),r=n("83ab"),o=n("0d3b"),a=n("da84"),c=n("0366"),u=n("c65b"),l=n("e330"),h=n("37e8"),d=n("6eeb"),f=n("19aa"),p=n("1a2d"),m=n("60da"),g=n("4df4"),v=n("f36a"),b=n("6547").codeAt,w=n("5fb2"),_=n("577e"),y=n("d44e"),$=n("9861"),k=n("69f3"),E=k.set,x=k.getterFor("URL"),T=$.URLSearchParams,O=$.getState,C=a.URL,L=a.TypeError,I=a.parseInt,A=Math.floor,S=Math.pow,D=l("".charAt),R=l(/./.exec),P=l([].join),j=l(1..toString),N=l([].pop),q=l([].push),M=l("".replace),z=l([].shift),U=l("".split),B=l("".slice),V=l("".toLowerCase),F=l([].unshift),H="Invalid authority",K="Invalid scheme",W="Invalid host",Y="Invalid port",Z=/[a-z]/i,X=/[\d+-.a-z]/i,G=/\d/,Q=/^0x/i,J=/^[0-7]+$/,tt=/^\d+$/,et=/^[\da-f]+$/i,nt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,it=/[\0\t\n\r #/:<>?@[\\\]^|]/,st=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,rt=/[\t\n\r]/g,ot=function(t,e){var n,i,s;if("["==D(e,0)){if("]"!=D(e,e.length-1))return W;if(n=ct(B(e,1,-1)),!n)return W;t.host=n}else if(vt(t)){if(e=w(e),R(nt,e))return W;if(n=at(e),null===n)return W;t.host=n}else{if(R(it,e))return W;for(n="",i=g(e),s=0;s<i.length;s++)n+=mt(i[s],ht);t.host=n}},at=function(t){var e,n,i,s,r,o,a,c=U(t,".");if(c.length&&""==c[c.length-1]&&c.length--,e=c.length,e>4)return t;for(n=[],i=0;i<e;i++){if(s=c[i],""==s)return t;if(r=10,s.length>1&&"0"==D(s,0)&&(r=R(Q,s)?16:8,s=B(s,8==r?1:2)),""===s)o=0;else{if(!R(10==r?tt:8==r?J:et,s))return t;o=I(s,r)}q(n,o)}for(i=0;i<e;i++)if(o=n[i],i==e-1){if(o>=S(256,5-e))return null}else if(o>255)return null;for(a=N(n),i=0;i<n.length;i++)a+=n[i]*S(256,3-i);return a},ct=function(t){var e,n,i,s,r,o,a,c=[0,0,0,0,0,0,0,0],u=0,l=null,h=0,d=function(){return D(t,h)};if(":"==d()){if(":"!=D(t,1))return;h+=2,u++,l=u}while(d()){if(8==u)return;if(":"!=d()){e=n=0;while(n<4&&R(et,d()))e=16*e+I(d(),16),h++,n++;if("."==d()){if(0==n)return;if(h-=n,u>6)return;i=0;while(d()){if(s=null,i>0){if(!("."==d()&&i<4))return;h++}if(!R(G,d()))return;while(R(G,d())){if(r=I(d(),10),null===s)s=r;else{if(0==s)return;s=10*s+r}if(s>255)return;h++}c[u]=256*c[u]+s,i++,2!=i&&4!=i||u++}if(4!=i)return;break}if(":"==d()){if(h++,!d())return}else if(d())return;c[u++]=e}else{if(null!==l)return;h++,u++,l=u}}if(null!==l){o=u-l,u=7;while(0!=u&&o>0)a=c[u],c[u--]=c[l+o-1],c[l+--o]=a}else if(8!=u)return;return c},ut=function(t){for(var e=null,n=1,i=null,s=0,r=0;r<8;r++)0!==t[r]?(s>n&&(e=i,n=s),i=null,s=0):(null===i&&(i=r),++s);return s>n&&(e=i,n=s),e},lt=function(t){var e,n,i,s;if("number"==typeof t){for(e=[],n=0;n<4;n++)F(e,t%256),t=A(t/256);return P(e,".")}if("object"==typeof t){for(e="",i=ut(t),n=0;n<8;n++)s&&0===t[n]||(s&&(s=!1),i===n?(e+=n?":":"::",s=!0):(e+=j(t[n],16),n<7&&(e+=":")));return"["+e+"]"}return t},ht={},dt=m({},ht,{" ":1,'"':1,"<":1,">":1,"`":1}),ft=m({},dt,{"#":1,"?":1,"{":1,"}":1}),pt=m({},ft,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),mt=function(t,e){var n=b(t,0);return n>32&&n<127&&!p(e,t)?t:encodeURIComponent(t)},gt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},vt=function(t){return p(gt,t.scheme)},bt=function(t){return""!=t.username||""!=t.password},wt=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},_t=function(t,e){var n;return 2==t.length&&R(Z,D(t,0))&&(":"==(n=D(t,1))||!e&&"|"==n)},yt=function(t){var e;return t.length>1&&_t(B(t,0,2))&&(2==t.length||"/"===(e=D(t,2))||"\\"===e||"?"===e||"#"===e)},$t=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&_t(e[0],!0)||e.length--},kt=function(t){return"."===t||"%2e"===V(t)},Et=function(t){return t=V(t),".."===t||"%2e."===t||".%2e"===t||"%2e%2e"===t},xt={},Tt={},Ot={},Ct={},Lt={},It={},At={},St={},Dt={},Rt={},Pt={},jt={},Nt={},qt={},Mt={},zt={},Ut={},Bt={},Vt={},Ft={},Ht={},Kt=function(t,e,n,s){var r,o,a,c,u=n||xt,l=0,h="",d=!1,f=!1,m=!1;n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=M(e,st,"")),e=M(e,rt,""),r=g(e);while(l<=r.length){switch(o=r[l],u){case xt:if(!o||!R(Z,o)){if(n)return K;u=Ot;continue}h+=V(o),u=Tt;break;case Tt:if(o&&(R(X,o)||"+"==o||"-"==o||"."==o))h+=V(o);else{if(":"!=o){if(n)return K;h="",u=Ot,l=0;continue}if(n&&(vt(t)!=p(gt,h)||"file"==h&&(bt(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,n)return void(vt(t)&&gt[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?u=qt:vt(t)&&s&&s.scheme==t.scheme?u=Ct:vt(t)?u=St:"/"==r[l+1]?(u=Lt,l++):(t.cannotBeABaseURL=!0,q(t.path,""),u=Vt)}break;case Ot:if(!s||s.cannotBeABaseURL&&"#"!=o)return K;if(s.cannotBeABaseURL&&"#"==o){t.scheme=s.scheme,t.path=v(s.path),t.query=s.query,t.fragment="",t.cannotBeABaseURL=!0,u=Ht;break}u="file"==s.scheme?qt:It;continue;case Ct:if("/"!=o||"/"!=r[l+1]){u=It;continue}u=Dt,l++;break;case Lt:if("/"==o){u=Rt;break}u=Bt;continue;case It:if(t.scheme=s.scheme,o==i)t.username=s.username,t.password=s.password,t.host=s.host,t.port=s.port,t.path=v(s.path),t.query=s.query;else if("/"==o||"\\"==o&&vt(t))u=At;else if("?"==o)t.username=s.username,t.password=s.password,t.host=s.host,t.port=s.port,t.path=v(s.path),t.query="",u=Ft;else{if("#"!=o){t.username=s.username,t.password=s.password,t.host=s.host,t.port=s.port,t.path=v(s.path),t.path.length--,u=Bt;continue}t.username=s.username,t.password=s.password,t.host=s.host,t.port=s.port,t.path=v(s.path),t.query=s.query,t.fragment="",u=Ht}break;case At:if(!vt(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=s.username,t.password=s.password,t.host=s.host,t.port=s.port,u=Bt;continue}u=Rt}else u=Dt;break;case St:if(u=Dt,"/"!=o||"/"!=D(h,l+1))continue;l++;break;case Dt:if("/"!=o&&"\\"!=o){u=Rt;continue}break;case Rt:if("@"==o){d&&(h="%40"+h),d=!0,a=g(h);for(var b=0;b<a.length;b++){var w=a[b];if(":"!=w||m){var _=mt(w,pt);m?t.password+=_:t.username+=_}else m=!0}h=""}else if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&vt(t)){if(d&&""==h)return H;l-=g(h).length+1,h="",u=Pt}else h+=o;break;case Pt:case jt:if(n&&"file"==t.scheme){u=zt;continue}if(":"!=o||f){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&vt(t)){if(vt(t)&&""==h)return W;if(n&&""==h&&(bt(t)||null!==t.port))return;if(c=ot(t,h),c)return c;if(h="",u=Ut,n)return;continue}"["==o?f=!0:"]"==o&&(f=!1),h+=o}else{if(""==h)return W;if(c=ot(t,h),c)return c;if(h="",u=Nt,n==jt)return}break;case Nt:if(!R(G,o)){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&vt(t)||n){if(""!=h){var y=I(h,10);if(y>65535)return Y;t.port=vt(t)&&y===gt[t.scheme]?null:y,h=""}if(n)return;u=Ut;continue}return Y}h+=o;break;case qt:if(t.scheme="file","/"==o||"\\"==o)u=Mt;else{if(!s||"file"!=s.scheme){u=Bt;continue}if(o==i)t.host=s.host,t.path=v(s.path),t.query=s.query;else if("?"==o)t.host=s.host,t.path=v(s.path),t.query="",u=Ft;else{if("#"!=o){yt(P(v(r,l),""))||(t.host=s.host,t.path=v(s.path),$t(t)),u=Bt;continue}t.host=s.host,t.path=v(s.path),t.query=s.query,t.fragment="",u=Ht}}break;case Mt:if("/"==o||"\\"==o){u=zt;break}s&&"file"==s.scheme&&!yt(P(v(r,l),""))&&(_t(s.path[0],!0)?q(t.path,s.path[0]):t.host=s.host),u=Bt;continue;case zt:if(o==i||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&_t(h))u=Bt;else if(""==h){if(t.host="",n)return;u=Ut}else{if(c=ot(t,h),c)return c;if("localhost"==t.host&&(t.host=""),n)return;h="",u=Ut}continue}h+=o;break;case Ut:if(vt(t)){if(u=Bt,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=i&&(u=Bt,"/"!=o))continue}else t.fragment="",u=Ht;else t.query="",u=Ft;break;case Bt:if(o==i||"/"==o||"\\"==o&&vt(t)||!n&&("?"==o||"#"==o)){if(Et(h)?($t(t),"/"==o||"\\"==o&&vt(t)||q(t.path,"")):kt(h)?"/"==o||"\\"==o&&vt(t)||q(t.path,""):("file"==t.scheme&&!t.path.length&&_t(h)&&(t.host&&(t.host=""),h=D(h,0)+":"),q(t.path,h)),h="","file"==t.scheme&&(o==i||"?"==o||"#"==o))while(t.path.length>1&&""===t.path[0])z(t.path);"?"==o?(t.query="",u=Ft):"#"==o&&(t.fragment="",u=Ht)}else h+=mt(o,ft);break;case Vt:"?"==o?(t.query="",u=Ft):"#"==o?(t.fragment="",u=Ht):o!=i&&(t.path[0]+=mt(o,ht));break;case Ft:n||"#"!=o?o!=i&&("'"==o&&vt(t)?t.query+="%27":t.query+="#"==o?"%23":mt(o,ht)):(t.fragment="",u=Ht);break;case Ht:o!=i&&(t.fragment+=mt(o,dt));break}l++}},Wt=function(t){var e,n,i=f(this,Yt),s=arguments.length>1?arguments[1]:void 0,o=_(t),a=E(i,{type:"URL"});if(void 0!==s)try{e=x(s)}catch(h){if(n=Kt(e={},_(s)),n)throw L(n)}if(n=Kt(a,o,null,e),n)throw L(n);var c=a.searchParams=new T,l=O(c);l.updateSearchParams(a.query),l.updateURL=function(){a.query=_(c)||null},r||(i.href=u(Zt,i),i.origin=u(Xt,i),i.protocol=u(Gt,i),i.username=u(Qt,i),i.password=u(Jt,i),i.host=u(te,i),i.hostname=u(ee,i),i.port=u(ne,i),i.pathname=u(ie,i),i.search=u(se,i),i.searchParams=u(re,i),i.hash=u(oe,i))},Yt=Wt.prototype,Zt=function(){var t=x(this),e=t.scheme,n=t.username,i=t.password,s=t.host,r=t.port,o=t.path,a=t.query,c=t.fragment,u=e+":";return null!==s?(u+="//",bt(t)&&(u+=n+(i?":"+i:"")+"@"),u+=lt(s),null!==r&&(u+=":"+r)):"file"==e&&(u+="//"),u+=t.cannotBeABaseURL?o[0]:o.length?"/"+P(o,"/"):"",null!==a&&(u+="?"+a),null!==c&&(u+="#"+c),u},Xt=function(){var t=x(this),e=t.scheme,n=t.port;if("blob"==e)try{return new Wt(e.path[0]).origin}catch(i){return"null"}return"file"!=e&&vt(t)?e+"://"+lt(t.host)+(null!==n?":"+n:""):"null"},Gt=function(){return x(this).scheme+":"},Qt=function(){return x(this).username},Jt=function(){return x(this).password},te=function(){var t=x(this),e=t.host,n=t.port;return null===e?"":null===n?lt(e):lt(e)+":"+n},ee=function(){var t=x(this).host;return null===t?"":lt(t)},ne=function(){var t=x(this).port;return null===t?"":_(t)},ie=function(){var t=x(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+P(e,"/"):""},se=function(){var t=x(this).query;return t?"?"+t:""},re=function(){return x(this).searchParams},oe=function(){var t=x(this).fragment;return t?"#"+t:""},ae=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(r&&h(Yt,{href:ae(Zt,(function(t){var e=x(this),n=_(t),i=Kt(e,n);if(i)throw L(i);O(e.searchParams).updateSearchParams(e.query)})),origin:ae(Xt),protocol:ae(Gt,(function(t){var e=x(this);Kt(e,_(t)+":",xt)})),username:ae(Qt,(function(t){var e=x(this),n=g(_(t));if(!wt(e)){e.username="";for(var i=0;i<n.length;i++)e.username+=mt(n[i],pt)}})),password:ae(Jt,(function(t){var e=x(this),n=g(_(t));if(!wt(e)){e.password="";for(var i=0;i<n.length;i++)e.password+=mt(n[i],pt)}})),host:ae(te,(function(t){var e=x(this);e.cannotBeABaseURL||Kt(e,_(t),Pt)})),hostname:ae(ee,(function(t){var e=x(this);e.cannotBeABaseURL||Kt(e,_(t),jt)})),port:ae(ne,(function(t){var e=x(this);wt(e)||(t=_(t),""==t?e.port=null:Kt(e,t,Nt))})),pathname:ae(ie,(function(t){var e=x(this);e.cannotBeABaseURL||(e.path=[],Kt(e,_(t),Ut))})),search:ae(se,(function(t){var e=x(this);t=_(t),""==t?e.query=null:("?"==D(t,0)&&(t=B(t,1)),e.query="",Kt(e,t,Ft)),O(e.searchParams).updateSearchParams(e.query)})),searchParams:ae(re),hash:ae(oe,(function(t){var e=x(this);t=_(t),""!=t?("#"==D(t,0)&&(t=B(t,1)),e.fragment="",Kt(e,t,Ht)):e.fragment=null}))}),d(Yt,"toJSON",(function(){return u(Zt,this)}),{enumerable:!0}),d(Yt,"toString",(function(){return u(Zt,this)}),{enumerable:!0}),C){var ce=C.createObjectURL,ue=C.revokeObjectURL;ce&&d(Wt,"createObjectURL",c(ce,C)),ue&&d(Wt,"revokeObjectURL",c(ue,C))}y(Wt,"URL"),s({global:!0,forced:!o,sham:!r},{URL:Wt})},"2c3e":function(t,e,n){var i=n("da84"),s=n("83ab"),r=n("9f7f").UNSUPPORTED_Y,o=n("c6b6"),a=n("9bf2").f,c=n("69f3").get,u=RegExp.prototype,l=i.TypeError;s&&r&&a(u,"sticky",{configurable:!0,get:function(){if(this!==u){if("RegExp"===o(this))return!!c(this).sticky;throw l("Incompatible receiver, RegExp required")}}})},3142:function(t,e,n){"use strict";n("9b67")},"35a1":function(t,e,n){var i=n("f5df"),s=n("dc4a"),r=n("3f8c"),o=n("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return s(t,a)||s(t,"@@iterator")||r[i(t)]}},"37b9":function(t,e,n){t.exports=n.p+"img/icon-queue.8a2851e8.svg"},3866:function(t,e,n){},"3aee":function(t,e,n){},"3b2a":function(t,e,n){},"3fd1":function(t,e,n){"use strict";n("d6b6")},"498a":function(t,e,n){"use strict";var i=n("23e7"),s=n("58a8").trim,r=n("c8d2");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return s(this)}})},"4c75":function(t,e,n){},"4d63":function(t,e,n){var i=n("83ab"),s=n("da84"),r=n("e330"),o=n("94ca"),a=n("7156"),c=n("9112"),u=n("9bf2").f,l=n("241c").f,h=n("3a9b"),d=n("44e7"),f=n("577e"),p=n("ad6d"),m=n("9f7f"),g=n("6eeb"),v=n("d039"),b=n("1a2d"),w=n("69f3").enforce,_=n("2626"),y=n("b622"),$=n("fce3"),k=n("107c"),E=y("match"),x=s.RegExp,T=x.prototype,O=s.SyntaxError,C=r(p),L=r(T.exec),I=r("".charAt),A=r("".replace),S=r("".indexOf),D=r("".slice),R=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,P=/a/g,j=/a/g,N=new x(P)!==P,q=m.UNSUPPORTED_Y,M=i&&(!N||q||$||k||v((function(){return j[E]=!1,x(P)!=P||x(j)==j||"/a/i"!=x(P,"i")}))),z=function(t){for(var e,n=t.length,i=0,s="",r=!1;i<=n;i++)e=I(t,i),"\\"!==e?r||"."!==e?("["===e?r=!0:"]"===e&&(r=!1),s+=e):s+="[\\s\\S]":s+=e+I(t,++i);return s},U=function(t){for(var e,n=t.length,i=0,s="",r=[],o={},a=!1,c=!1,u=0,l="";i<=n;i++){if(e=I(t,i),"\\"===e)e+=I(t,++i);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:L(R,D(t,i+1))&&(i+=2,c=!0),s+=e,u++;continue;case">"===e&&c:if(""===l||b(o,l))throw new O("Invalid capture group name");o[l]=!0,r[r.length]=[l,u],c=!1,l="";continue}c?l+=e:s+=e}return[s,r]};if(o("RegExp",M)){for(var B=function(t,e){var n,i,s,r,o,u,l=h(T,this),p=d(t),m=void 0===e,g=[],v=t;if(!l&&p&&m&&t.constructor===B)return t;if((p||h(T,t))&&(t=t.source,m&&(e="flags"in v?v.flags:C(v))),t=void 0===t?"":f(t),e=void 0===e?"":f(e),v=t,$&&"dotAll"in P&&(i=!!e&&S(e,"s")>-1,i&&(e=A(e,/s/g,""))),n=e,q&&"sticky"in P&&(s=!!e&&S(e,"y")>-1,s&&(e=A(e,/y/g,""))),k&&(r=U(t),t=r[0],g=r[1]),o=a(x(t,e),l?this:T,B),(i||s||g.length)&&(u=w(o),i&&(u.dotAll=!0,u.raw=B(z(t),n)),s&&(u.sticky=!0),g.length&&(u.groups=g)),t!==v)try{c(o,"source",""===v?"(?:)":v)}catch(b){}return o},V=function(t){t in B||u(B,t,{configurable:!0,get:function(){return x[t]},set:function(e){x[t]=e}})},F=l(x),H=0;F.length>H;)V(F[H++]);T.constructor=B,B.prototype=T,g(s,"RegExp",B)}_("RegExp")},"4df4":function(t,e,n){"use strict";var i=n("da84"),s=n("0366"),r=n("c65b"),o=n("7b0b"),a=n("9bdd"),c=n("e95a"),u=n("68ee"),l=n("07fa"),h=n("8418"),d=n("9a1f"),f=n("35a1"),p=i.Array;t.exports=function(t){var e=o(t),n=u(this),i=arguments.length,m=i>1?arguments[1]:void 0,g=void 0!==m;g&&(m=s(m,i>2?arguments[2]:void 0));var v,b,w,_,y,$,k=f(e),E=0;if(!k||this==p&&c(k))for(v=l(e),b=n?new this(v):p(v);v>E;E++)$=g?m(e[E],E):e[E],h(b,E,$);else for(_=d(e,k),y=_.next,b=n?new this:[];!(w=r(y,_)).done;E++)$=g?a(_,m,[w.value,E],!0):w.value,h(b,E,$);return b.length=E,b}},"4e82":function(t,e,n){"use strict";var i=n("23e7"),s=n("e330"),r=n("59ed"),o=n("7b0b"),a=n("07fa"),c=n("577e"),u=n("d039"),l=n("addb"),h=n("a640"),d=n("04d1"),f=n("d998"),p=n("2d00"),m=n("512c"),g=[],v=s(g.sort),b=s(g.push),w=u((function(){g.sort(void 0)})),_=u((function(){g.sort(null)})),y=h("sort"),$=!u((function(){if(p)return p<70;if(!(d&&d>3)){if(f)return!0;if(m)return m<603;var t,e,n,i,s="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)g.push({k:e+i,v:n})}for(g.sort((function(t,e){return e.v-t.v})),i=0;i<g.length;i++)e=g[i].k.charAt(0),s.charAt(s.length-1)!==e&&(s+=e);return"DGBEFHACIJK"!==s}})),k=w||!_||!y||!$,E=function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:c(e)>c(n)?1:-1}};i({target:"Array",proto:!0,forced:k},{sort:function(t){void 0!==t&&r(t);var e=o(this);if($)return void 0===t?v(e):v(e,t);var n,i,s=[],c=a(e);for(i=0;i<c;i++)i in e&&b(s,e[i]);l(s,E(t)),n=s.length,i=0;while(i<n)e[i]=s[i++];while(i<c)delete e[i++];return e}})},"512c":function(t,e,n){var i=n("342f"),s=i.match(/AppleWebKit\/(\d+)\./);t.exports=!!s&&+s[1]},"559c":function(t,e,n){"use strict";n("fafe")},"5aaa":function(t,e,n){},"5b14":function(t,e,n){},"5e78":function(t,e,n){"use strict";n("3b2a")},"5fb2":function(t,e,n){"use strict";var i=n("da84"),s=n("e330"),r=2147483647,o=36,a=1,c=26,u=38,l=700,h=72,d=128,f="-",p=/[^\0-\u007E]/,m=/[.\u3002\uFF0E\uFF61]/g,g="Overflow: input needs wider integers to process",v=o-a,b=i.RangeError,w=s(m.exec),_=Math.floor,y=String.fromCharCode,$=s("".charCodeAt),k=s([].join),E=s([].push),x=s("".replace),T=s("".split),O=s("".toLowerCase),C=function(t){var e=[],n=0,i=t.length;while(n<i){var s=$(t,n++);if(s>=55296&&s<=56319&&n<i){var r=$(t,n++);56320==(64512&r)?E(e,((1023&s)<<10)+(1023&r)+65536):(E(e,s),n--)}else E(e,s)}return e},L=function(t){return t+22+75*(t<26)},I=function(t,e,n){var i=0;for(t=n?_(t/l):t>>1,t+=_(t/e);t>v*c>>1;i+=o)t=_(t/v);return _(i+(v+1)*t/(t+u))},A=function(t){var e=[];t=C(t);var n,i,s=t.length,u=d,l=0,p=h;for(n=0;n<t.length;n++)i=t[n],i<128&&E(e,y(i));var m=e.length,v=m;m&&E(e,f);while(v<s){var w=r;for(n=0;n<t.length;n++)i=t[n],i>=u&&i<w&&(w=i);var $=v+1;if(w-u>_((r-l)/$))throw b(g);for(l+=(w-u)*$,u=w,n=0;n<t.length;n++){if(i=t[n],i<u&&++l>r)throw b(g);if(i==u){for(var x=l,T=o;;T+=o){var O=T<=p?a:T>=p+c?c:T-p;if(x<O)break;var A=x-O,S=o-O;E(e,y(L(O+A%S))),x=_(A/S)}E(e,y(L(x))),p=I(l,$,v==m),l=0,++v}}++l,++u}return k(e,"")};t.exports=function(t){var e,n,i=[],s=T(x(O(t),m,"."),".");for(e=0;e<s.length;e++)n=s[e],E(i,w(p,n)?"xn--"+A(n):n);return k(i,".")}},"60da":function(t,e,n){"use strict";var i=n("83ab"),s=n("e330"),r=n("c65b"),o=n("d039"),a=n("df75"),c=n("7418"),u=n("d1e7"),l=n("7b0b"),h=n("44ad"),d=Object.assign,f=Object.defineProperty,p=s([].concat);t.exports=!d||o((function(){if(i&&1!==d({b:1},d(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),s="abcdefghijklmnopqrst";return t[n]=7,s.split("").forEach((function(t){e[t]=t})),7!=d({},t)[n]||a(d({},e)).join("")!=s}))?function(t,e){var n=l(t),s=arguments.length,o=1,d=c.f,f=u.f;while(s>o){var m,g=h(arguments[o++]),v=d?p(a(g),d(g)):a(g),b=v.length,w=0;while(b>w)m=v[w++],i&&!r(f,g,m)||(n[m]=g[m])}return n}:d},6692:function(t,e,n){"use strict";n("ceb8")},6857:function(t,e,n){},"6acc":function(t,e,n){"use strict";n("00cb")},"6b75":function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}n.d(e,"a",(function(){return i}))},"6b75c":function(t,e,n){"use strict";n("f0c5")},"6d62":function(t,e,n){"use strict";n("6857")},7037:function(t,e,n){function i(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(t.exports=i=function(t){return typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0),i(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),t.exports=i,t.exports["default"]=t.exports,t.exports.__esModule=!0},7069:function(t,e,n){},7070:function(t,e,n){"use strict";n("3aee")},7174:function(t,e,n){"use strict";n("7069")},"720f":function(t,e,n){"use strict";n("5aaa")},8179:function(t,e,n){"use strict";n("5b14")},"841c":function(t,e,n){"use strict";var i=n("c65b"),s=n("d784"),r=n("825a"),o=n("1d80"),a=n("129f"),c=n("577e"),u=n("dc4a"),l=n("14c3");s("search",(function(t,e,n){return[function(e){var n=o(this),s=void 0==e?void 0:u(e,t);return s?i(s,e,n):new RegExp(e)[t](c(n))},function(t){var i=r(this),s=c(t),o=n(e,i,s);if(o.done)return o.value;var u=i.lastIndex;a(u,0)||(i.lastIndex=0);var h=l(i,s);return a(i.lastIndex,u)||(i.lastIndex=u),null===h?-1:h.index}]}))},"8e5f":function(t,e,n){t.exports=n.p+"img/icon-add-h5.ddbf529c.svg"},"8f20":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bottom-container",class:{"hide-radius":t.searchListData.length>0||!t.isZendeskChatting&&t.showNav||t.showQueueInfo,"is-bangs":t.isBangs}},[i("ChatQueueTips",{class:{visible:!t.isZendeskChatting&&t.showNav}}),i(t.firstLevelNav,{tag:"component",staticClass:"bottom-nav",class:{visible:!t.isZendeskChatting&&t.showNav},attrs:{"is-bottom":!0}}),i("SearchList",{attrs:{data:t.searchListData},on:{reset:t.getAnwser}}),i("div",{staticClass:"input-container"},[i("i",{staticClass:"contact",on:{click:t.toZendedsk}}),i("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.message,expression:"message",modifiers:{trim:!0}}],staticClass:"input-text",class:{pr40:t.isZendeskChatting},attrs:{type:"text",maxlength:"1000",placeholder:t.inputText},domProps:{value:t.message},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)},focus:t.inputFocus,blur:[t.inputBlur,function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.message=e.target.value.trim())}}}),t.isZendeskChatting?i("button",{staticClass:"upload-file-wrap"},[t.isAPP?i("img",{attrs:{src:n("8e5f")}}):i("i",{staticClass:"icon-add"}),i("input",{ref:"identity",attrs:{type:"file",disabled:t.uploading,accept:"image/png, image/jpeg, image/gif"},on:{change:t.uploadFile}})]):t._e(),i("button",{staticClass:"send",on:{click:t.sendMessage}},[t._v(" "+t._s(t.$t("base.send"))+" ")])])],1)},s=[];function r(t){if(Array.isArray(t))return t}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0");function o(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,s,r=[],o=!0,a=!1;try{for(n=n.call(t);!(o=(i=n.next()).done);o=!0)if(r.push(i.value),e&&r.length===e)break}catch(c){a=!0,s=c}finally{try{o||null==n["return"]||n["return"]()}finally{if(a)throw s}}return r}}var a=n("06c5");function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t,e){return r(t)||o(t,e)||Object(a["a"])(t,e)||c()}var l=n("1da1"),h=n("5530"),d=(n("2b3d"),n("9861"),n("b0c0"),n("caad"),n("99af"),n("ac1f"),n("1276"),n("96cf"),n("2f62")),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"first-level-nav-wrap first-level-nav"},[n("div",{staticClass:"btn-wrap"},t._l(t.defaultList,(function(e,i){return n("button",{key:i,staticClass:"btn-nav",class:{active:t.curId?e.questionId===t.curId:0===i},on:{click:function(n){return t.changeQuestion(e.questionId,i)}}},[t._v(" "+t._s(e.question)+" ")])})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showMore,expression:"showMore"}],staticClass:"more-wrap"},[n("dl",[n("dt",{staticClass:"btn-nav",class:{active:t.moreListObj[t.curId]},on:{click:function(e){return t.changeQuestion(t.curMoreData.questionId)}}},[n("span",[t._v(t._s(t.curMoreData.question))]),n("i",{staticClass:"icon-arrow"})]),n("dd",{class:{"pos-bottom":t.isBottom}},t._l(t.moreList,(function(e,i){return n("button",{key:i,class:{active:e.questionId===t.curId},on:{click:function(n){return t.changeQuestion(e.questionId,i)}}},[t._v(" "+t._s(e.question)+" ")])})),0)])])])},p=[],m=(n("fb6a"),{"zh-cn":3,"zh-hk":3,"de-de":1,"fr-fr":1,"pt-pt":1,"pt-br":1}),g={name:"",props:{isBottom:{type:Boolean,default:!1}},data:function(){return{width:0,curId:"",timer:null}},computed:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(d["d"])("base",["visible","locale","treeLoading"])),Object(d["c"])("base",["treeObj","firstList"])),{},{moreAmount:function(){return m[this.locale]||2},defaultList:function(){return this.firstList.slice(0,this.moreAmount)},moreList:function(){return this.firstList.slice(this.moreAmount)||[]},defaultId:function(){return(this.firstList[0]||{}).questionId},showMore:function(){return this.firstList.length>this.moreAmount},moreFirstId:function(){return this.moreList[0]||{}},moreListObj:function(){return this.moreList.reduce((function(t,e){return t[e.questionId]=e,t}),{})||{}},curMoreData:function(){var t=this.curId,e=this.moreListObj;return e[t]||this.moreList[0]||{}}}),methods:{changeQuestion:function(t,e){if(this.curId!==t||this.isBottom){if(this.index=e,this.curId=t,this.$emit("changeId",t),this.isBottom){var n=this.treeObj[t];this.$store.dispatch("chats/updateChats",{type:"chat.msg",msg:n.question}),this.$store.dispatch("chats/updateChats",{type:"chat.anwser.list",questionList:n.childList,questionText:n.question})}window.sensors.track("customer_sc_tab_click",{tab_id:t})}},computeWidth:function(){var t=this;if(this.treeLoading||this.firstList.length){if(clearTimeout(this.timer),this.visible&&this.defaultId){var e=document.querySelectorAll(".btn-wrap .btn-nav");e.length?(this.width=document.querySelector(".btn-wrap").offsetWidth,this.$EventBus.$emit("isDown")):this.timer=setTimeout((function(){t.computeWidth()}),1e3)}}else this.$EventBus.$emit("isDown")}},watch:{defaultId:function(t){this.$emit("changeId",t),this.computeWidth()},visible:function(){this.computeWidth()},firstList:function(t){t.length&&this.computeWidth()},treeLoading:function(t){t||this.computeWidth()},width:function(t){document.querySelector(".first-level-nav-wrap .more-wrap").style.maxWidth="calc(100% - ".concat(t,"px)")},"$route.query.lang":{handler:function(){this.curId=""},immediate:!0}}},v=g,b=(n("024e"),n("2877")),w=Object(b["a"])(v,f,p,!1,null,null,null),_=w.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"first-level-h5 first-level-nav"},[n("dl",[t._l(t.firstList,(function(e,i){return n("dd",{key:i,class:{active:t.curId?e.questionId===t.curId:0===i},on:{click:function(n){return t.changeQuestion(e.questionId)}}},[t._v(" "+t._s(e.question)+" ")])})),n("dd",{staticClass:"block"})],2)])},$=[],k={name:"",props:{isBottom:{type:Boolean,default:!1}},data:function(){return{curId:""}},computed:Object(h["a"])(Object(h["a"])({},Object(d["c"])("base",["treeObj","firstList"])),{},{defaultId:function(){return(this.firstList[0]||{}).questionId}}),methods:{changeQuestion:function(t){if(this.curId!==t||this.isBottom){if(this.curId=t,this.$emit("changeId",t),this.isBottom){var e=this.treeObj[t];this.$store.dispatch("chats/updateChats",{type:"chat.msg",msg:e.question}),this.$store.dispatch("chats/updateChats",{type:"chat.anwser.list",questionList:e.childList,questionText:e.question})}window.sensors.track("customer_sc_tab_click",{tab_id:t})}}},watch:{defaultId:function(t){this.$emit("changeId",t)}}},E=k,x=(n("6b75c"),Object(b["a"])(E,y,$,!1,null,null,null)),T=x.exports,O=n("cb24"),C=n.n(O),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dl",{staticClass:"search-list",class:{visible:t.data.length>0}},t._l(t.data,(function(e,i){return n("dd",{key:i},[n("button",{on:{click:function(n){return t.getAnwser(e)}}},[n("span",[t._v(t._s(e.question))]),n("i")])])})),0)},I=[],A={name:"SearchList",props:{data:{type:Array,default:function(){return[]}}},methods:{getAnwser:function(t){this.$emit("reset",t)}}},S=A,D=(n("559c"),Object(b["a"])(S,L,I,!1,null,null,null)),R=D.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat-queue-message",class:{show:t.showQueueInfo,hide:!t.showQueueInfo}},[i("img",{attrs:{src:n("37b9")}}),i("span",{domProps:{innerHTML:t._s(t.queueText)}})])},j=[],N={computed:Object(h["a"])(Object(h["a"])({},Object(d["d"])("zchat",["queue_position","isZendeskChatting"])),{},{queueText:function(){return this.$i18n.t("base.queue/topPostion",["<em>".concat(this.queue_position,"</em>")])},showQueueInfo:function(){return this.isZendeskChatting&&this.queue_position>0}})},q=N,M=(n("7174"),Object(b["a"])(q,P,j,!1,null,null,null)),z=M.exports,U=n("a3be"),B={name:"",data:function(){return{showNav:!1,timer:null,message:"",searchListData:[],uploading:!1}},components:{SearchList:R,ChatQueueTips:z},mounted:function(){var t=this;this.$nextTick((function(){var e=document.querySelector(".message-list-container");e.addEventListener("scroll",t.handleScroll)}))},computed:Object(h["a"])(Object(h["a"])(Object(h["a"])({},Object(d["d"])("base",["isAPP","isBangs","uid","locale"])),Object(d["d"])("zchat",["isZendeskChatting","queue_position"])),{},{firstLevelNav:function(){return this.isAPP?T:_},inputText:function(){return this.$i18n.t("base.inputQuestion")},showQueueInfo:function(){return this.isZendeskChatting&&this.queue_position>0}}),methods:{handleScroll:function(){var t=document.querySelector(".question-tree-wrap"),e=window.innerHeight||document.documentElement.clientHeight,n=t.getBoundingClientRect(),i=n.top,s=n.bottom,r=i>=-80&&s<=e;this.showNav=!r},filterMessage:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isZendeskChatting){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(U["h"])({keyWords:t.message});case 4:n=e.sent,i=n.data,s=i.success,r=i.data,s&&(t.searchListData=r);case 9:case"end":return e.stop()}}),e)})))()},sendMessage:function(){var t=this.message;t&&(window.sensors.track("customer_sc_send_click"),this.isZendeskChatting?(C.a.sendChatMsg(t,(function(t){})),this.message&&this.$store.dispatch("chats/updateChats",{type:"chat.msg",msg:t})):(this.message&&this.$store.dispatch("chats/updateChats",{type:"chat.msg",msg:t}),this.$store.dispatch("chats/updateChats",{type:"chat.anwser",questionId:"",msg:t})),this.clearSearch())},uploadFile:function(t){var e=u(t.target.files,1),n=e[0];this.$store.dispatch("chats/updateChats",{type:"chat.media",className:"visiter",attachment:{mime_type:n.type,url:window.URL.createObjectURL(n),name:n.name,size:n.size,isVisiterSend:!0,file:n}}),t.target.value=""},getAnwser:function(t){this.$store.dispatch("chats/updateChats",{type:"chat.msg",msg:t.question}),this.$store.dispatch("chats/updateChats",{type:"chat.anwser",questionId:t.questionId,msg:t.question}),window.sensors.track("customer_sc_send_content_click",{content_id:t.questionId}),this.clearSearch()},clearSearch:function(){this.message="",this.searchListData=[]},inputFocus:function(){var t=this;this.$EventBus.$emit("toBottom"),setTimeout((function(){t.handleScroll()}),200)},inputBlur:function(){var t=this;setTimeout((function(){t.handleScroll()}),200)},toZendedsk:function(){if(Object(U["l"])({type:3,questionId:this.questionId}),window.sensors.track("customer_sc_unsolved_click",{content_id:this.questionId}),["ru-ru"].includes(this.locale)||7===+this.sceneCode)this.showTicket();else{var t=2147641153,e=C.a.getDepartment(t),n=e&&e.status;"offline"===n?this.showTicket():(this.$store.commit("base/setDepartmentId",t),this.uid?this.toArtificial():this.$store.commit("base/setPrechatDiaState",!0),window.sensors.track("customer_sc_customer_pop_expose"))}},toArtificial:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r,o,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.uid,"closed"===t.connection&&C.a.reconnect(),i=C.a.getVisitorInfo(),s=i.email,r=i.phone,o=i.display_name,a=o&&-1!==o.indexOf("UID:")?"".concat(o.split("UID:")[0],"UID: ").concat(n):"".concat(o," UID: ").concat(n),C.a.setVisitorInfo({email:s||"",phone:r||"",display_name:a},(function(e){if(!e){try{C.a.setVisitorDefaultDepartment(2147641153)}catch(n){}C.a.sendChatMsg(t.$i18n.t("base.hello"))}})),c=t.locale,setTimeout((function(){C.a.addTags([c],(function(){}))}),3e3),t.$store.dispatch("chats/updateChats",{type:"chat.wating"}),t.$store.commit("base/setZchatBtnTime",+new Date);case 9:case"end":return e.stop()}}),e)})))()},showTicket:function(){this.$store.dispatch("chats/updateChats",{type:"chat.agent.tips",msg:this.$i18n.t("base.contact/information"),className:"unsolve",needTicket:!0}),this.$store.commit("base/setZchatBtnTime",+new Date)}},watch:{message:function(t){var e=this;clearTimeout(this.timer),t?this.timer=setTimeout((function(){e.filterMessage(t)}),500):this.searchListData=[]}}},V=B,F=(n("10da"),n("17ab"),Object(b["a"])(V,i,s,!1,null,null,null));e["a"]=F.exports},"944a":function(t,e,n){var i=n("746f");i("toStringTag")},"95cf":function(t,e,n){"use strict";n("049c")},9861:function(t,e,n){"use strict";n("e260");var i=n("23e7"),s=n("da84"),r=n("d066"),o=n("c65b"),a=n("e330"),c=n("0d3b"),u=n("6eeb"),l=n("e2cc"),h=n("d44e"),d=n("9ed3"),f=n("69f3"),p=n("19aa"),m=n("1626"),g=n("1a2d"),v=n("0366"),b=n("f5df"),w=n("825a"),_=n("861d"),y=n("577e"),$=n("7c73"),k=n("5c6c"),E=n("9a1f"),x=n("35a1"),T=n("b622"),O=n("addb"),C=T("iterator"),L="URLSearchParams",I=L+"Iterator",A=f.set,S=f.getterFor(L),D=f.getterFor(I),R=r("fetch"),P=r("Request"),j=r("Headers"),N=P&&P.prototype,q=j&&j.prototype,M=s.RegExp,z=s.TypeError,U=s.decodeURIComponent,B=s.encodeURIComponent,V=a("".charAt),F=a([].join),H=a([].push),K=a("".replace),W=a([].shift),Y=a([].splice),Z=a("".split),X=a("".slice),G=/\+/g,Q=Array(4),J=function(t){return Q[t-1]||(Q[t-1]=M("((?:%[\\da-f]{2}){"+t+"})","gi"))},tt=function(t){try{return U(t)}catch(e){return t}},et=function(t){var e=K(t,G," "),n=4;try{return U(e)}catch(i){while(n)e=K(e,J(n--),tt);return e}},nt=/[!'()~]|%20/g,it={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},st=function(t){return it[t]},rt=function(t){return K(B(t),nt,st)},ot=function(t,e){if(e){var n,i,s=Z(e,"&"),r=0;while(r<s.length)n=s[r++],n.length&&(i=Z(n,"="),H(t,{key:et(W(i)),value:et(F(i,"="))}))}},at=function(t){this.entries.length=0,ot(this.entries,t)},ct=function(t,e){if(t<e)throw z("Not enough arguments")},ut=d((function(t,e){A(this,{type:I,iterator:E(S(t).entries),kind:e})}),"Iterator",(function(){var t=D(this),e=t.kind,n=t.iterator.next(),i=n.value;return n.done||(n.value="keys"===e?i.key:"values"===e?i.value:[i.key,i.value]),n})),lt=function(){p(this,ht);var t,e,n,i,s,r,a,c,u,l=arguments.length>0?arguments[0]:void 0,h=this,d=[];if(A(h,{type:L,entries:d,updateURL:function(){},updateSearchParams:at}),void 0!==l)if(_(l))if(t=x(l),t){e=E(l,t),n=e.next;while(!(i=o(n,e)).done){if(s=E(w(i.value)),r=s.next,(a=o(r,s)).done||(c=o(r,s)).done||!o(r,s).done)throw z("Expected sequence with length 2");H(d,{key:y(a.value),value:y(c.value)})}}else for(u in l)g(l,u)&&H(d,{key:u,value:y(l[u])});else ot(d,"string"==typeof l?"?"===V(l,0)?X(l,1):l:y(l))},ht=lt.prototype;if(l(ht,{append:function(t,e){ct(arguments.length,2);var n=S(this);H(n.entries,{key:y(t),value:y(e)}),n.updateURL()},delete:function(t){ct(arguments.length,1);var e=S(this),n=e.entries,i=y(t),s=0;while(s<n.length)n[s].key===i?Y(n,s,1):s++;e.updateURL()},get:function(t){ct(arguments.length,1);for(var e=S(this).entries,n=y(t),i=0;i<e.length;i++)if(e[i].key===n)return e[i].value;return null},getAll:function(t){ct(arguments.length,1);for(var e=S(this).entries,n=y(t),i=[],s=0;s<e.length;s++)e[s].key===n&&H(i,e[s].value);return i},has:function(t){ct(arguments.length,1);var e=S(this).entries,n=y(t),i=0;while(i<e.length)if(e[i++].key===n)return!0;return!1},set:function(t,e){ct(arguments.length,1);for(var n,i=S(this),s=i.entries,r=!1,o=y(t),a=y(e),c=0;c<s.length;c++)n=s[c],n.key===o&&(r?Y(s,c--,1):(r=!0,n.value=a));r||H(s,{key:o,value:a}),i.updateURL()},sort:function(){var t=S(this);O(t.entries,(function(t,e){return t.key>e.key?1:-1})),t.updateURL()},forEach:function(t){var e,n=S(this).entries,i=v(t,arguments.length>1?arguments[1]:void 0),s=0;while(s<n.length)e=n[s++],i(e.value,e.key,this)},keys:function(){return new ut(this,"keys")},values:function(){return new ut(this,"values")},entries:function(){return new ut(this,"entries")}},{enumerable:!0}),u(ht,C,ht.entries,{name:"entries"}),u(ht,"toString",(function(){var t,e=S(this).entries,n=[],i=0;while(i<e.length)t=e[i++],H(n,rt(t.key)+"="+rt(t.value));return F(n,"&")}),{enumerable:!0}),h(lt,L),i({global:!0,forced:!c},{URLSearchParams:lt}),!c&&m(j)){var dt=a(q.has),ft=a(q.set),pt=function(t){if(_(t)){var e,n=t.body;if(b(n)===L)return e=t.headers?new j(t.headers):new j,dt(e,"content-type")||ft(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),$(t,{body:k(0,y(n)),headers:k(0,e)})}return t};if(m(R)&&i({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return R(t,arguments.length>1?pt(arguments[1]):{})}}),m(P)){var mt=function(t){return p(this,N),new P(t,arguments.length>1?pt(arguments[1]):{})};N.constructor=mt,mt.prototype=N,i({global:!0,forced:!0},{Request:mt})}}t.exports={URLSearchParams:lt,getState:S}},"9a1f":function(t,e,n){var i=n("da84"),s=n("c65b"),r=n("59ed"),o=n("825a"),a=n("0d51"),c=n("35a1"),u=i.TypeError;t.exports=function(t,e){var n=arguments.length<2?c(t):e;if(r(n))return o(s(n,t));throw u(a(t)+" is not iterable")}},"9b67":function(t,e,n){},"9bdd":function(t,e,n){var i=n("825a"),s=n("2a62");t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(o){s(t,"throw",o)}}},"9fd7":function(t,e,n){},a630:function(t,e,n){var i=n("23e7"),s=n("4df4"),r=n("1c7e"),o=!r((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:o},{from:s})},addb:function(t,e,n){var i=n("f36a"),s=Math.floor,r=function(t,e){var n=t.length,c=s(n/2);return n<8?o(t,e):a(t,r(i(t,0,c),e),r(i(t,c),e),e)},o=function(t,e){var n,i,s=t.length,r=1;while(r<s){i=r,n=t[r];while(i&&e(t[i-1],n)>0)t[i]=t[--i];i!==r++&&(t[i]=n)}return t},a=function(t,e,n,i){var s=e.length,r=n.length,o=0,a=0;while(o<s||a<r)t[o+a]=o<s&&a<r?i(e[o],n[a])<=0?e[o++]:n[a++]:o<s?e[o++]:n[a++];return t};t.exports=r},afd3:function(t,e,n){},b0c0:function(t,e,n){var i=n("83ab"),s=n("5e77").EXISTS,r=n("e330"),o=n("9bf2").f,a=Function.prototype,c=r(a.toString),u=/^\s*function ([^ (]*)/,l=r(u.exec),h="name";i&&!s&&o(a,h,{configurable:!0,get:function(){try{return l(u,c(this))[1]}catch(t){return""}}})},b1e5:function(t,e,n){},b4b6:function(t,e,n){"use strict";n("4c75")},b680:function(t,e,n){"use strict";var i=n("23e7"),s=n("da84"),r=n("e330"),o=n("5926"),a=n("408a"),c=n("1148"),u=n("d039"),l=s.RangeError,h=s.String,d=Math.floor,f=r(c),p=r("".slice),m=r(1..toFixed),g=function(t,e,n){return 0===e?n:e%2===1?g(t,e-1,n*t):g(t*t,e/2,n)},v=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},b=function(t,e,n){var i=-1,s=n;while(++i<6)s+=e*t[i],t[i]=s%1e7,s=d(s/1e7)},w=function(t,e){var n=6,i=0;while(--n>=0)i+=t[n],t[n]=d(i/e),i=i%e*1e7},_=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var i=h(t[e]);n=""===n?i:n+f("0",7-i.length)+i}return n},y=u((function(){return"0.000"!==m(8e-5,3)||"1"!==m(.9,0)||"1.25"!==m(1.255,2)||"1000000000000000128"!==m(0xde0b6b3a7640080,0)}))||!u((function(){m({})}));i({target:"Number",proto:!0,forced:y},{toFixed:function(t){var e,n,i,s,r=a(this),c=o(t),u=[0,0,0,0,0,0],d="",m="0";if(c<0||c>20)throw l("Incorrect fraction digits");if(r!=r)return"NaN";if(r<=-1e21||r>=1e21)return h(r);if(r<0&&(d="-",r=-r),r>1e-21)if(e=v(r*g(2,69,1))-69,n=e<0?r*g(2,-e,1):r/g(2,e,1),n*=4503599627370496,e=52-e,e>0){b(u,0,n),i=c;while(i>=7)b(u,1e7,0),i-=7;b(u,g(10,i,1),0),i=e-1;while(i>=23)w(u,1<<23),i-=23;w(u,1<<i),b(u,1,1),w(u,2),m=_(u)}else b(u,0,n),b(u,1<<-e,0),m=_(u)+f("0",c);return c>0?(s=m.length,m=d+(s<=c?"0."+f("0",c-s)+m:p(m,0,s-c)+"."+p(m,s-c))):m=d+m,m}})},c024:function(t,e,n){},c3b3:function(t,e,n){"use strict";n("caf6")},c607:function(t,e,n){var i=n("da84"),s=n("83ab"),r=n("fce3"),o=n("c6b6"),a=n("9bf2").f,c=n("69f3").get,u=RegExp.prototype,l=i.TypeError;s&&r&&a(u,"dotAll",{configurable:!0,get:function(){if(this!==u){if("RegExp"===o(this))return!!c(this).dotAll;throw l("Incompatible receiver, RegExp required")}}})},c82c:function(t,e,n){
/*!
 * Viewer.js v1.8.0
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2020-11-08T05:28:37.365Z
 */
(function(e,n){t.exports=n()})(0,(function(){"use strict";function t(e){return t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var a={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,zoom:null,zoomed:null,play:null,stop:null},c='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',u="undefined"!==typeof window&&"undefined"!==typeof window.document,l=u?window:{},h=!(!u||!l.document.documentElement)&&"ontouchstart"in l.document.documentElement,d=!!u&&"PointerEvent"in l,f="viewer",p="move",m="switch",g="zoom",v="".concat(f,"-active"),b="".concat(f,"-close"),w="".concat(f,"-fade"),_="".concat(f,"-fixed"),y="".concat(f,"-fullscreen"),$="".concat(f,"-fullscreen-exit"),k="".concat(f,"-hide"),E="".concat(f,"-hide-md-down"),x="".concat(f,"-hide-sm-down"),T="".concat(f,"-hide-xs-down"),O="".concat(f,"-in"),C="".concat(f,"-invisible"),L="".concat(f,"-loading"),I="".concat(f,"-move"),A="".concat(f,"-open"),S="".concat(f,"-show"),D="".concat(f,"-transition"),R="click",P="dblclick",j="dragstart",N="focusin",q="hidden",M="hide",z="keydown",U="load",B=h?"touchstart":"mousedown",V=h?"touchmove":"mousemove",F=h?"touchend touchcancel":"mouseup",H=d?"pointerdown":B,K=d?"pointermove":V,W=d?"pointerup pointercancel":F,Y="ready",Z="resize",X="show",G="shown",Q="transitionend",J="view",tt="viewed",et="wheel",nt="zoom",it="zoomed",st="play",rt="stop",ot="".concat(f,"Action"),at=/\s\s*/,ct=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function ut(t){return"string"===typeof t}var lt=Number.isNaN||l.isNaN;function ht(t){return"number"===typeof t&&!lt(t)}function dt(t){return"undefined"===typeof t}function ft(e){return"object"===t(e)&&null!==e}var pt=Object.prototype.hasOwnProperty;function mt(t){if(!ft(t))return!1;try{var e=t.constructor,n=e.prototype;return e&&n&&pt.call(n,"isPrototypeOf")}catch(i){return!1}}function gt(t){return"function"===typeof t}function vt(t,e){if(t&&gt(e))if(Array.isArray(t)||ht(t.length)){var n,i=t.length;for(n=0;n<i;n+=1)if(!1===e.call(t,t[n],n,t))break}else ft(t)&&Object.keys(t).forEach((function(n){e.call(t,t[n],n,t)}));return t}var bt=Object.assign||function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return ft(t)&&n.length>0&&n.forEach((function(e){ft(e)&&Object.keys(e).forEach((function(n){t[n]=e[n]}))})),t},wt=/^(?:width|height|left|top|marginLeft|marginTop)$/;function _t(t,e){var n=t.style;vt(e,(function(t,e){wt.test(e)&&ht(t)&&(t+="px"),n[e]=t}))}function yt(t){return ut(t)?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}function $t(t,e){return!(!t||!e)&&(t.classList?t.classList.contains(e):t.className.indexOf(e)>-1)}function kt(t,e){if(t&&e)if(ht(t.length))vt(t,(function(t){kt(t,e)}));else if(t.classList)t.classList.add(e);else{var n=t.className.trim();n?n.indexOf(e)<0&&(t.className="".concat(n," ").concat(e)):t.className=e}}function Et(t,e){t&&e&&(ht(t.length)?vt(t,(function(t){Et(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function xt(t,e,n){e&&(ht(t.length)?vt(t,(function(t){xt(t,e,n)})):n?kt(t,e):Et(t,e))}var Tt=/([a-z\d])([A-Z])/g;function Ot(t){return t.replace(Tt,"$1-$2").toLowerCase()}function Ct(t,e){return ft(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Ot(e)))}function Lt(t,e,n){ft(n)?t[e]=n:t.dataset?t.dataset[e]=n:t.setAttribute("data-".concat(Ot(e)),n)}var It=function(){var t=!1;if(u){var e=!1,n=function(){},i=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});l.addEventListener("test",n,i),l.removeEventListener("test",n,i)}return t}();function At(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n;e.trim().split(at).forEach((function(e){if(!It){var r=t.listeners;r&&r[e]&&r[e][n]&&(s=r[e][n],delete r[e][n],0===Object.keys(r[e]).length&&delete r[e],0===Object.keys(r).length&&delete t.listeners)}t.removeEventListener(e,s,i)}))}function St(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n;e.trim().split(at).forEach((function(e){if(i.once&&!It){var r=t.listeners,o=void 0===r?{}:r;s=function(){delete o[e][n],t.removeEventListener(e,s,i);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];n.apply(t,a)},o[e]||(o[e]={}),o[e][n]&&t.removeEventListener(e,o[e][n],i),o[e][n]=s,t.listeners=o}t.addEventListener(e,s,i)}))}function Dt(t,e,n,i){var s;return gt(Event)&&gt(CustomEvent)?s=new CustomEvent(e,o({bubbles:!0,cancelable:!0,detail:n},i)):(s=document.createEvent("CustomEvent"),s.initCustomEvent(e,!0,!0,n)),t.dispatchEvent(s)}function Rt(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function Pt(t){var e=t.rotate,n=t.scaleX,i=t.scaleY,s=t.translateX,r=t.translateY,o=[];ht(s)&&0!==s&&o.push("translateX(".concat(s,"px)")),ht(r)&&0!==r&&o.push("translateY(".concat(r,"px)")),ht(e)&&0!==e&&o.push("rotate(".concat(e,"deg)")),ht(n)&&1!==n&&o.push("scaleX(".concat(n,")")),ht(i)&&1!==i&&o.push("scaleY(".concat(i,")"));var a=o.length?o.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function jt(t){return ut(t)?decodeURIComponent(t.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var Nt=l.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(l.navigator.userAgent);function qt(t,e,n){var i=document.createElement("img");if(t.naturalWidth&&!Nt)return n(t.naturalWidth,t.naturalHeight),i;var s=document.body||document.documentElement;return i.onload=function(){n(i.width,i.height),Nt||s.removeChild(i)},vt(e.inheritedAttributes,(function(e){var n=t.getAttribute(e);null!==n&&i.setAttribute(e,n)})),i.src=t.src,Nt||(i.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",s.appendChild(i)),i}function Mt(t){switch(t){case 2:return T;case 3:return x;case 4:return E;default:return""}}function zt(t){var e=o({},t),n=[];return vt(t,(function(t,i){delete e[i],vt(e,(function(e){var i=Math.abs(t.startX-e.startX),s=Math.abs(t.startY-e.startY),r=Math.abs(t.endX-e.endX),o=Math.abs(t.endY-e.endY),a=Math.sqrt(i*i+s*s),c=Math.sqrt(r*r+o*o),u=(c-a)/a;n.push(u)}))})),n.sort((function(t,e){return Math.abs(t)<Math.abs(e)})),n[0]}function Ut(t,e){var n=t.pageX,i=t.pageY,s={endX:n,endY:i};return e?s:o({timeStamp:Date.now(),startX:n,startY:i},s)}function Bt(t){var e=0,n=0,i=0;return vt(t,(function(t){var s=t.startX,r=t.startY;e+=s,n+=r,i+=1})),e/=i,n/=i,{pageX:e,pageY:n}}var Vt={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var t=this.element.ownerDocument,e=t.body||t.documentElement;this.body=e,this.scrollbarWidth=window.innerWidth-t.documentElement.clientWidth,this.initialBodyPaddingRight=e.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(e).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var t,e=this.options,n=this.parent;e.inline&&(t={width:Math.max(n.offsetWidth,e.minWidth),height:Math.max(n.offsetHeight,e.minHeight)},this.parentData=t),!this.fulled&&t||(t=this.containerData),this.viewerData=bt({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&_t(this.viewer,this.viewerData)},initList:function(){var t=this,e=this.element,n=this.options,i=this.list,s=[];i.innerHTML="",vt(this.images,(function(e,r){var o=e.src,a=e.alt||jt(o),c=t.getImageURL(e);if(o||c){var u=document.createElement("li"),l=document.createElement("img");vt(n.inheritedAttributes,(function(t){var n=e.getAttribute(t);null!==n&&l.setAttribute(t,n)})),l.src=o||c,l.alt=a,l.setAttribute("data-original-url",c||o),u.setAttribute("data-index",r),u.setAttribute("data-viewer-action","view"),u.setAttribute("role","button"),n.keyboard&&u.setAttribute("tabindex",0),u.appendChild(l),i.appendChild(u),s.push(u)}})),this.items=s,vt(s,(function(e){var i=e.firstElementChild;Lt(i,"filled",!0),n.loading&&kt(e,L),St(i,U,(function(i){n.loading&&Et(e,L),t.loadImage(i)}),{once:!0})})),n.transition&&St(e,tt,(function(){kt(i,D)}),{once:!0})},renderList:function(t){var e=t||this.index,n=this.items[e].offsetWidth||30,i=n+1;_t(this.list,bt({width:i*this.length},Pt({translateX:(this.viewerData.width-n)/2-i*e})))},resetList:function(){var t=this.list;t.innerHTML="",Et(t,D),_t(t,Pt({translateX:0}))},initImage:function(t){var e,n=this,i=this.options,s=this.image,r=this.viewerData,o=this.footer.offsetHeight,a=r.width,c=Math.max(r.height-o,o),u=this.imageData||{};this.imageInitializing={abort:function(){e.onload=null}},e=qt(s,i,(function(e,s){var r=e/s,o=a,l=c;n.imageInitializing=!1,c*r>a?l=a/r:o=c*r,o=Math.min(.9*o,e),l=Math.min(.9*l,s);var h={naturalWidth:e,naturalHeight:s,aspectRatio:r,ratio:o/e,width:o,height:l,left:(a-o)/2,top:(c-l)/2},d=bt({},h);i.rotatable&&(h.rotate=u.rotate||0,d.rotate=0),i.scalable&&(h.scaleX=u.scaleX||1,h.scaleY=u.scaleY||1,d.scaleX=1,d.scaleY=1),n.imageData=h,n.initialImageData=d,t&&t()}))},renderImage:function(t){var e=this,n=this.image,i=this.imageData;if(_t(n,bt({width:i.width,height:i.height,marginLeft:i.left,marginTop:i.top},Pt(i))),t)if((this.viewing||this.zooming)&&this.options.transition){var s=function(){e.imageRendering=!1,t()};this.imageRendering={abort:function(){At(n,Q,s)}},St(n,Q,s,{once:!0})}else t()},resetImage:function(){if(this.viewing||this.viewed){var t=this.image;this.viewing&&this.viewing.abort(),t.parentNode.removeChild(t),this.image=null}}},Ft={bind:function(){var t=this.options,e=this.viewer,n=this.canvas,i=this.element.ownerDocument;St(e,R,this.onClick=this.click.bind(this)),St(e,j,this.onDragStart=this.dragstart.bind(this)),St(n,H,this.onPointerDown=this.pointerdown.bind(this)),St(i,K,this.onPointerMove=this.pointermove.bind(this)),St(i,W,this.onPointerUp=this.pointerup.bind(this)),St(i,z,this.onKeyDown=this.keydown.bind(this)),St(window,Z,this.onResize=this.resize.bind(this)),t.zoomable&&t.zoomOnWheel&&St(e,et,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleOnDblclick&&St(n,P,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var t=this.options,e=this.viewer,n=this.canvas,i=this.element.ownerDocument;At(e,R,this.onClick),At(e,j,this.onDragStart),At(n,H,this.onPointerDown),At(i,K,this.onPointerMove),At(i,W,this.onPointerUp),At(i,z,this.onKeyDown),At(window,Z,this.onResize),t.zoomable&&t.zoomOnWheel&&At(e,et,this.onWheel,{passive:!1,capture:!0}),t.toggleOnDblclick&&At(n,P,this.onDblclick)}},Ht={click:function(t){var e=this.options,n=this.imageData,i=t.target,s=Ct(i,ot);switch(s||"img"!==i.localName||"li"!==i.parentElement.localName||(i=i.parentElement,s=Ct(i,ot)),h&&t.isTrusted&&i===this.canvas&&clearTimeout(this.clickCanvasTimeout),s){case"mix":this.played?this.stop():e.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.hide();break;case"view":this.view(Ct(i,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(e.loop);break;case"play":this.play(e.fullscreen);break;case"next":this.next(e.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-n.scaleX||-1);break;case"flip-vertical":this.scaleY(-n.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(t){t.preventDefault(),this.viewed&&t.target===this.image&&(h&&t.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle())},load:function(){var t=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var e=this.element,n=this.options,i=this.image,s=this.index,r=this.viewerData;Et(i,C),n.loading&&Et(this.canvas,L),i.style.cssText="height:0;"+"margin-left:".concat(r.width/2,"px;")+"margin-top:".concat(r.height/2,"px;")+"max-width:none!important;position:absolute;width:0;",this.initImage((function(){xt(i,I,n.movable),xt(i,D,n.transition),t.renderImage((function(){t.viewed=!0,t.viewing=!1,gt(n.viewed)&&St(e,tt,n.viewed,{once:!0}),Dt(e,tt,{originalImage:t.images[s],index:s,image:i},{cancelable:!1})}))}))},loadImage:function(t){var e=t.target,n=e.parentNode,i=n.offsetWidth||30,s=n.offsetHeight||50,r=!!Ct(e,"filled");qt(e,this.options,(function(t,n){var o=t/n,a=i,c=s;s*o>i?r?a=s*o:c=i/o:r?c=i/o:a=s*o,_t(e,bt({width:a,height:c},Pt({translateX:(i-a)/2,translateY:(s-c)/2})))}))},keydown:function(t){var e=this.options;if(e.keyboard){var n=t.keyCode||t.which||t.charCode;switch(n){case 13:this.viewer.contains(t.target)&&this.click(t);break}if(this.fulled)switch(n){case 27:this.played?this.stop():e.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.prev(e.loop);break;case 38:t.preventDefault(),this.zoom(e.zoomRatio,!0);break;case 39:this.next(e.loop);break;case 40:t.preventDefault(),this.zoom(-e.zoomRatio,!0);break;case 48:case 49:t.ctrlKey&&(t.preventDefault(),this.toggle());break}}},dragstart:function(t){"img"===t.target.localName&&t.preventDefault()},pointerdown:function(t){var e=this.options,n=this.pointers,i=t.buttons,s=t.button;if(!(!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(ht(i)&&1!==i||ht(s)&&0!==s||t.ctrlKey))){t.preventDefault(),t.changedTouches?vt(t.changedTouches,(function(t){n[t.identifier]=Ut(t)})):n[t.pointerId||0]=Ut(t);var r=!!e.movable&&p;e.zoomOnTouch&&e.zoomable&&Object.keys(n).length>1?r=g:e.slideOnTouch&&("touch"===t.pointerType||"touchstart"===t.type)&&this.isSwitchable()&&(r=m),!e.transition||r!==p&&r!==g||Et(this.image,D),this.action=r}},pointermove:function(t){var e=this.pointers,n=this.action;this.viewed&&n&&(t.preventDefault(),t.changedTouches?vt(t.changedTouches,(function(t){bt(e[t.identifier]||{},Ut(t,!0))})):bt(e[t.pointerId||0]||{},Ut(t,!0)),this.change(t))},pointerup:function(t){var e,n=this,i=this.options,s=this.action,r=this.pointers;t.changedTouches?vt(t.changedTouches,(function(t){e=r[t.identifier],delete r[t.identifier]})):(e=r[t.pointerId||0],delete r[t.pointerId||0]),s&&(t.preventDefault(),!i.transition||s!==p&&s!==g||kt(this.image,D),this.action=!1,h&&s!==g&&e&&Date.now()-e.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),i.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout((function(){Dt(n.image,P)}),50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout((function(){n.imageClicked=!1}),500)):(this.imageClicked=!1,i.backdrop&&"static"!==i.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout((function(){Dt(n.canvas,R)}),50)))))},resize:function(){var t=this;if(this.isShown&&!this.hiding&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage((function(){t.renderImage()})),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))return void this.stop();vt(this.player.getElementsByTagName("img"),(function(e){St(e,U,t.loadImage.bind(t),{once:!0}),Dt(e,U)}))}},wheel:function(t){var e=this;if(this.viewed&&(t.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50);var n=Number(this.options.zoomRatio)||.1,i=1;t.deltaY?i=t.deltaY>0?1:-1:t.wheelDelta?i=-t.wheelDelta/120:t.detail&&(i=t.detail>0?1:-1),this.zoom(-i*n,!0,t)}}},Kt={show:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.element,n=this.options;if(n.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(t),this;if(gt(n.show)&&St(e,X,n.show,{once:!0}),!1===Dt(e,X)||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var i=this.viewer;if(Et(i,k),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("aria-hidden"),n.transition&&!t){var s=this.shown.bind(this);this.transitioning={abort:function(){At(i,Q,s),Et(i,O)}},kt(i,D),i.initialOffsetWidth=i.offsetWidth,St(i,Q,s,{once:!0}),kt(i,O)}else kt(i,O),this.shown();return this},hide:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.element,i=this.options;if(i.inline||this.hiding||!this.isShown&&!this.showing)return this;if(gt(i.hide)&&St(n,M,i.hide,{once:!0}),!1===Dt(n,M))return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var s=this.viewer,r=this.image,o=function(){Et(s,O),t.hidden()};if(i.transition&&!e){var a=function e(n){n&&n.target===s&&(At(s,Q,e),t.hidden())},c=function(){$t(s,D)?(St(s,Q,a),Et(s,O)):o()};this.transitioning={abort:function(){t.viewed&&$t(r,D)?At(r,Q,c):$t(s,D)&&At(s,Q,a)}},this.viewed&&$t(r,D)?(St(r,Q,c,{once:!0}),this.zoomTo(0,!1,!1,!0)):c()}else o();return this},view:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex;if(e=Number(e)||0,this.hiding||this.played||e<0||e>=this.length||this.viewed&&e===this.index)return this;if(!this.isShown)return this.index=e,this.show();this.viewing&&this.viewing.abort();var n=this.element,i=this.options,s=this.title,r=this.canvas,o=this.items[e],a=o.querySelector("img"),c=Ct(a,"originalUrl"),u=a.getAttribute("alt"),l=document.createElement("img");if(vt(i.inheritedAttributes,(function(t){var e=a.getAttribute(t);null!==e&&l.setAttribute(t,e)})),l.src=c,l.alt=u,gt(i.view)&&St(n,J,i.view,{once:!0}),!1===Dt(n,J,{originalImage:this.images[e],index:e,image:l})||!this.isShown||this.hiding||this.played)return this;var h=this.items[this.index];Et(h,v),h.removeAttribute("aria-selected"),kt(o,v),o.setAttribute("aria-selected",!0),i.focus&&o.focus(),this.image=l,this.viewed=!1,this.index=e,this.imageData={},kt(l,C),i.loading&&kt(r,L),r.innerHTML="",r.appendChild(l),this.renderList(),s.innerHTML="";var d,f=function(){var e=t.imageData,n=Array.isArray(i.title)?i.title[1]:i.title;s.innerHTML=yt(gt(n)?n.call(t,l,e):"".concat(u," (").concat(e.naturalWidth," × ").concat(e.naturalHeight,")"))};return St(n,tt,f,{once:!0}),this.viewing={abort:function(){At(n,tt,f),l.complete?t.imageRendering?t.imageRendering.abort():t.imageInitializing&&t.imageInitializing.abort():(l.src="",At(l,U,d),t.timeout&&clearTimeout(t.timeout))}},l.complete?this.load():(St(l,U,d=this.load.bind(this),{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){Et(l,C),t.timeout=!1}),1e3)),this},prev:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.index-1;return e<0&&(e=t?this.length-1:0),this.view(e),this},next:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.length-1,n=this.index+1;return n>e&&(n=t?0:e),this.view(n),this},move:function(t,e){var n=this.imageData;return this.moveTo(dt(t)?t:n.left+Number(t),dt(e)?e:n.top+Number(e)),this},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData;if(t=Number(t),e=Number(e),this.viewed&&!this.played&&this.options.movable){var i=!1;ht(t)&&(n.left=t,i=!0),ht(e)&&(n.top=e,i=!0),i&&this.renderImage()}return this},zoom:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.imageData;return t=Number(t),t=t<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,e,n),this},zoomTo:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.element,o=this.options,a=this.pointers,c=this.imageData,u=c.width,l=c.height,h=c.left,d=c.top,f=c.naturalWidth,p=c.naturalHeight;if(t=Math.max(0,t),ht(t)&&this.viewed&&!this.played&&(s||o.zoomable)){if(!s){var m=Math.max(.01,o.minZoomRatio),g=Math.min(100,o.maxZoomRatio);t=Math.min(Math.max(t,m),g)}i&&o.zoomRatio>=.055&&t>.95&&t<1.05&&(t=1);var v=f*t,b=p*t,w=v-u,_=b-l,y=u/f;if(gt(o.zoom)&&St(r,nt,o.zoom,{once:!0}),!1===Dt(r,nt,{ratio:t,oldRatio:y,originalEvent:i}))return this;if(this.zooming=!0,i){var $=Rt(this.viewer),k=a&&Object.keys(a).length?Bt(a):{pageX:i.pageX,pageY:i.pageY};c.left-=w*((k.pageX-$.left-h)/u),c.top-=_*((k.pageY-$.top-d)/l)}else c.left-=w/2,c.top-=_/2;c.width=v,c.height=b,c.ratio=t,this.renderImage((function(){e.zooming=!1,gt(o.zoomed)&&St(r,it,o.zoomed,{once:!0}),Dt(r,it,{ratio:t,oldRatio:y,originalEvent:i},{cancelable:!1})})),n&&this.tooltip()}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t)),this},rotateTo:function(t){var e=this.imageData;return t=Number(t),ht(t)&&this.viewed&&!this.played&&this.options.rotatable&&(e.rotate=t,this.renderImage()),this},scaleX:function(t){return this.scale(t,this.imageData.scaleY),this},scaleY:function(t){return this.scale(this.imageData.scaleX,t),this},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=this.imageData;if(t=Number(t),e=Number(e),this.viewed&&!this.played&&this.options.scalable){var i=!1;ht(t)&&(n.scaleX=t,i=!0),ht(e)&&(n.scaleY=e,i=!0),i&&this.renderImage()}return this},play:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isShown||this.played)return this;var n=this.element,i=this.options;if(gt(i.play)&&St(n,st,i.play,{once:!0}),!1===Dt(n,st))return this;var s=this.player,r=this.loadImage.bind(this),o=[],a=0,c=0;if(this.played=!0,this.onLoadWhenPlay=r,e&&this.requestFullscreen(),kt(s,S),vt(this.items,(function(t,e){var n=t.querySelector("img"),u=document.createElement("img");u.src=Ct(n,"originalUrl"),u.alt=n.getAttribute("alt"),u.referrerPolicy=n.referrerPolicy,a+=1,kt(u,w),xt(u,D,i.transition),$t(t,v)&&(kt(u,O),c=e),o.push(u),St(u,U,r,{once:!0}),s.appendChild(u)})),ht(i.interval)&&i.interval>0){var u=function e(){t.playing=setTimeout((function(){Et(o[c],O),c+=1,c=c<a?c:0,kt(o[c],O),e()}),i.interval)};a>1&&u()}return this},stop:function(){var t=this;if(!this.played)return this;var e=this.element,n=this.options;if(gt(n.stop)&&St(e,rt,n.stop,{once:!0}),!1===Dt(e,rt))return this;var i=this.player;return this.played=!1,clearTimeout(this.playing),vt(i.getElementsByTagName("img"),(function(e){At(e,U,t.onLoadWhenPlay)})),Et(i,S),i.innerHTML="",this.exitFullscreen(),this},full:function(){var t=this,e=this.options,n=this.viewer,i=this.image,s=this.list;return!this.isShown||this.played||this.fulled||!e.inline||(this.fulled=!0,this.open(),kt(this.button,$),e.transition&&(Et(s,D),this.viewed&&Et(i,D)),kt(n,_),n.setAttribute("role","dialog"),n.setAttribute("aria-labelledby",this.title.id),n.setAttribute("aria-modal",!0),n.removeAttribute("style"),_t(n,{zIndex:e.zIndex}),e.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=bt({},this.containerData),this.renderList(),this.viewed&&this.initImage((function(){t.renderImage((function(){e.transition&&setTimeout((function(){kt(i,D),kt(s,D)}),0)}))}))),this},exit:function(){var t=this,e=this.options,n=this.viewer,i=this.image,s=this.list;return this.isShown&&!this.played&&this.fulled&&e.inline?(this.fulled=!1,this.close(),Et(this.button,$),e.transition&&(Et(s,D),this.viewed&&Et(i,D)),e.focus&&this.clearEnforceFocus(),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),Et(n,_),_t(n,{zIndex:e.zIndexInline}),this.viewerData=bt({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage((function(){t.renderImage((function(){e.transition&&setTimeout((function(){kt(i,D),kt(s,D)}),0)}))})),this):this},tooltip:function(){var t=this,e=this.options,n=this.tooltipBox,i=this.imageData;return this.viewed&&!this.played&&e.tooltip?(n.textContent="".concat(Math.round(100*i.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):e.transition?(this.fading&&Dt(n,Q),kt(n,S),kt(n,w),kt(n,D),n.removeAttribute("aria-hidden"),n.initialOffsetWidth=n.offsetWidth,kt(n,O)):(kt(n,S),n.removeAttribute("aria-hidden")),this.tooltipping=setTimeout((function(){e.transition?(St(n,Q,(function(){Et(n,S),Et(n,w),Et(n,D),n.setAttribute("aria-hidden",!0),t.fading=!1}),{once:!0}),Et(n,O),t.fading=!0):(Et(n,S),n.setAttribute("aria-hidden",!0)),t.tooltipping=!1}),1e3),this):this},toggle:function(){return 1===this.imageData.ratio?this.zoomTo(this.initialImageData.ratio,!0):this.zoomTo(1,!0),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=bt({},this.initialImageData),this.renderImage()),this},update:function(){var t=this,e=this.element,n=this.options,i=this.isImg;if(i&&!e.parentNode)return this.destroy();var s=[];if(vt(i?[e]:e.querySelectorAll("img"),(function(e){gt(n.filter)?n.filter.call(t,e)&&s.push(e):t.getImageURL(e)&&s.push(e)})),!s.length)return this;if(this.images=s,this.length=s.length,this.ready){var r=[];if(vt(this.items,(function(t,e){var n=t.querySelector("img"),i=s[e];i&&n&&i.src===n.src&&i.alt===n.alt||r.push(e)})),_t(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var o=r.indexOf(this.index);if(o>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-o,this.length-1),0));else{var a=this.items[this.index];kt(a,v),a.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var t=this.element,e=this.options;return t[f]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),e.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):e.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),e.inline||At(t,R,this.onStart),t[f]=void 0,this):this}},Wt={getImageURL:function(t){var e=this.options.url;return e=ut(e)?t.getAttribute(e):gt(e)?e.call(this,t):"",e},enforceFocus:function(){var t=this;this.clearEnforceFocus(),St(document,N,this.onFocusin=function(e){var n=e.target,i=t.viewer;n===document||n===i||i.contains(n)||i.focus()})},clearEnforceFocus:function(){this.onFocusin&&(At(document,N,this.onFocusin),this.onFocusin=null)},open:function(){var t=this.body;kt(t,A),t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px")},close:function(){var t=this.body;Et(t,A),t.style.paddingRight=this.initialBodyPaddingRight},shown:function(){var t=this.element,e=this.options,n=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,e.focus&&(n.focus(),this.enforceFocus()),gt(e.shown)&&St(t,G,e.shown,{once:!0}),!1!==Dt(t,G)&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var t=this.element,e=this.options,n=this.viewer;e.fucus&&this.clearEnforceFocus(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.close(),this.unbind(),kt(n,k),n.removeAttribute("role"),n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-modal"),n.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.hiding=!1,this.destroyed||(gt(e.hidden)&&St(t,q,e.hidden,{once:!0}),Dt(t,q,null,{cancelable:!1}))},requestFullscreen:function(){var t=this.element.ownerDocument;if(this.fulled&&!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)){var e=t.documentElement;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},exitFullscreen:function(){var t=this.element.ownerDocument;this.fulled&&(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},change:function(t){var e=this.options,n=this.pointers,i=n[Object.keys(n)[0]];if(i){var s=i.endX-i.startX,r=i.endY-i.startY;switch(this.action){case p:this.move(s,r);break;case g:this.zoom(zt(n),!1,t);break;case m:this.action="switched";var o=Math.abs(s);o>1&&o>Math.abs(r)&&(this.pointers={},s>1?this.prev(e.loop):s<-1&&this.next(e.loop));break}vt(n,(function(t){t.startX=t.endX,t.startY=t.endY}))}},isSwitchable:function(){var t=this.imageData,e=this.viewerData;return this.length>1&&t.left>=0&&t.top>=0&&t.width<=e.width&&t.height<=e.height}},Yt=l.Viewer,Zt=function(t){return function(){return t+=1,t}}(-1),Xt=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),!n||1!==n.nodeType)throw new Error("The first argument is required and must be an element.");this.element=n,this.options=bt({},a,mt(i)&&i),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.id=Zt(),this.init()}return i(t,[{key:"init",value:function(){var t=this,e=this.element,n=this.options;if(!e[f]){e[f]=this,n.focus&&!n.keyboard&&(n.focus=!1);var i="img"===e.localName,s=[];if(vt(i?[e]:e.querySelectorAll("img"),(function(e){gt(n.filter)?n.filter.call(t,e)&&s.push(e):t.getImageURL(e)&&s.push(e)})),this.isImg=i,this.length=s.length,this.images=s,this.initBody(),dt(document.createElement(f).style.transition)&&(n.transition=!1),n.inline){var r=0,o=function(){var e;(r+=1,r===t.length)&&(t.initializing=!1,t.delaying={abort:function(){clearTimeout(e)}},e=setTimeout((function(){t.delaying=!1,t.build()}),0))};this.initializing={abort:function(){vt(s,(function(t){t.complete||At(t,U,o)}))}},vt(s,(function(t){t.complete?o():St(t,U,o,{once:!0})}))}else St(e,R,this.onStart=function(e){var i=e.target;"img"!==i.localName||gt(n.filter)&&!n.filter.call(t,i)||t.view(t.images.indexOf(i))})}}},{key:"build",value:function(){if(!this.ready){var t=this.element,e=this.options,n=t.parentNode,i=document.createElement("div");i.innerHTML=c;var s=i.querySelector(".".concat(f,"-container")),r=s.querySelector(".".concat(f,"-title")),o=s.querySelector(".".concat(f,"-toolbar")),a=s.querySelector(".".concat(f,"-navbar")),u=s.querySelector(".".concat(f,"-button")),l=s.querySelector(".".concat(f,"-canvas"));if(this.parent=n,this.viewer=s,this.title=r,this.toolbar=o,this.navbar=a,this.button=u,this.canvas=l,this.footer=s.querySelector(".".concat(f,"-footer")),this.tooltipBox=s.querySelector(".".concat(f,"-tooltip")),this.player=s.querySelector(".".concat(f,"-player")),this.list=s.querySelector(".".concat(f,"-list")),s.id="".concat(f).concat(this.id),r.id="".concat(f,"Title").concat(this.id),kt(r,e.title?Mt(Array.isArray(e.title)?e.title[0]:e.title):k),kt(a,e.navbar?Mt(e.navbar):k),xt(u,k,!e.button),e.keyboard&&u.setAttribute("tabindex",0),e.backdrop&&(kt(s,"".concat(f,"-backdrop")),e.inline||"static"===e.backdrop||Lt(l,ot,"hide")),ut(e.className)&&e.className&&e.className.split(at).forEach((function(t){kt(s,t)})),e.toolbar){var h=document.createElement("ul"),d=mt(e.toolbar),p=ct.slice(0,3),m=ct.slice(7,9),g=ct.slice(9);d||kt(o,Mt(e.toolbar)),vt(d?e.toolbar:ct,(function(t,n){var i=d&&mt(t),s=d?Ot(n):t,r=i&&!dt(t.show)?t.show:t;if(r&&(e.zoomable||-1===p.indexOf(s))&&(e.rotatable||-1===m.indexOf(s))&&(e.scalable||-1===g.indexOf(s))){var o=i&&!dt(t.size)?t.size:t,a=i&&!dt(t.click)?t.click:t,c=document.createElement("li");e.keyboard&&c.setAttribute("tabindex",0),c.setAttribute("role","button"),kt(c,"".concat(f,"-").concat(s)),gt(a)||Lt(c,ot,s),ht(r)&&kt(c,Mt(r)),-1!==["small","large"].indexOf(o)?kt(c,"".concat(f,"-").concat(o)):"play"===s&&kt(c,"".concat(f,"-large")),gt(a)&&St(c,R,a),h.appendChild(c)}})),o.appendChild(h)}else kt(o,k);if(!e.rotatable){var v=o.querySelectorAll('li[class*="rotate"]');kt(v,C),vt(v,(function(t){o.appendChild(t)}))}if(e.inline)kt(u,y),_t(s,{zIndex:e.zIndexInline}),"static"===window.getComputedStyle(n).position&&_t(n,{position:"relative"}),n.insertBefore(s,t.nextSibling);else{kt(u,b),kt(s,_),kt(s,w),kt(s,k),_t(s,{zIndex:e.zIndex});var $=e.container;ut($)&&($=t.ownerDocument.querySelector($)),$||($=this.body),$.appendChild(s)}e.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,gt(e.ready)&&St(t,Y,e.ready,{once:!0}),!1!==Dt(t,Y)?this.ready&&e.inline&&this.view(this.index):this.ready=!1}}}],[{key:"noConflict",value:function(){return window.Viewer=Yt,t}},{key:"setDefaults",value:function(t){bt(a,mt(t)&&t)}}]),t}();return bt(Xt.prototype,Vt,Ft,Ht,Kt,Wt),Xt}))},c8d2:function(t,e,n){var i=n("5e77").PROPER,s=n("d039"),r=n("5899"),o="​᠎";t.exports=function(t){return s((function(){return!!r[t]()||o[t]()!==o||i&&r[t].name!==t}))}},c8d6:function(t,e,n){"use strict";n("9fd7")},caf6:function(t,e,n){},cb24:function(t,e,n){(function(t){var i,s,r,o=n("7037").default;n("a4d3"),n("e01a"),n("d3b7"),n("944a"),n("0c47"),n("23dc"),n("ac1f"),n("00b4"),n("5319"),n("25f0"),n("4d63"),n("c607"),n("2c3e"),n("a434"),n("b0c0"),n("1276"),n("a15b"),n("d81d"),n("fb6a"),n("4e82"),n("841c"),n("99af"),n("466d"),n("159b"),n("b64b"),n("a9e3"),n("b680"),n("498a"),n("ddb0"),n("e9c4"),function(n,a){"object"==o(e)&&"object"==o(t)?t.exports=a():(s=[],i=a,r="function"===typeof i?i.apply(e,s):i,void 0===r||(t.exports=r))}(window,(function(){return function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==o(t)&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var s in t)e.d(i,s,function(e){return t[e]}.bind(null,s));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../../bin/",e(e.s=50)}([function(t,e,n){function i(t,e){var n={},i={},s=function(e){return!t.nodeType&&t!=window&&t!=document||("FORM"!=t.tagName||"submit"!=e)&&!h.isCustomEvents&&(h.isFF&&h.isFF<9?!document.createEvent("event")[e.toUpperCase()]:void 0===t["on"+e])},r=function(e,i){if(!e&&"function"!=typeof i)throw"bad arguments to on / addEventListener";return e in n||(n[e]=[],s(e)||o(e)),n[e].push(i),t},o=function(e){e in i||(i[e]=function(i){i&&(i.stopPropagation||f(i));var s,r=n[e],o=r.length,a=!0;for(r._active=!0,s=0;s<o;s++)try{if(!r[s])continue;!1===r[s].call(t,h.isCustomEvents&&i instanceof h.CustomEvent?i.detail:i)&&(a=!1)}catch(t){d.fire("error",t)}if(r._active=!1,r._dirty){for(s=0;s<o;s++)r[s]||(s==o-1?r.pop():r[s--]=r.pop(),o--);r._dirty=!1}if(!1===a)return i&&(i.preventDefault(),i.returnValue=!1),!1},t.attachEvent?t.attachEvent("on"+e,i[e]):t.addEventListener&&t.addEventListener(e,i[e],!1))},a=function(e){var s=i[e];s&&(t.attachEvent?t.detachEvent("on"+e,s):t.addEventListener&&t.removeEventListener(e,s,!1),delete i[e],delete n[e])},c=function(e,s){var r=n[e];if(r){for(var o=0,c=r.length;o<c;o++)if(r[o]===s){1==r.length?i[e]?a(e):delete n[e]:r._active?(r[o]=null,r._dirty=!0):o==c-1?r.pop():r[o]=r.pop();break}return t}},u=function(){if(n&&i){for(var t in i)i.hasOwnProperty(t)&&a(t);n=i=null}},l=function(e,i){if(!h.isCustomEvents||s(e)){var r=n[e],o=!0;if(r&&r.length){var a,c,u;for(r._active=!0,a=0,c=r.length;a<c;a++)try{if(!r[a])continue;u=r[a].call(t,i),!1===u&&(o=!1)}catch(t){d.fire("error",t)}if(r._active=!1,r._dirty){for(a=0;a<c;a++)r[a]||(a==c-1?r.pop():r[a--]=r.pop(),c--);r._dirty=!1}}return o}return t.dispatchEvent(new h.CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i}))},f=function t(e){e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation,e.target=e.srcElement};f.preventDefault=function(){this.returnValue=!1},f.stopPropagation=function(){this.cancelBubble=!0};var p={fire:l,on:r,un:c,unextendEvents:u};if(e)return p;for(var m in p)p.hasOwnProperty(m)&&(t[m]=p[m]);return h.bugs.leaksMemory&&h.bugs.leaksMemory((function(){for(var e in p)p.hasOwnProperty(e)&&(t[e]=null)})),t}function s(t){a(0,t)}function r(t){a(1,t)}function o(t){a(2,t)}function a(t,e){t<=f?e():p[t].push(e)}function c(t){for(;f<t;){f++;for(var e=0;e<p[f].length;e++)p[f][e]();p[f]=null}}function u(){f>0||(document.body&&document.body.firstChild?c(1):window.setTimeout(u,200))}function l(){c(2)}var h=n(2),d={extend:i,body:i(document.body,!0),window:i(window,!0),document:i(document,!0),runAfterScriptReady:s,runAfterFirstChildReady:r,runAfterDomReady:o};d.extend(d);var f=0,p=[[],[],[],[]];u(),function(){var t;if(h.isSafari)t=window.setInterval((function(){/loaded|complete/i.test(document.readyState)&&(window.clearInterval(t),l())}),20);else if(document.addEventListener)/loaded|complete/i.test(document.readyState)?l():document.addEventListener("DOMContentLoaded",l,!1);else if(h.isIE){window.attachEvent("onload",l);var e=document.createElement("document:ready");t=window.setInterval((function(){if(/loaded|complete/i.test(document.readyState))e=null,window.clearInterval(t),l();else{try{e.doScroll("left")}catch(t){return}e=null,window.clearInterval(t),l()}}),200)}}(),t.exports=d},function(t,e){var n=function(t){return function(t,e){return e?null==t:void 0===t}}();t.exports=n},function(t,e,n){function i(){function t(t){return t.replace(/^http:/,P?"https:":"http:")}function e(){if(void 0!==window.innerHeight)return window.innerHeight;if(document.documentElement)return document.documentElement.offsetHeight;var t=document.getElementsByTagName("body");return t.length?t[0].clientHeight:0}function n(){if(void 0!==window.innerWidth)return window.innerWidth;if(document.documentElement)return document.documentElement.offsetWidth;var t=document.getElementsByTagName("body");return t.length?t[0].clientWidth:0}function i(){if(!r(o))return o;var t=document.createElement("div"),e=document.createElement("div"),n=t.style,i=e.style;return n.overflow="auto",n.width=n.height="100px",n.position="absolute",n.top="-1000px",i.width="100%",i.height="200px",t.appendChild(e),document.body.appendChild(t),o=t.offsetWidth-t.clientWidth,document.body.removeChild(t),o}var o,a,c=navigator,u=c.userAgent.toLowerCase(),l=+(/trident.*rv:? *([0-9]+)/.exec(u)||[])[1]||!1,h=function(){for(var t=3,e=document.createElement("div"),n=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",n[0];);return t>4?t:document.documentMode}(),d=8===h,f=7===h,p=6===h,m=!!window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera),g=u.indexOf("edge")>-1,v="Google Inc."===c.vendor,b="Apple Computer, Inc."===c.vendor,w=!g&&!h&&!m&&(v||b||/webkit|khtml/.test(u)),_=+/\d+/.exec(/firefox\/\d+/i.exec(c.userAgent)||""),y=-1!==u.indexOf("iphone"),$=-1!==u.indexOf("ipod"),k=-1!==u.indexOf("ipad"),E=y||k||$,x=-1!==u.indexOf("android"),T=-1!==u.indexOf("wp7"),O=E||x||T,C=(h?"msie":_&&"firefox")||m&&"opera"||v&&"chrome"||b&&"safari",L="CSS1Compat"===document.compatMode,I=!L,A=h&&I&&document.documentElement&&!!document.documentElement.style.setExpression,S=document.documentMode||h,D=-1!==u.indexOf("windows")||-1!==u.indexOf("win32"),R=-1!==u.indexOf("macintosh")||-1!==u.indexOf("mac os x"),P="https:"===document.location.protocol,j=c.language||c.browserLanguage||c.userLanguage||c.systemLanguage,N={noBoxSizing:S<=7,ie:{cssBottomRight:p,cssFixed:p||A,buggyCSS:p||A}},q="textContent"in document.createElement("div"),M=!1,z=null;try{window.CustomEvent&&/\[native code\]|\[object CustomEventConstructor\]/.test(window.CustomEvent.toString())&&(new window.CustomEvent("testevent",{bubbles:!1,cancelable:!0,detail:!0}),M=!0,z=window.CustomEvent)}catch(t){}switch(C){case"msie":case"firefox":case"chrome":a=+/\d+/.exec(new RegExp(C+"[ /]\\d+").exec(u)||"");break;default:a=+/\d+/.exec(/version[ \/]\d+/.exec(u)||"")}var U=!1;try{var B={get passive(){U=!0}},V=function(){};window.addEventListener("test",V,B),window.removeEventListener("test",V,B)}catch(t){U=!1}if(p){var F=[];N.leaksMemory=function(t){s.isFunction(t),F.push(t)};var H=function(){for(var t=0;t<F.length;t++)F[t]()};N.leaksMemory.remove=function(t){for(var e=F.length-1;e>=0;e--)t==F[e]&&F.splice(e,1)},window.attachEvent("onunload",H)}var K="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",Y="application/x-shockwave-flash",Z="application/x-java-vm";return{browser:C,version:a,isStrict:L,isQuirks:I,isOpera:m,isSafari:b,isWebKit:w,isChrome:v,isAndroid:x,isIPhone:y,isIPod:$,isIPad:k,isIOS:E,isWP7:T,isMobile:O,isNewIE:l,isEdge:g,isIE:h,isIE6:p,isIE7:f,isIE8:d,isFF:_,isCustomEvents:M,CustomEvent:z,engineIE:S,bugs:N,isWindows:D,isMac:R,isSecure:P,secureURL:t,hasFlash:function(){var t,e=c.plugins&&c.plugins[K];if(e)return t=c.mimeTypes&&c.mimeTypes[Y],t&&!t.enabledPlugin?null:e.description;if(window.ActiveXObject)try{return e=new window.ActiveXObject(W),e.AllowScriptAccess="always",e.GetVariable("$version")}catch(t){}}(),hasJava:function(){var t=c.mimeTypes;return h?!T&&"javaEnabled"in c&&c.javaEnabled():t&&(t=t[Z])&&(t=t.enabledPlugin)?t.name:void 0}(),language:j,getScrollbarSize:i,getWindowClientHeight:e,getWindowClientWidth:n,isTextContent:q,hasPassiveListeners:U}}var s=n(23),r=n(1),o=i();o.sniffBrowser=i,t.exports=o},function(t,e,n){function i(){if(window.$zopim&&window.$zopim.s)return window.$zopim.s.src;for(var t,e=document.getElementsByTagName("script"),n=/.*zopim.(com|net|org)\//,i=0,s=e.length;i<s;i++)if(t=e[i].src||"",n.test(t))return t;return""}function s(t){t&&!m.test(t)&&(t=null);var e="id."+(h.brandDomain||"zopim.com");return"https://"+(t||e)+"/authenticated/web/jwt"}function r(t){if(t){if(g.test(t))return t.replace(g,"$1.zopim.com$2");m.test(t)||(t=null)}var e="widget-mediator."+(h.brandDomain&&h.brandDomain.replace(/:[0-9]+/,"")||"zopim.com");return t||e}var o=n(1),a=n(4),c=n(2),u=n(46),l=n(21),h=function(){for(var t=i(),e=[/\/?[?]/,/\/livechat\//],n=[],s=0;s<e.length;s++)if(n=t.split(e[s]),n.length)break;var r=n[1],o=n[0],a=/^(https?:)?\/\/[^\/]+/.exec(o),c=o.replace(/^(https?:)?\/\//i,"").split("/")[0],u=c.replace(/(.+\.)(?=.+\..+)/,""),l=n[0].split("/");return l=l.pop()==c?n[0]:l.join("/"),a=a&&"zopim.com"!==c?a[0]:"https://v2.zopim.com",{accountKey:r,brandDomain:u,baseURL:l,rootURL:a}}(),d="https://v2.zopim.com/widget",f=d+"/images",p=u.map([".zopim.com",".zopim.org",".zdch.at",".zd-dev.com",".bre-zd.com"],l.escape),m=new RegExp("^[a-z][a-z0-9_-]*(\\.[a-z][a-z0-9_-]*)*("+p.join("|")+")(:\\d+)?$","i"),g=/^([a-z][a-z0-9_-]*)(:\d+)?$/i;o(a.baseURL,!0)&&(a.baseURL=c.secureURL(h.baseURL));var v={ASSETS_URL:d,IMAGES_URL:f,SOUNDS_URL:"https://v2.zopim.com/widget/sounds",FONTS_URL:"https://v2.zopim.com/widget/fonts",ASSETS_LEGACY:document.location.protocol+"//cdn.zopim.com/assets",BRANDING_URL:"https://www.zopim.com",AVATARS:{CONCIERGE:f+"/avatar_simple_agent.png",AGENT:f+"/avatar_simple_agent.png",VISITOR:f+"/avatar_simple_visitor.png",DEFAULT:f+"/avatar_simple_visitor.png"},ACCOUNT_KEY:h.accountKey,BRAND_DOMAIN:h.brandDomain,COUNTRY_CODE:function(){var t='\x3c!--# echo var="http_cf_ipcountry" default="geo" --\x3e'.toUpperCase();return"<"==t.charAt(0)&&(t="geo"),t}(),AUTH_URL:"https://www.zopim.com/auth/$NAME/$KEY-$MID",AUTH_LOGOUT_URL:"https://www.zopim.com/auth/logout/$KEY-$MID",AUTH_SERVER_URL:s(),IS_POPOUT:window.$zopim_popout,POPOUT_WINDOW_PREFIX:"zlivechatpopout_",POPOUT_URL:h.rootURL+"/widget/livechat.html",CALLBACK_FILE_UPLOAD_PATH:"/client/widget/upload",FILE_UPLOAD_PATH:"/client/widget/uploads",FILE_UPLOAD_MAX:20971520,RESEND_MSG_TIMEOUT:5e3,FILE_REPLACE_SOURCE:/^(\s*https?\:\/\/v2(?:assets|uploads)\.zopim\.)com(\/)/i,FILE_REPLACE_RESULT:"$1io$2",CHAT_LOG_REMEMBER_COUNT:10,getAuthServerURL:s,getMediatorHost:r};t.exports=v},function(t,e){var n={build_number:"20200423.075440",git_commit:"a2e84ec3fc0a7507e1dcc0cd9c0b4c7c6519e194",release_tag:"1.11.2"};t.exports=n},function(t,e){function n(t){return"function"==typeof t}t.exports=n},function(t,e,n){function i(t,e){for(var n,i=document.createElement("div"),s=0,r=N.length;s<r;s++)if(void 0!==i.style[N[s]]){n=e[s];break}return n?t?function(t,e,i){t.autobind(e,n,i)}:function(t,e,i){q&&t.autounbind(e,n,i)}:function(){}}function s(t,e){for(var n={},i=0,s=e.length;i<s;i++){var r=e[i];r in t&&(n[r]=t[r])}return n}function r(){for(var t,e,n=arguments.length,i=1,s=arguments[0]||{};i<n;i++)if(null!=(t=arguments[i]))for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&s!==t[e]&&(s[e]=t[e]);return s}function a(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]&&e[n].constructor&&e[n].constructor===Object?(t[n]=t[n]||{},a(t[n],e[n])):t[n]=e[n]);return t}function c(t,e){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(!(n in t))continue;e[n]&&e[n].constructor&&e[n].constructor===Object?c(t[n],e[n]):delete t[n]}return t}function u(){if(void 0===L)try{L=l()}catch(t){}return L}function l(){if(!window.getComputedStyle)return!1;var t=document.createElement("div"),e="border-box";document.body.appendChild(t),t.style.height="10px",t.style.padding="5px",t.style.boxSizing=e,t.style.webkitBoxSizing=e,t.style.mozBoxSizing=e;var n=parseInt(window.getComputedStyle(t).height,10);return document.body.removeChild(t),10!=n}function h(t){var e=t.getComputedStyle();if("auto"==e.height)return t.getHeight();var n=parseInt(e.height,10)||0;return z.computedHeightBoxSizingBug()&&(n+=(parseInt(e.paddingTop,10)||0)+(parseInt(e.paddingBottom,10)||0)+(parseInt(e.borderTopWidth,10)||0)+(parseInt(e.borderBottomWidth,10)||0)),n+"px"}function d(t){function e(){this.addClass("hover")}function n(){this.removeClass("hover")}I.bugs.noBoxSizing&&(t.on("mouseover",e),t.on("mouseout",n))}function f(t,e){for(var n,i=e.split(".");i.length;)n=i.shift(),A(t[n],!0)&&(t[n]={}),t=t[n];return t}function p(t,e){if(0===e.indexOf(t.path)){for(var n,i=t.path.split(".").length,s=e.split(".").slice(i),r=t.update;s.length;){if(n=s.shift(),!(n in r))return;r=r[n]}return r}}function m(t,e,n){t=t.split(".");var i=t.pop();if(i){for(var s=0,r=t.length;s<r;s++)t[s]in n||(n[t[s]]={}),n=n[t[s]];n[i]=e}}function g(t){for(var e=t.split("."),n="."+e.splice(e.length-2,2).join(".");e.length;){var i={domain:n,path:"/"};if(D.set("zte2095","1",i),"1"==D.get("zte2095")){D.remove("zte2095",i);break}n="."+e.pop()+n}return n}function v(t){return B.test(t)}function b(t){return U.test(t)}function w(t){if(t&&"object"==o(t)){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}}function _(t){if(window.Image)try{var e=new window.Image;e.onload=e.onerror=function(){t(!(1!=this.width||1!=this.height))},e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="}catch(e){t()}else t()}function y(t,e){t=parseInt(t,10),isNaN(t)&&(t=0);var n=t<0;t=Math.abs(t).toString().split("");for(var i=Math.max(e-t.length,0);i--;)t.unshift("0");return n&&t.unshift("-"),t.join("")}function $(t,e){function n(t,e,n){return n.replace("<hours>",t).replace("<minutes>",e)}var i=S("<hours>:<minutes>"),s=S("<hours>:<minutes> am"),r=S("<hours>:<minutes> pm"),o="24"===e?24:12,a=function(t,e){return t-Math[t>0?"floor":"ceil"](t/e)*e}(Math[t>0?"floor":"ceil"](t/60),o),c=z.pad(Math.abs(t)%60,2);if(24===o)return n(z.pad(a,2),c,i);var u=0===a?12:a;return Math.abs(t/60)%24<12?n(u,c,s):n(u,c,r)}function k(t){return t&&t.replace(R.FILE_REPLACE_SOURCE,R.FILE_REPLACE_RESULT)}function E(t,e){if(e=parseInt(e,10),!e)return t.getValue();var n=t.getKeys(),i=n.length,s={};if(i<=e)return t.getValue()||s;for(var r=0;r<i;r++)n[r]=parseInt(n[r],10);n=n.sort().slice(-e);var o,a=t.getValue();if(!a)return s;for(r=0,i=n.length;r<i;r++)o=n[r],s[o]=a[o];return s}function x(t,e){var n;t.leaf&&t.parentNode?(n={},n[t.name]=e,t.parentNode.write(n)):t.write(e)}function T(){if(I.isNewIE)try{"body"!==document.activeElement.nodeName.toLowerCase()&&document.activeElement.focus()}catch(t){}}function O(){window.console&&window.console.warn&&window.console.warn("The Zopim widget embed code is invalid. Please email chat@zendesk.com with your account key: "+R.ACCOUNT_KEY)}function C(t,e,n){return R.AUTH_URL.replace("$NAME",t).replace("$KEY",e).replace("$MID",n)}var L,I=n(2),A=n(1),S=n(11),D=n(16),R=n(3),P="-webkit- -moz- -o- -ms- ".split(" "),j="webkit Moz O ms ".split(" "),N=["transition","MozTransition","OTransition","WebkitTransition"],q=["transitionend","transitionend","otransitionend","webkitTransitionEnd"],M=["animationend","animationend","oanimationend","webkitAnimationEnd"],z={contains:function(){var t=document.documentElement;return t.compareDocumentPosition?function(t,e){return t=t.dom||t,e=e.dom||e,!!(16&t.compareDocumentPosition(e))}:t.contains?function(t,e){t=t.dom||t,e=e.dom||e;var n=9===t.nodeType?t.documentElement:t,i=e.parentNode;return t===i||!!(i&&1===i.nodeType&&n.contains&&n.contains(i))}:function(t,e){for(t=t.dom||t,e=e.dom||e;e=e.parentNode;)if(e===t)return!0;return!1}}(),onTransitionEnd:i(!0,q),unTransitionEnd:i(!1,q),onAnimationEnd:i(!0,M),unAnimationEnd:i(!1,M),css_prefixes:P,cssom_prefixes:j,isStyleSupported:function(){function t(t){for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=(t+" "+j.join(e+" ")+e).split(" "),s=0;s<i.length;s++)if(void 0!==n[i[s]])return!0;return!1}var e=document.createElement("div"),n=e.style;return t}(),pick:s,shallowExtend:r,fullyExtend:a,fullyDelete:c,computedHeightBoxSizingBug:u,getComputedHeight:h,hoverFix:d,getEffectiveTLD:g,descendsObj:f,insertObj:m,getValueByReference:p,isDefaultName:b,getKeys:w,supportsDataURI:_,isIE:function(){return I.isIE||/Trident\//.test(window.navigator.userAgent)}(),pad:y,formatMinutesAsHours:$,replaceFileHostname:k,getLastLogEntries:E,writeNode:x,isAgentNick:v,refocusActiveElement:T,warnBadEmbed:O,getAuthLoginUrl:C},U=/^Visitor [0-9]{3,}$/,B=/^agent:[0-9]+/i;t.exports=z},function(t,e){function n(t){return"[object Array]"==Object.prototype.toString.call(t)}t.exports=n},function(t,e,n){function i(t){return this instanceof i?t?i.parseQuery(t):void(this.store={}):(c||i._initSingleton(window),c)}function s(t,e,n){if(void 0===e&&void 0===n)return t;if(void 0===e&&(e="string"),!(e in a))throw"invalid type requested";return void 0===t?void 0!==n?n:a[e]:"boolean"===e?o.test(t):"integer"===e?!0===t?1:parseInt(t,10):"float"===e?!0===t?1:parseFloat(t):t}var r=n(7),o=/^(1|on|true)$/i,a={boolean:!1,integer:0,float:0,string:""},c=null;i._initSingleton=function(t){c=new i(t.location.search)},i.buildQuery=function(t){var e,n,i,s,o,a,c=[],u=[];for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&c.push(o);for(c.sort(),e=0,i=c.length;e<i;e++)if(o=c[e],a=t[o],o=window.encodeURIComponent(o),r(a))if(1!==a.length||!0!==a[0])for(n=0,s=a.length;n<s;n++)u.push(o+"="+window.encodeURIComponent(a[n]+""));else u.push(o);else u.push(o+"="+window.encodeURIComponent(a+""));return u.join("&")},i.parseQuery=function(t){var e,n,s=new i;t=t.replace(/^\?|\/+$/g,"");var r,o,a=t.split("&");for(e=0,n=a.length;e<n;e++){var c=a[e];if(c.length){var u=c.indexOf("=");u<=-1?(r=c,o=!0):(r=c.slice(0,u),o=window.decodeURIComponent(c.slice(u+1))),s.add(window.decodeURIComponent(r),o)}}return s},i.getHash=function(t,e){var n=e||window.location.hash;return i.parseQuery(n.replace(/^#/,"")).get(t)};var u=i.prototype;u.add=function(t,e){this.has(t)?this.store[t].push(e):this.store[t]=[e]},u.has=function(t){return Object.prototype.hasOwnProperty.call(this.store,t)},u.getLast=function(t,e,n){return this.has(t)?this.getAt(t,this.store[t].length-1,e,n):s(void 0,e,n)},u.getFirst=function(t,e,n){return this.getAt(t,0,e,n)},u.getAt=function(t,e,n,i){return s(this.has(t)?this.store[t][e]:void 0,n,i)},u.getRaw=function(t){return this.has(t)?this.store[t].concat():[]},u.get=u.getLast,u.toString=function(){return i.buildQuery(this.store)},t.exports=i},function(t,e,n){function i(t,e){if(!r(t))throw new TypeError("FunctionUtils.bind - what is trying to be bound is not callable");if(r(t.bind)&&!("prototype"in t.bind))return t.bind.apply(t,a.call(arguments,1));var n=a.call(arguments,2),i=function(){},s=function(){return t.apply(this instanceof i&&e?this:e,n.concat(a.call(arguments)))};return i.prototype=s.prototype,s.prototype=new i,s}function s(t){var e;return function(){if(!e)return e=!0,t.apply(this,a.call(arguments))}}var r=n(5),o={bind:i,once:s},a=Array.prototype.slice;t.exports=o},function(t,e,n){function i(t){return'"'+t.replace(d,s)+'"'}function s(t){return f[t]||"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}function r(t){switch(o(t)){case"string":return i(t);case"number":return isFinite(t)?t.toString():"null";case"boolean":return String(t);case"object":if(!t)return"null";var e,n,s=[];if(l(t)){for(e=0,n=t.length;e<n;e++)s[e]=r(t[e])||"null";return"["+s.join(",")+"]"}var a,c,u=[];for(a in t)t.hasOwnProperty(a)&&u.push(a);for(u.sort(),e=0,n=u.length;e<n;e++)a=u[e],c=r(t[a]),c&&s.push(i(a)+":"+c);if(s.length)return"{"+s.join(",")+"}"}}function a(t,e,n){return e?g[e]:String.fromCharCode(parseInt(n,16))}function c(t){var e,n,i,s,r,o=t.match(p),c=o.length,u=o[0];"{"==u?(e={},r=1):"["==u?(e=[],r=1):(e=[],r=0,n=!0);var l=[e];for(c=o.length;r<c;++r)switch(u=o[r],u.charCodeAt(0)){case 91:s=l[0],l.unshift(s[i||s.length]=[]),i=void 0;break;case 93:l.shift();break;case 123:s=l[0],l.unshift(s[i||s.length]={}),i=void 0;break;case 125:l.shift();break;case 102:s=l[0],s[i||s.length]=!1,i=void 0;break;case 110:s=l[0],s[i||s.length]=null,i=void 0;break;case 116:s=l[0],s[i||s.length]=!0,i=void 0;break;case 34:if(u=u.substring(1,u.length-1),-1!==u.indexOf(b)&&(u=u.replace(m,a)),s=l[0],void 0==i){if(!(s instanceof Array)){i=u||v;break}i=s.length}s[i]=u,i=void 0;break;default:s=l[0],s[i||s.length]=+u,i=void 0}if(n){if(1==l.length)return e[0]}else if(!l.length)return e;throw"error"}var u=n(1),l=n(7),h=!u(window)&&window.JSON||{parse:c,stringify:r},d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\",'"':'\\"'},p=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),m=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),g={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},v=new String(""),b="\\";t.exports=h},function(t,e,n){function i(t,e){if(isNaN(t)){var n=new s;return n.add("_",t),n}-1==t&&(t=w.length);var i=w[t];if(i||(w[t]=i=new s),"string"==typeof e)i.add("_",e);else for(var r in e)e.hasOwnProperty(r)&&i.add(r,e[r]);return i}function s(){function t(t,e){u[t]=e}function e(t){r(t,h)}function n(t){l.push(t)}function i(){return o()}function o(t){return u[t||_]||u._}function a(t){var e,n=o(t);for(e=0;e<l.length;e++)l[e](n)}function c(t,e){var n,i=new s;for(var r in w[u._]=i,u)if(u.hasOwnProperty(r)){if(n=u[r],"string"!=typeof n)continue;n=n[t].apply(n,e),i.add(r,n)}return i}for(var u={},l=[],h={add:t,bind:e,onTranslate:n,toJSON:i,toString:o,update:a},d=["concat","replace","toLowerCase","toUpperCase"],f=0;f<d.length;f++)h[d[f]]=function(t){return function(){return c(t,arguments)}}(d[f]);return h}function r(t,e){for(var n=0;n<y.length;n++)if(y[n]==t)return void($[n]=e);y.push(t),$.push(e)}function o(t){for(var e=0;e<y.length;e++)if(y[e]==t)return y.splice(e,1),void $.splice(e,1)}function a(t){t=t.split(/-|_/).slice(0,2);var e=t[0]=t[0].toLowerCase();return t[1]&&(t[1]=t[1].toUpperCase()),t=t.join("_"),g.languages?t in g.languages?t:e in g.languages?e:null:null}function c(t){var e,n,s,r,o,c;t=a(t),t&&(o=g.languages[t],o&&(c=v[g.languages[t]],c&&(i.language=_=t,b.ensureLoaded(c,(function(i){if(i&&u(t),t==_){for(e=0,n=w.length;e<n;e++)w[e].update instanceof Function&&w[e].update(t);for(e=0,n=y.length;e<n;e++)if(s=y[e],r=$[e].toString(),E)s.textContent=r;else if("string"==typeof s.innerText)s.innerText=r;else if("string"==typeof s.nodeValue)try{s.data=r}catch(t){}for(k._active=!0,n=k.length,e=0;e<n;e++)try{k[e]&&k[e](t)}catch(t){}if(k._active=!1,k._dirty){for(e=0;e<n;e++)k[e]||(e==n-1?k.pop():k[e--]=k.pop(),n--);k._dirty=!1}}})))))}function u(t){var e,n=v[g.languages[t]];for(e=0;e<n.length;e++)0!==n[e]&&w[e].add(t,n[e])}function l(t){k.push(t)}function h(t){for(var e=0,n=k.length;e<n;e++)if(k[e]==t){k._active?(k[e]=null,k._dirty=!0):e==n-1?k.pop():k[e]=k.pop();break}}function d(){return!(-1==_.search(x))}function f(t){return d()?t.replace(/left/,"%left%").replace(/right/,"left").replace(/%left%/,"right").replace(/ltr/,"%ltr%").replace(/rtl/,"ltr").replace(/%ltr%/,"rtl"):t}function p(){var t=g.strings;if(t)for(var e=0;e<t.length;e++)i(e,t[e])}var m=n(2),g=n(4),v=n(19),b=n(43),w=[],_="_",y=[],$=[],k=[],E=m.isTextContent,x=/^ar|^fa|^he|^ur/;i.bind=r,i.flip=f,i.onLanguage=l,i.unLanguage=h,i.update=c,i.unbind=o,i.rtl=d,i.findClosestLanguage=a,i.loadDefaultStrings=p,p(),t.exports=i},function(t,e){function n(t){return"string"==typeof t}t.exports=n},function(t,e,n){function i(t){p=t}function s(t){k=t?b.getAuthServerURL(t):b.AUTH_SERVER_URL}function r(t){d=t}function o(){return d}function a(t){f?+new Date-f.issued_at>=f.expires_in-6e4?w.authenticate((function(e){e?(p&&p.$("visitor").$("auth_status$string").update("failed"),t(e,null)):t(null,f.id_token)})):t(null,f.id_token):t(null,null)}function c(){d=void 0,f=void 0,p&&p.$("visitor").$("authenticated$bool").update(!1)}function u(){return!!f}function l(t){d&&d(g.once((function(e){e&&m(e)?w.exchangeToken({account_key:b.ACCOUNT_KEY,auth_url:k,site_jwt:e,state:f&&f.state?f.state:null},(function(e,n){f=n,p&&p.$("visitor").$("authenticated$bool").update(!e),t(e)})):t({reason:"invalid jwt in callback"})})))}function h(t,e){var n=new XMLHttpRequest;n.open("POST",t.auth_url,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.onload=function(){if(e){var t;try{var i=n.response;if(""===i)throw _;t=JSON.parse(i)}catch(t){return void e({reason:_})}200===n.status?e(void 0,{issued_at:+new Date,id_token:t.id_token,expires_in:1e3*t.expires_in,state:t.state}):e({reason:$,details:t.details})}},n.onerror=function(){e&&e({reason:y})};var i={account_key:t.account_key,token:t.site_jwt,format:"json"};t.state&&(i.state=t.state);var s=v.buildQuery(i);n.send(s)}var d,f,p,m=n(12),g=n(9),v=n(8),b=n(3),w={authenticate:l,isAuthenticated:u,getSiteJWTFunc:o,retrieveIDToken:a,clearIdentity:c,setOverrideHost:s,setSiteJWTFunc:r,setDataNode:i,exchangeToken:h},_="format error",y="network/security error",$="jwt verification error",k=b.AUTH_SERVER_URL;t.exports=w},function(t,e,n){function i(t){y.setActivityWindow(t),x=$.ACCOUNT_KEY,g=(t||window).location.hostname,v=/\b(?:\d{1,3}\.){3}\d{1,3}/.test(g)?g:k.getEffectiveTLD(g)}function s(){try{if($.IS_POPOUT)return y.get(C)||w().get("mid");var t=h();return t||y.get(O)||localStorage.getItem(O)||""}catch(t){return window[O]||""}}function r(t){try{y.set(O,t,{path:"/",ttl:365,domain:v}),localStorage.setItem(O,t)}catch(t){window[O]=t}}function o(){try{y.remove(O,{path:"/",domain:v}),localStorage.removeItem(O)}catch(t){window[O]=""}}function a(){var t=d();if("boolean"==typeof t)return t;var e=y.get(L);return e=parseInt(e,10),0!==e&&(1===e||void 0)}function c(){y.remove(L,{path:"/",domain:v})}function u(t){t=b(t),t=t?1:0,y.set(L,t,{path:"/",ttl:365,domain:v})}function l(){o(),_.remove(T)}function h(){var t=y.getJSONCookie("__zlcid");if(y.remove("__zlcid",{path:"/"}),t.mID)return t.mID;var e=f("__zlcstore");return y.remove("__zlcstore",{path:"/",domain:v}),e&&e.mID?e.mID:void 0}function d(){var t,e=f("__zlcprivacy");return"boolean"==typeof e&&(t=e,u(e)),t}function f(t){return y.getJSONCookie(t)[x]}function p(t,e){var n=_.get(T)||{};n[x]||(n[x]={});var i=n[x];i[t]=e,i.timestamp=+new Date,_.set(T,n)}function m(t){var e=_.get(T)||{};if(!e[x])return{};var n=e[x];return n.timestamp?+new Date-n.timestamp>E?{}:n[t]:n[t]||{}}var g,v,b=n(38),w=n(8),_=n(37),y=n(16),$=n(3),k=n(6),E=48e4,x=$.ACCOUNT_KEY,T="__zlcstore",O="__zlcmid",C="__zlcpomid",L="__zlcprivacy",I={init:i,DOM:{saveVariable:p,getVariable:m},Cookie:y,clearAll:l,setIdentity:r,getIdentity:s,clearIdentity:o,clearAllowCookieLaw:c,getAllowCookieLaw:a,setAllowCookieLaw:u};t.exports=I},function(t,e,n){function i(){var t=this;return this.arr=[],this.validate=_.bind(this.validate,this),k.concat(["validateAndThrow","validateAndLog"]).forEach((function(e){t.validate[e]=t[e].bind(t)})),this.validate}function s(t){return function(e){if(0===t.length)return!1;for(var n=0,i=t.length;n<i;n++)if(!(0,t[n])(e))return!1;return new b('Expect "'+e+'" to fulfill at least one condition',e)}}function r(t){return function(e){if(e!==t)return new b('expect "'+e+'" to equal "'+t+'"',e)}}function a(t,e){return function(n){if("object"!=o(n)||!n)return new b('Expect "'+n+'" to be an object',n);if(e&&e.requiredKeys)for(var i=0,s=e.requiredKeys.length;i<s;i++){var r=e.requiredKeys[i];if(!(r in n)){var a=new b('Expect key "'+r+'" to be defined',n);return a.unshiftPath(r)}}for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)){var u,l=n[c],h=t[c];if(h)u=h(l);else{if(e&&!e.whitelistedKeysOnly)continue;u=new b('The key "'+c+'" is not whitelisted',n)}if(u)return u.unshiftPath(c)}}}function c(t){return function(e){if(o(e)!==t)return new b('Expect "'+e+'" to have type "'+t+'"',e)}}function u(){return function(t){if(!t)return new b('Expect "'+t+'" to be truthty',t)}}function l(t){return function(e){if(t.lastIndex=0,!t.test(e))return new b('Expect "'+e+'" to match predefined format',e)}}function h(t){return function(e){if(e.length<t)return new b('Expect the length of "'+e+'" to be at least '+t,e)}}function d(t){return function(e){if(e.length>t)return new b('Expect the length of "'+e+'" to be at most '+t,e)}}function f(){return function(t){if(!w(t))return new b('Expect "'+t+'" to be an Array',t)}}function p(t){return function(e){var n;if(!w(e))return new b('Expect "'+e+'" to be an Array',e);for(var i=0,s=e.length;i<s;i++)if(n=t(e[i]),n)return n.unshiftPath(i)}}function m(t,e){return function(n){if(!t(n))return new b('Expect "'+n+'" to '+e,n)}}function g(t){return t}function v(t){var e=window.console;e.error?e.error(t):e.log&&e.log(t)}function b(t,e){this.message=t,this.actual=e,this.paths=void 0,this.unshiftPath=function(t){return this.paths||(this.paths=[]),this.paths.unshift(t),this}}var w=n(7),_=n(9),y=window.Error,$={any:s,equal:r,obj:a,type:c,ok:u,chain:g,regex:l,minLength:h,maxLength:d,array:f,each:p,predicate:m},k=Object.keys($),E=i.prototype;k.forEach((function(t){var e=$[t];i[t]=E[t]=function(){if(!(this instanceof i)){var n=new i;return n[t].apply(n,arguments)}var s=e.apply(null,arguments);return this.arr.push(s),this.validate}})),E.validate=function(t){for(var e,n,i=0,s=this.arr.length;i<s;i++)if(e=this.arr[i],n=e(t),n)return n},E.validateAndThrow=function(t,e){var n=this.validate(t);if(e=e?e+" - ":"",n)throw new y(e+n.message)},E.validateAndLog=function(t,e){var n=this.validate(t);if(e=e?e+" - ":"",n)return v(new y(e+n.message)),n},t.exports=i,b.prototype=Object.create(y.prototype),b.prototype.name="ValidationError"},function(t,e,n){function i(t){g=t||window,p=g.encodeURIComponent,m=g.decodeURIComponent}function s(t){return"string"==typeof t&&""!=t}function r(){var t,e,n,i,s=g.document.cookie,r={};if(!s||"string"!=typeof s)return{};for(s=s.split(/;\s/),t=s.length;t--;)try{if(e=s[t].match(/^([^=]+)(=(.*))?$/),!e)continue;n=m(e[1]),i=m(e[3]||""),r[n]=i}catch(t){}return r}function a(t){return s(t)&&r()[t]||null}function c(t){var e=a(t),n={};try{n=d.parse(e)}catch(t){}return n&&"object"==o(n)?n:{}}function u(t,e,n){n=n||{};var i=p(t)+"="+p(e);if("ttl"in n){var s=new Date,r=24*n.ttl*60*60*1e3;s.setTime(s.getTime()+r),i+="; expires="+s.toGMTString()}"path"in n&&(i+="; path="+n.path),"domain"in n&&(i+="; domain="+n.domain),n.secure&&(i+="; secure"),i+="; SameSite="+(n.samesite||"Lax"),g.document.cookie=i}function l(t,e,n){"object"!=o(e)&&(e={}),u(t,d.stringify(e),n)}function h(t,e){e=e||{},e.ttl=-1,u(t,"",e)}var d=n(10),f={set:u,get:a,getJSONCookie:c,setJSONCookie:l,remove:h,setActivityWindow:i},p=window.encodeURIComponent,m=window.decodeURIComponent,g=window;t.exports=f},function(t,e,n){function i(t,e,n){if(o.ok("function"==typeof t,"1st argument to nextTick must be a function"),n)for(var i=u.length;i-- >0;)if(u[i][0]===t&&u[i][1]===e)return;u.push([t,e]),r||(r=setTimeout(s,0))}function s(){var t=+new Date+c,e=u;u=[],r&&(r=clearTimeout(r));for(var n=0,i=e.length;n<i;n++){try{e[n][0].apply(e[n][1])}catch(t){a.fire("error",t)}if(+new Date>t){n<i-1&&(e.splice(0,n+1),u.length?u=e.concat(u):(u=e,r=setTimeout(s,0)));break}}}var r,o=n(23),a=n(0),c=100,u=[];i.tick=s,t.exports=i},function(t,e,n){function i(t){var e,n,i=r.extend(this);try{e=new window.ActiveXObject("htmlfile"),e.open(),e.write("<script>document.win = window<\/script>"),e.close(),n=e.win}catch(t){}if(!n){var s=this.iframe=document.createElement("iframe"),a=s.style;i.allowTransparency="true",i.frameBorder="0",a.backgroundColor="transparent",a.position="absolute",a.width=a.height="1px",a.left=a.top="-9999px",a.border=0,document.body.appendChild(s);try{n=s.contentWindow,e=n.document,e.open(),e.close()}catch(t){return i.fire("error"),void i.destroy()}}i.doc=e,i.win=n,i.$Loader={cleanup:function(){o((function(){i.$Loader.payload?i.fire("success",i.$Loader.payload):i.fire("error"),i.$Loader.payload=null,t||i.destroy()}))}},i.reusable=t}function s(t){return t&&t.replace(a,(function(t){return"&#"+t.charCodeAt(0)+";"}))}var r=n(0),o=n(17);i.prototype.setScope=function(t){this.scope=t};var a=/[&<>"']/g;i.prototype.load=function(t){if(/^(?:https?:)?\/\//i.test(t)){t=s(t);try{this.doc.open(),this.win.$Loader=this.$Loader,this.win.$Loader.scope=this.scope||{},this.doc.write('<html><head><script src="'+t+'"><\/script><script>document.addEventListener && document.addEventListener("DOMContentLoaded", function() {try { $Loader.cleanup() } catch(e) {}})<\/script></head><body></body></html>'),this.doc.close()}catch(t){this.$Loader.cleanup()}}else this.$Loader.cleanup()},i.prototype.destroy=function(){try{this.iframe&&document.body.removeChild(this.iframe),this.doc=this.win=this.iframe=this.win.$Loader=null}catch(t){}},t.exports=i},function(t,e,n){var i=n(4),s={};s.$Data=i,t.exports=s},function(t,e){function n(t,e){function n(){a=!a,t.apply(s,i)}var i,s,r,o,a=!0;return function(){if(i=Array.prototype.slice.call(arguments),s=this,a)return o=setTimeout((function(){a=!0}),e),n();o&&clearTimeout(o),r&&clearTimeout(r),r=setTimeout(n,e)}}function i(t,e){function n(){t.apply(s,i)}var i,s,r;return function(){r&&clearTimeout(r),i=Array.prototype.slice.call(arguments),s=this,r=setTimeout(n,e)}}function s(t,e){function n(){o=+new Date,r=null,t.apply(s,i)}var i,s,r,o=0;return function(){if(i=Array.prototype.slice.call(arguments),s=this,!r){var t=+new Date-o;t>=e?n():r=setTimeout(n,e-t)}}}function r(t,e){function n(){o=+new Date,i=s.length>1?setTimeout(n,e):null,t.apply(r.shift(),s.shift())}var i,s=[],r=[],o=0;return function(){if(s.push(Array.prototype.slice.call(arguments)),r.push(this),!i){var t=+new Date-o;t>=e?n():i=setTimeout(n,e-t)}}}var o={debounceExceptFirst:n,debounce:i,throttle:s,queue:r};t.exports=o},function(t,e){var n="[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+([a-z0-9][a-z0-9-]*[a-z0-9])",i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)",s={email:new RegExp("^"+n+"$","i"),ip_token:new RegExp("^"+i+"$"),ip:new RegExp("^(?:"+i+"\\.){3}"+i+"$"),tld:/^(AERO|ARPA|ASIA|A[CDEFGILMNOQRSTUWXZ]|BIZ|B[ABDEFGHIJMNORSTVWYZ]|CAT|COM|COOP|C[ACDFGHIKLMNORUVXYZ]|D[EJKMOZ]|EDU|E[CEGRSTU]|F[IJKMOR]|GOV|G[ABDEFGHILMNPQRSTUWY]|H[KMNRTU]|INFO|INT|I[DELMNOQRST]|JOBS|J[EMOP]|K[EGHIMNPRWYZ]|L[ABCIKRSTUVY]||MIL|MOBI|MUSEUM|M[ACDEGHKLMNOPQRSTUVWXYZ]|NAME|NET|N[ACEFGILOPRUZ]|ORG|OM|PRO|P[AEFGHKLMNRSTWY]|QA|R[EOSUW]|S[ABCDEGHIJKLMNORTUVYZ]|TEL|TRAVEL|T[CDFGHJKLMNOPRTVWZ]|U[AGKSYZ]|V[ACEGINU]|W[FS]|XN|Y[ET]|Z[AMW])$/i,search:{email:new RegExp(n,"ig"),email_lws:new RegExp("(^|\\s+)"+n,"ig"),hurl:/(^|\s+)(?:(?:https?|ftps?):\/\/)(?:\S+)/gi,url:/(^|\s+)(?:[\w-]+\.)+(\w{2,})(?::[0-9]+)?(?:\/\S*)?/g,phone_number:/(?:^|\s+)(?:(?:\+?\d{1,3}|\(\d{1,3}\))([-.\s])?)?\d{3,10}(?:([-.\s])\d{3,10})?/gi},escape:function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};t.exports=s},function(t,e){function n(t){return"number"==typeof t}t.exports=n},function(t,e,n){function i(t,e){t||r.log(e)}var s=n(5),r={ok:i,isFunction:function(t,e){i(s(t),e)},log:function(){}};t.exports=r},function(t,e){function n(t,e){c=t.$("connection"),u=e.$("tmp"),d=c.$("status$string"),f=c.$("socket_status$string"),p=c.$("disconnection_status$string"),m=c.$("socket_resume_timestamp$int"),g=c.$("socket_open_timestamp$int"),v=c.$("client_reattached_timestamp$int"),b=t.$("livechat").$("account").$("status$string"),w=t.$("visitor").$("auth_status$string"),c.bindValue(r)}function i(){c&&c.unbindValue(r)}function s(){i(),l=clearTimeout(l),c=u=null,d=f=p=m=g=v=b=w=null,h=void 0}function r(t){t&&"resume"==t.socket_status$string&&(l=setTimeout(r,1e3));var e=o();e&&e!==h&&(u.update({friendly_connection_status$string:e}),h=e)}function o(){var t=+new Date,e=d.getValue(),n=f.getValue(),i=p.getValue(),s=m.getValue(),r=g.getValue(),o=v.getValue();if((n||e||i)&&"disconnecting"!==i){if("break"==n){if(_.indexOf(e)>-1)return"closed";if("disconnected"===i)return"closed"}return(null===n||"reconnect"==n||"resume"==n&&t-s>=1e3)&&"reattached"===e&&r<=o?"connected":"connecting"}}function a(){var t=d.getValue(),e=b.getValue(),n=p.getValue(),i=w.getValue();return"banned"===e?"banned":"disconnected"===n?"failed"===i?"authentication_failed":"logged_out":"idle_disconnect"===t?"idle_disconnect":"error"===t||"shutdown"===t?"server_error":"unknown"}var c,u,l,h,d,f,p,m,g,v,b,w,_=["idle_disconnect","shutdown","error"],y={init:n,reset:s,destroy:i,getConnectionClosedReason:a};t.exports=y},function(t,e,n){function i(t,e){e=e||window,r=t.$("livechat").$("profile");var n={window:o.extend(e,!0),document:o.extend(e.document,!0)},i=a.throttle(s,u);n.document.on("mousemove",i),n.window.on("click",i),n.window.on("scroll",i),n.window.on("keypress",i),i()}function s(){r.write({active$int:+new Date})}var r,o=n(0),a=n(20),c={init:i},u=3e5;t.exports=c},function(t,e,n){var i=n(11),s={livechat:{timestamp$int:+new Date,settings:{file_sending:{enabled$bool:!0},behavior:{do_not_display$bool:!1},theme:{name$string:"simple",message_type$string:"bubble_avatar",colors:{placeholder$string:"_"},chat_button:{position$string:"br",position_mobile$string:"br"},chat_window:{position$string:"br",size$string:"medium",profile_card:{display_avatar$bool:!0,display_rating$bool:!0,display_title_name$bool:!0},use_banner$bool:!0,title_bar:{hide_minimize$bool:!1,hide_popout$bool:!1}},branding:{type$string:"icon_font_zopim"}},greetings:{online$string:i("Chat With Us"),offline$string:i("Leave a Message")},banner:{enabled$bool:!0,layout$string:"image_right",text$string:i("Chat with us"),image_path$string:"",image_data$string:""},chat_button:{hide_when_offline$bool:!1},chat_window:{mobile_mode$string:"popout",title_bar:{title$string:i("support"),status_messages:{online$string:i("We're online."),away$string:i("We're away."),offline$string:i("We're offline.")}}},login:{allowed_types:{email$bool:!0,facebook$bool:!0,twitter$bool:!1,google$bool:!0},phone_display$bool:!1,restrict_profile$bool:!1},concierge:{display_name$string:i("Live Support"),title$string:i("Ask us anything"),avatar_path$string:"",avatar_data$string:"",greeting:{enabled$bool:!1,message$string:i("Hi, welcome to our website!")}},branding:{hide_branding$bool:!1,hide_favicon$bool:!1,custom_favicon_path$string:""},language:{language$string:"--"},cookie_law:{enabled$bool:!1},sound:{disabled$bool:!1},popout:{enabled$bool:!0},rating:{enabled$bool:!0},end_chat_menu:{enabled$bool:!0,message$string:""},emoticons:{enabled$bool:!1},bubble:{enabled$bool:!0,title$string:i("Questions?"),text$string:i("Click here to chat with us")},forms:{pre_chat_form:{required$bool:!1,profile_required$bool:!1,message$string:"",form:{0:{name$string:"name",required$bool:0},1:{name$string:"email",required$bool:0},2:{label$string:i("Choose a department"),name$string:"department",required$bool:0,type$string:"department"},3:{label$string:i("Message"),name$string:"message",required$bool:0,type$string:"textarea"},4:{label$string:i("Phone"),name$string:"phone",required$bool:0,type$string:"text",hidden$bool:!0}}},offline_form:{message$string:i("Sorry, we aren't online at the moment. Leave a message and we'll get back to you."),message_disabled$string:i("Sorry, we aren't online at the moment."),post_submit_message$string:i("Thanks for the message! We'll get back to you as soon as we can."),profile_required$bool:!0,form:{0:{name$string:"name",required$bool:1},1:{name$string:"email",required$bool:1},2:{label$string:i("Message"),name$string:"message",required$bool:1,type$string:"textarea"},3:{label$string:i("Phone"),name$string:"phone",required$bool:0,type$string:"text",hidden$bool:!0}}},post_chat_form:{header$string:i("Nice chatting with you!"),message$string:i("How would you rate the chat experience you just had?"),comments_enabled$bool:!0,comments_messages:{good:{message$string:i("Thanks for the good rating! Would you like to leave a comment?"),placeholder$string:i("What did you like about this chat?")},bad:{message$string:i("Sorry that we disappointed you. We'd appreciate it if you could tell us how to improve."),placeholder$string:i("What did you dislike about this chat?")}}},card_form:{}}}}};t.exports=s},function(t,e){function n(t){"use strict";if(null==this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!=i?i=0:0!=i&&i!=1/0&&i!=-1/0&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var s=i>=0?i:Math.max(n-Math.abs(i),0);s<n;s++)if(s in e&&e[s]===t)return s;return-1}function i(t,e,n){return s.call(e,t,n)}var s=Array.prototype.indexOf;"function"==typeof s&&/\[native code\]/.test(s.toString())||(s=n),t.exports=i},function(t,e,n){var i=n(11),s=n(27),r=n(1),o=i("File size too large. Maximum limit is <size>."),a=i("The file you are trying to send is not supported."),c=i("File sending is temporarily disabled. Please try again later."),u=i("<size> bytes"),l=i("<size> KB"),h=i("<size> MB"),d={ERR_SIZE:"TOO_LARGE",ERR_FORMAT:"ILLEGAL_TYPE",ERR_DISABLED:"FILE_UPLOADS_TEMPORARILY_DISABLED"},f=/^(x-|vnd\.)/i,p=["png","jpg","jpeg","gif","txt","pdf"],m={},g=i("Failed to send. Please try again.");m[d.ERR_SIZE]=o,m[d.ERR_FORMAT]=a,m[d.ERR_DISABLED]=c,d.prettySize=function(){var t=[u,l,h],e=[0,1,2];return function(n,i){n=Math.max(parseInt(n,10)||0,0),i=i||{};for(var s,r=i.base2?1024:1e3,o=t.length;o--;)if(s=Math.pow(r,o),n>=s)return t[o].replace("<size>",(n/s).toFixed(e[o]))}}(),d.prettyType=function(t,e,n){n=n||window.Infinity;var i=t.split("/")[1];return i=i&&i.replace(f,""),i&&i.length<n?i.toLowerCase():(i=e.split(".").pop(),(i||"").toLowerCase())},d.isValidType=function(t,e){if(t){e=e||p;var n=t.substr(t.lastIndexOf(".")+1).toLowerCase();return-1!==s(n,e)}},d.prettyError=function(t,e){var n=t in m?m[t]:g;return r(e)||(n=n.replace("<size>",d.prettySize(e||5e6))),n},d.blobToFile=function(t,e,n){return t.lastModifiedDate=new Date,t.name=e,new window.File([t],e,{type:n})},d.getExtension=function(t){var e=t.lastIndexOf(".");return-1===e?null:t.substr(e+1).toLowerCase()},t.exports=d},function(t,e,n){function i(t,e){d=t,f=e,d.$("livechat").$("channel").$("department_id$int").on("value",(function(t){t&&(p=t)}))}function s(){p=void 0}function r(t,e,n){var i=parseInt(e,10)||parseInt(f.getServerTime().toFixed(0),10),s=i+"",r=d.$("livechat").$("profile"),o=p,a=(t.msg||"")+"";"department"in t&&(o=t.department),d.$("livechat").$("channel").$("log").$(s).write({timestamp$int:i,type$string:"chat.msg",msg$string:a,nick$string:r.$("nick$string").getValue()||"",display_name$string:r.$("display_name$string").getValue()||"",department_id$int:o,unverified$bool:!0,__client$bool:!0},n)}function o(t,e){var n=parseInt(e,10)||parseInt(f.getServerTime().toFixed(0),10),i=n+"";return d.$("livechat").$("channel").$("log").$(i).write({timestamp$int:n,nick$string:d.$("livechat").$("profile").$("nick$string").getValue()||"",display_name$string:d.$("livechat").$("profile").$("display_name$string").getValue()||"",type$string:"chat.file.upload",file_name$string:t.file_name||"",file_type$string:t.file_type||"",file_size$int:t.file_size||0,unverified$bool:!0,__client$bool:!0}),n}function a(t,e){function n(t){return"ok"!==t.raw.__status?e(new window.Error(h(t.raw.error))):t.raw.data&&"chat.file"===t.raw.data.type?void e(null,y.pick(t.raw.data,["mime_type","name","size","url","metadata"])):e(new window.Error("INTERNAL_ERROR"))}var i=E._validateAndPrepareData([t]);if(e=v.once(e),m(i))g((function(){e(new window.Error(i))}));else{var s=f.registerCallback(n),r="https://"+i.host+b.CALLBACK_FILE_UPLOAD_PATH,o={ts:parseInt(f.getServerTime().toFixed(0),10),__messageID:s,__socketID:f.getSocketID()},a={"X-Zopim-MID":i.mid,"X-Zopim-UID":i.uid},c={error:function(){e(new window.Error("CONN_ERROR"))},load:function(){if(200!==this.status){var t;try{t=JSON.parse(this.responseText)}catch(t){}e(t&&t.error?new window.Error(h(t.error)):new window.Error("INTERNAL_ERROR"))}}};E._uploadFiles(i.form_data,r,o,a,c)}}function c(t,e){var n=E._validateAndPrepareData(t);if(m(n))return n;var i=o({file_name:n.name,file_type:n.type,file_size:n.size},e),s="https://"+n.host+b.FILE_UPLOAD_PATH,r={ts:i},a={"X-Zopim-MID":n.mid,"X-Zopim-UID":n.uid};E._uploadFiles(n.form_data,s,r,a)}function u(t){if(!window.FormData)return"NOT_SUPPORTED";var e=d.$("livechat"),n=e.$("settings").$("file_sending"),i=e.$("settings").$("package"),s=n.$("enabled$bool").getValue(),r=(n.$("allowed_extensions$string").getValue()||"").trim().replace(/\s*,\s*/g,",").split(","),o=i.$("color_customization_enabled$int").getValue()||i.$("widget_customization_enabled$int").getValue(),a=e.$("profile").$("mid$string").getValue(),c=e.$("profile").$("uid$string").getValue(),u=f.getHost(),l=new window.FormData,h=[],p=[],m=0;if(!u)return"CONN_ERROR";if(!o)return"INVALID_PLAN";if(!s)return"NOT_ALLOWED";for(var g=0,v=t.length;g<v;g++){if(!w.isValidType(t[g].name,r))return"INVALID_EXTENSION";h.push(t[g].name),p.push(t[g].type),m+=t[g].size||0,l.append("file_"+t[g].name,t[g])}return m>b.FILE_UPLOAD_MAX?"EXCEED_SIZE_LIMIT":{form_data:l,name:h.join(", "),type:p.join(", "),size:m,host:u,mid:a,uid:c}}function l(t,e,n,i,s){var r=new window.XMLHttpRequest,o=e+(Object.keys(n).length?"?"+_.buildQuery(n):"");if(r.upload){for(var a in r.open("POST",o,!0),i)Object.prototype.hasOwnProperty.call(i,a)&&r.setRequestHeader(a,i[a]);for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&r.addEventListener(c,s[c]);r.send(t)}}function h(t){return k[t]||"UNKNOWN_ERROR"}var d,f,p,m=n(12),g=n(17),v=n(9),b=n(3),w=n(28),_=n(8),y=n(6),$={NOT_SUPPORTED:"NOT_SUPPORTED",NOT_ALLOWED:"NOT_ALLOWED",CONN_ERROR:"CONN_ERROR",INVALID_EXTENSION:"INVALID_EXTENSION",INVALID_PLAN:"INVALID_PLAN",EXCEED_SIZE_LIMIT:"EXCEED_SIZE_LIMIT",INTERNAL_ERROR:"INTERNAL_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},k={TOO_LARGE:"EXCEED_SIZE_LIMIT",ILLEGAL_TYPE:"INVALID_EXTENSION",NO_SESSION:"INTERNAL_ERROR",UNEXPECTED_ERROR:"INTERNAL_ERROR",UNABLE_TO_GET_SETTINGS:"INTERNAL_ERROR",S3_UPLOAD_ERROR:"INTERNAL_ERROR",NO_GATES:"INTERNAL_ERROR",FILE_UPLOADS_DISABLED:"NOT_ALLOWED",FILE_UPLOADS_TEMPORARILY_DISABLED:"INVALID_PLAN"},E={FILE_SENDING_ERRORS:$,init:i,sendChatMsg:r,sendFiles:c,sendFileWithCallback:a,clearChatDepartmentID:s,_validateAndPrepareData:u,_uploadFiles:l};t.exports=E},function(t,e){var n={SECOND:1e3};n.MINUTE=60*n.SECOND,n.HOUR=60*n.MINUTE,n.DAY=24*n.HOUR,n.WEEK=7*n.DAY,t.exports=n},function(t,e,n){function i(t){var e=this,n=this.longpoll=new o(!0),i=this.sender=new o(!0);n.on("success",(function(t){e.process_data(t)})),n.on("error",(function(){e.abort("longpoll error")})),i.on("success",(function(){e.ondrain&&e.ondrain()})),i.on("error",(function(){e.abort("sender error")})),this.url="https://"+t,s.window.on("unload",this.unload=function(){e.abort("unload")}),this.longpoll.load(this.url+["c",+new Date].join("/"))}var s=n(0),r=i;i.protocol="xdds";var o=n(18);i.prototype.process_data=function(t){t&&!this._abort&&(!this.ts&&this.onopen&&this.onopen(),this.ts=+new Date,this.onmessage&&this.onmessage(t,this.ts),this.longpoll&&this.longpoll.load(this.url+["p",+new Date].join("/")))},i.prototype.send=function(t){if(this._abort)return!1;var e=this.url+["d",+new Date,window.encodeURIComponent(t)].join("/");return this.sender&&this.sender.load(e),!1},i.prototype.abort=function(t){this._abort||(this._abort=!0,a("XDDS - abort: "+t),s.window.un("unload",this.unload),this.longpoll.destroy(),this.sender.destroy(),this.longpoll=this.sender=this.unload=null,this.onclose&&this.onclose(t),window.CollectGarbage&&window.CollectGarbage())};var a=function(){};t.exports=r},function(t,e){function n(t){var e,n=this;try{e=new i("wss://"+t+["c",+new Date].join("/"))}catch(t){}e&&(e.onclose=function(t){n.onclose&&n.onclose(t)},e.onerror=function(t){n.onerror&&n.onerror(t)},e.onmessage=function(t){n.onmessage&&n.onmessage(t.data,+new Date)},e.onopen=function(t){n.onopen&&n.onopen(t)},this.ws=e)}var i=window.WebSocket||window.MozWebSocket,s=i?n:null;n.prototype.abort=function(){if(this.ws&&!this._aborted){this._aborted=!0;var t=this.ws;t.readyState==i.CONNECTING?t.onopen=function(){t.close()}:t.close()}},n.prototype.send=function(t){return this.ws&&this.ws.send(t),!0},n.protocol="ws",t.exports=s},function(t,e,n){function i(t){function e(t){!r&&o.onopen&&o.onopen(),r=+new Date,t.origin==i&&("event-stream"==t.data?c.onload=null:o.onmessage&&o.onmessage(t.data,r))}var n,i,r,o=this,c=this.iframe=s("iframe");this.url="https://"+t,c.src=this.src=n=this.url+["c",+new Date].join("/"),i=n.match(/https?:\/\/[^\/]+/)[0],c.onload=function(t){o.abort(t)},document.body.insertBefore(c,document.body.firstChild),a("SPM connecting to: "+this.url),window.addEventListener("message",e,!1),this.remove_listeners=function(){window.removeEventListener("message",e,!1)}}function s(t){var e=document.createElement(t),n=e.style;return n.position="absolute",n.width=n.height=0,n.overflow="hidden",e}var r=n(2),o=window.postMessage?!r.isAndroid&&i:null;i.protocol="spm",i.prototype.send=function(t){return this.iframe.contentWindow.postMessage(t,this.src),!0},i.prototype.abort=function(t){this._abort||(this._abort=!0,a(t),this.iframe&&document.body.removeChild(this.iframe),this.onclose&&this.onclose(t),this.remove_listeners(),this.iframe=this.remove_listeners=null)};var a=function(){};t.exports=o},function(t,e,n){function i(t){function e(t){c("extracting data"),!n&&o.onopen&&o.onopen(),n=t,u+=i.responseText.substr(l),l=i.responseText.length,u=u.split("\n\n");for(var e=0;e<u.length-1;e++)o.onmessage&&o.onmessage(u[e],n);u=u[u.length-1],(l>1048576&&!u.length||l>4194304)&&o.abort()}var n,i=this.xhr=new r,o=this,u="",l=0;this.url=a+t,i.open("GET",this.url+["c",+new Date].join("/"),!0),i.onerror=function(t){o.abort(t)},s.isIE?(i.onprogress=function(){e(+new Date)},i.onload=function(){o.abort("close")}):i.onreadystatechange=function(){switch(i.readyState){case 3:e(+new Date);break;case 4:o.abort("close")}},c("CXHR connecting to: "+this.url),i.send()}var s=n(2),r=s.isIE?window.XDomainRequest:!s.isOpera&&!s.isAndroid&&window.XMLHttpRequest,o=r?i:null,a=s.isIE?"//":"https://";i.protocol="cxhr",i.prototype.send=function(t){function e(){c.abort("send failed")}function n(){c.xhr_sender=null,clearTimeout(i),c.ondrain&&c.ondrain()}var i,o=this.url+["d",+new Date].join("/"),a=new r,c=this;return a.open("POST",o,!0),a.send(t),s.isIE?(a.onerror=e,a.onload=n):a.onreadystatechange=function(){4==a.readyState&&(200!=a.status&&e(),n())},i=setTimeout(e,5e3),this.xhr_sender=a,!1},i.prototype.abort=function(t){this._abort||(this._abort=!0,c(t),this.xhr&&this.xhr.abort(),this.xhr_sender&&this.xhr_sender.abort(),this.onclose&&this.onclose(t),this.onerror=this.onload=this.onprogress=this.onreadystatechange=this.xhr=this.xhr_sender=null)};var c=function(){};t.exports=o},function(t,e,n){function i(t,e,n,s){for(var r in this.options=s=s||{},v)r in s||(s[r]=v[r]);if(!m&&!s.PREFERRED_PROVIDER)throw"No available transports";u.extend(this),this.provider=s.PREFERRED_PROVIDER||m,this.id=n||i.generateID(),this.host=t,this.ns=e,this.path="/"+["s",this.ns,this.provider.protocol,this.id].join("/"),this.url=this.host+this.path+"/",this.status=window.navigator&&!1===window.navigator.onLine?"offline":"connecting",this.connected=!1,this.quality=0,this.rtt=s.INITIAL_RTT,this.clock_skew=0,this.connect_attempts=0,this.connections=0,this.disconnects=0,this.sent_bytes=0,this.recv_bytes=0,this.sent_messages=0,this.recv_messages=0,this.sent_frames=0,this.recv_frames=0,this.lost_frames=0,this.ooo_frames=0,this.remote_seq=0,this.local_seq=0,this.timeout_server=0,this.timeout_response_soft=0,this.timeout_response_hard=0,this.bytes_at_connect=-1,this.time_last_alive=-1,this.time_last_open=-1,this.starttime=Date.now(),this.uptime=0,this.connected_time=new a,this.idle_time=new a,this.last_frame_time=0,this.raw_clock_skew=0,this.smooth_skewed_transit_time_in=0,this.remote_smooth_skewed_transit_time_out=0,this.cur_conn_recv_messages=0,this.drained=!0,this.buffer=[],this.glitch_timer=this.reconnect_timer=null,this.reconnect_delay=s.RECONNECT_DELAY_MS*(.2*Math.random()+.8),this.keep_alive_interval=15e3,this.data_packet_queue=new c(this);var o=this;this.onoffline=function(){i.prototype.onoffline.call(o)},this.ononline=function(){i.prototype.ononline.call(o)},u.window.on("offline",this.onoffline),u.window.on("online",this.ononline),"connecting"===this.status&&this.connect()}function s(){var t=_,e=new Date,n=e.getUTCFullYear()-2e3,i=e.getUTCMonth()+1,s=e.getUTCDate(),r=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),c=e.getUTCMilliseconds();return t[n]+t[i]+t[s]+t[r]+t[o]+t[a]+t[c>>6]+t[63&c]}function r(t){for(var e="",n=_;t-- >0;)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function o(t,e,n){return Math.min(n,Math.max(e,t))}function a(){this.count=0,this.sum=0,this.sq_sum=0,this.mean=0,this.stddev=0}function c(t){this.socket=t,this.queue=[],this.curFrame=null,this.curIdx=0,this.last_work_finished_time=0,this.work_timer=null,this.processing=!1}var u=n(0),l=n(10),h=n(34),d=n(33),f=n(32),p=n(31),m=f||h||d||p,g=p,v={INITIAL_RTT:1e3,RECONNECT_DELAY_MS:3e4,FAST_RECONNECT_MS:100,FLUSH_DELAY_MS:75,MAX_BLOCKING_TIME_MS:40,MAX_NO_WORK_TIME_MS:15,PREFERRED_PROVIDER:void 0};i.providers={},[h,d,f,p].forEach((function(t){t&&(i.providers[t.protocol]=t)})),i.available=function(){return!!m},i.generateID=function(){return r(16)},i.prototype.connect=function(t){if(this.debug("connect("+(t?"glitch":"")+")"),!this.reconnect_timer){var e=this,n=this.options,i=!this.connections||!this.cur_conn_recv_messages;!n.PREFERRED_PROVIDER&&i&&(this.provider=1&this.connect_attempts?g:m),this.response_timer=clearTimeout(this.response_timer),this.timeout_timer=clearTimeout(this.timeout_timer),this.socket&&(this.socket.onclose=this.socket.ondrain=this.socket.onerror=this.socket.onmessage=this.socket.onopen=null,this.socket.abort("connect"),this.socket=null),this.connected=!1,this.cur_conn_recv_messages=0,t&&(this.reconnect_delay=n.RECONNECT_DELAY_MS*(.2*Math.random()+.9),this.glitch_timer=setTimeout((function(){e.quality=0,e.glitch_timer=setTimeout((function(){e.status="reconnecting",e.fire_break()}),o(3*e.rtt,1e3,5e3))}),o(3*this.rtt,1e3,5e3))),this.debug("reconnect_delay: "+this.reconnect_delay),clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){e.reconnect_timer=null,e.reconnect_delay=Math.min(1.4*e.reconnect_delay+1e3,6e4),e.reconnect_delay*=.2*Math.random()+.9,e.connect()}),this.reconnect_delay),this.path="/"+["s",this.ns,this.provider.protocol,this.id].join("/"),this.url=this.host+this.path+"/",this.debug("connecting: "+this.url),this.socket=new this.provider(this.url),this.transport=this.provider.protocol,this.connect_attempts++,this.socket.onopen=function(){e.status="connected",e.glitch_timer=clearTimeout(e.glitch_timer),e.reconnect_timer=clearTimeout(e.reconnect_timer),e.connections++,e.drained=!0,e.connected=!0,e.time_last_open=e.time_last_alive=Date.now(),e.uptime>=0&&(e.uptime-=e.time_last_open),1==e.connections?e.fire("open"):e.fire_resume(),e.flush(),e.keep_alive(),e.debug("connected"),-1==e.bytes_at_connect&&setTimeout((function(){e.bytes_at_connect=e.recv_bytes}),50)},this.socket.onmessage=function(t,n){e.onmessage(t,n)},this.socket.onclose=function(t){e._onclose(t)},this.socket.ondrain=function(t){e._ondrain(t)},this.socket.onerror=function(t){e._onerror(t)}}},i.prototype.reconnect=function(){this.reconnect_timer=clearTimeout(this.reconnect_timer),this.broken_reason="FORCED_RECONNECT",this.connect()},i.prototype.send=function(t,e){"disconnected"!=this.status&&("null"==this.buffer[0]&&(this.buffer=[]),this.buffer.push(l.stringify(t)),this.schedule_flush(),e&&this.response_timeout())},i.prototype.close=function(t){this.debug("close()"),this.flush_scheduled=clearTimeout(this.flush_scheduled),this.keep_alive_timer=clearTimeout(this.keep_alive_timer),this.reconnect_timer=clearTimeout(this.reconnect_timer),this.response_timer=clearTimeout(this.response_timer),this.timeout_timer=clearTimeout(this.timeout_timer),this.broken_reason||(this.broken_reason="CLOSE"),this.fire_break(),this.status=t?"reconnecting":"disconnected",this.connected=!1,this.quality=0,this.socket&&(this.socket.onclose=this.socket.ondrain=this.socket.onerror=this.socket.onmessage=this.socket.onopen=null,this.socket.abort("close"),this.socket=null,t||(u.window.un("offline",this.onoffline),u.window.un("online",this.ononline)))},i.prototype.hibernate=function(){},i.prototype.onoffline=function(){this.debug("onoffline"),this.broken_reason="OFFLINE",this.close(!0)},i.prototype.ononline=function(){this.debug("ononline"),"disconnected"==this.status||this.connected||(this.reconnect_timer=clearTimeout(this.reconnect_timer),this.connect())},i.prototype.schedule_flush=function(){if("disconnected"!=this.status&&!this.flush_scheduled&&this.drained&&this.connected){var t=this,e=this.options;this.flush_scheduled=setTimeout((function(){t.flush()}),e.FLUSH_DELAY_MS)}},i.prototype.flush=function(){if("disconnected"!=this.status&&this.buffer.length&&this.drained&&this.connected){var t=this.buffer;this.sent_messages+=t.length,this.sent_frames++,t=this.generate_frame(t.join("\n")),this.drained=this.socket.send(t),this.sent_bytes+=t.length,this.flush_scheduled=clearTimeout(this.flush_scheduled),this.buffer=[],this.keep_alive(),this.time_last_alive=Date.now()}},i.prototype.keep_alive=function(){if("disconnected"!=this.status){clearTimeout(this.keep_alive_timer);var t=this;this.keep_alive_timer=setTimeout((function(){t.debug("pong!"),t.send(null)}),this.keep_alive_interval)}},i.prototype.response_timeout=function(){if(!this.response_timer){var t=this,e=o(4*this.rtt+this.options.FLUSH_DELAY_MS,2e3,2e4);this.response_timer=setTimeout((function(){t.timeout_response_soft++,t.debug("response timeout, "+e+"ms"),t.fire_break("SOFT_RESPONSE_TIMEOUT"),t.response_timer=setTimeout((function(){t.timeout_response_hard++,t.debug("response timeout - reconnecting"),t.broken_reason="HARD_RESPONSE_TIMEOUT",t.connect(!0)}),2*e)}),e)}},i.prototype.reset_server_timeout=function(){clearTimeout(this.timeout_timer);var t=this,e=4*this.keep_alive_interval+o(4*t.rtt,2e3,2e4);this.timeout_timer=setTimeout((function(){t.timeout_server++,t.debug("server "+e+"ms timeout, reconnecting"),t.broken_reason="SERVER_TIMEOUT",t.connect(!0)}),e)},i.prototype.fire_break=function(t){this.broken||this.fire("break",t||this.broken_reason),this.broken=!0,this.broken_reason="",this.uptime<0&&(this.uptime+=Date.now())},i.prototype.fire_resume=function(){this.broken_reason="",this.broken&&this.fire("resume"),this.broken=!1,this.uptime>=0&&(this.uptime-=Date.now())},i.prototype.onmessage=function(t,e){if(this.recv_bytes+=t.length,t=t.split("\n"),t.length<6)this.debug("Bad data: "+t.join("\n"));else{var n=Date.now(),i=+t[0],s=+t[1],r=+t[2],o=(t[3],t[4]);switch(this.calculate_clocks(e||Date.now(),i,s),this.reset_server_timeout(),o){case"a":this.broken_reason="ABORT",this.close();break;case"d":this.response_timer=clearTimeout(this.response_timer),this.fire_resume(),this.check_sequence(r),this.data_packet_queue.queueFrame(t,5,n);break;case"e":this.debug("server: Are you still there?"),this.send(null),this.flush();break;case"n":this.remote_seq=r,this.keep_alive_interval=+t[5]||15e3,this.debug("keep_alive is "+this.keep_alive_interval+"ms"),this.reset_server_timeout(),this.connections>1&&this.fire("reopen");break;case"p":this.debug("ping!")}}},i.prototype._onclose=function(){var t=this,e=this.options;0==this.connections&&0==this.disconnects&&this.fire("close"),this.debug("_onclose"),this.disconnects++,this.broken_reason="HANGUP",this.connected?(clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){t.reconnect_timer=null,t.connect(!0)}),e.FAST_RECONNECT_MS)):this.connections||1!=this.connect_attempts||(clearTimeout(this.reconnect_timer),this.reconnect_timer=setTimeout((function(){t.reconnect_timer=null,t.connect()}),0)),this.connected=!1,clearTimeout(this.keep_alive_timer),this.time_last_alive>0&&this.idle_time.add(Date.now()-this.time_last_alive),this.time_last_open>0&&this.connected_time.add(Date.now()-this.time_last_open),this.time_last_alive=this.time_last_open=-1,this.uptime<0&&(this.uptime+=Date.now())},i.prototype._ondrain=function(){this.drained=!0,this.flush()},i.prototype._onerror=function(t){this.debug("_error"),this.fire("error",t)},i.prototype.generate_frame=function(t,e){return[Date.now(),this.smooth_skewed_transit_time_in,++this.local_seq,this.remote_seq,e||"d",t].join("\n")};var b=Math.pow(50,.1),w=Math.pow(1e3,.1)-b;i.prototype.calculate_clocks=function(t,e,n){var i=t-e,s=Math.max(0,t-this.last_frame_time),r=1/(s/45e3+1);this.smooth_skewed_transit_time_in?this.smooth_skewed_transit_time_in=r*this.smooth_skewed_transit_time_in+(1-r)*i:this.smooth_skewed_transit_time_in=i,this.remote_smooth_skewed_transit_time_out=n,this.smooth_skewed_transit_time_in&&this.remote_smooth_skewed_transit_time_out&&(this.rtt=this.smooth_skewed_transit_time_in+this.remote_smooth_skewed_transit_time_out,this.quality=~~(100*(1-(Math.pow(this.rtt,.1)-b)/w)),this.quality=Math.min(100,Math.max(0,this.quality)),this.raw_clock_skew=i-this.rtt/2,this.clock_skew?this.clock_skew=.9*this.clock_skew+.1*this.raw_clock_skew:this.clock_skew=this.raw_clock_skew),this.time_last_alive=this.last_frame_time=t},i.prototype.check_sequence=function(t){if(this.remote_seq+1==t)this.remote_seq=t;else if(this.remote_seq<t){var e=t-this.remote_seq+1;this.lost_frames+=e,this.fire("lost",e),this.remote_seq=t}else this.ooo_frames++,this.fire("out_of_order")},m&&(i.prototype.transport=m.protocol),i.prototype.debug=function(){};var _="+-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";i.genDate=s,i.genID=r,a.prototype.add=function(t){this.count++,this.sum+=t,this.sq_sum+=t*t,this.mean=this.sum/this.count,this.stddev=Math.sqrt(this.sq_sum/this.count-this.mean*this.mean)};var y=c.prototype;y.queueFrame=function(t,e,n){this.queue.push({msgs:t,start_idx:e,receive_time:n}),this.process()},y.process=function(){var t=Date.now()-this.last_work_finished_time;this.processing&&t<this.socket.options.MAX_NO_WORK_TIME_MS||(this.work_timer=window.clearTimeout(this.work_timer),this.processing=!0,this.work())},y.work=function(){for(var t,e,n,i=Date.now()+this.socket.options.MAX_BLOCKING_TIME_MS,s=!1,r=this.socket.recv_frames,o=this,a=0;a<this.queue.length;a++){t=this.queue[a],"start_time"in t||(t.start_time=Date.now(),t.ticks=0,t.idx=t.start_idx),t.ticks++,e=t.msgs,n=e.length;for(;t.idx<n;){var c,u=Date.now();if(u>i){s=!0;break}this.socket.dispatch_delay=u-t.receive_time;try{c=l.parse(e[t.idx]),t.idx++}catch(n){this.socket.debug("Invalid json message: "+e[t.idx]);continue}this.socket.fire("message",c),this.socket.recv_messages++,this.socket.cur_conn_recv_messages++}if(t.idx>=n&&this.socket.recv_frames++,s)break}this.queue.splice(0,this.socket.recv_frames-r),this.queue.length?this.work_timer=window.setTimeout((function(){o.work()}),0):this.processing=!1,this.last_work_finished_time=Date.now()},t.exports=i},function(t,e){function n(t){return Date.now()-(t?t.clock_skew:0)}function i(t){return t?{connect_attempts:t.connect_attempts,connections:t.connections,disconnects:t.disconnects,timeout_server:t.timeout_server,timeout_response_soft:t.timeout_response_soft,timeout_response_hard:t.timeout_response_hard,sent_bytes:t.sent_bytes,recv_bytes:t.recv_bytes,sent_messages:t.sent_messages,recv_messages:t.recv_messages,sent_frames:t.sent_frames,recv_frames:t.recv_frames,lost_frames:t.lost_frames,ooo_frames:t.ooo_frames,bytes_at_connect:t.bytes_at_connect,rtt:t.rtt,clock_skew:t.clock_skew,reconnect_delay:t.reconnect_delay,quality:t.quality,host:t.host,status:t.status,last_frame_time:t.last_frame_time,local_time:Date.now()}:{status:"not connected"}}var s={getServerTime:n,getConnectionStats:i};t.exports=s},function(t,e,n){function i(t){return function(){try{var e=Array.prototype.slice.call(arguments,0);e.unshift(r),h.appendChild(r),r.addBehavior("#default#userData"),r.load(l);var n=t.apply(a,e);return h.removeChild(r),n}catch(t){}}}function s(t){return t.replace(f,"___")}var r,o=n(10),a={},c=window,u=c.document,l="localStorage";if(a.disabled=!1,a.set=function(){},a.get=function(){},a.remove=function(){},a.clear=function(){},a.transact=function(t,e,n){var i=a.get(t);null==n&&(n=e,e=null),void 0===i&&(i=e||{}),n(i),a.set(t,i)},a.getAll=function(){},a.serialize=function(t){return o.stringify(t)},a.deserialize=function(t){if("string"==typeof t)try{return o.parse(t)}catch(e){return t||void 0}},function(){try{return l in c&&c[l]}catch(t){return!1}}())r=c[l],a.set=function(t,e){return void 0===e?a.remove(t):(r.setItem(t,a.serialize(e)),e)},a.get=function(t){return a.deserialize(r.getItem(t))},a.remove=function(t){r.removeItem(t)},a.clear=function(){r.clear()},a.getAll=function(){for(var t={},e=0;e<r.length;++e){var n=r.key(e);t[n]=a.get(n)}return t};else if(u.documentElement.addBehavior){var h,d;try{d=new window.ActiveXObject("htmlfile"),d.open(),d.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),d.close(),h=d.w.frames[0].document,r=h.createElement("div")}catch(t){r=u.createElement("div"),h=u.body}var f=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");a.set=i((function(t,e,n){return e=s(e),void 0===n?a.remove(e):(t.setAttribute(e,a.serialize(n)),t.save(l),n)})),a.get=i((function(t,e){return e=s(e),a.deserialize(t.getAttribute(e))})),a.remove=i((function(t,e){e=s(e),t.removeAttribute(e),t.save(l)})),a.clear=i((function(t){var e=t.XMLDocument.documentElement.attributes;t.load(l);for(var n,i=0;n=e[i];i++)t.removeAttribute(n.name);t.save(l)})),a.getAll=i((function(t){for(var e,n=t.XMLDocument.documentElement.attributes,i={},r=0;e=n[r];++r){var o=s(e.name);i[e.name]=a.deserialize(t.getAttribute(o))}return i}))}try{a.set("__storejs__","__storejs__"),"__storejs__"!=a.get("__storejs__")&&(a.disabled=!0),a.remove("__storejs__")}catch(t){a.disabled=!0}a.enabled=!a.disabled;var p=a;t.exports=p},function(t,e){function n(t){return!!t&&"false"!=t}t.exports=n},function(t,e,n){function i(t){it=t.isCookieDenied,Y=dt.getMediatorHost(t.overrideProxy),st=t.source,rt=t.source_ver,ot=t.gd_compatible,V=t.activity_window||window,F=V.document,H=t.root,X=H.$("tmp").$("api_settings"),G=H.$("tmp").$("server_settings"),Q=H.$("livechat").$("settings").$("cached$bool"),K=H.$("connection"),J=K.$("server_retired$bool"),et=K.$("server_ready$bool"),et.bindValue(c),J.bindValue(a),Z=H.$("livechat").$("ui").$("mockup$bool").getValue(),Z?K.$("status$string").update("reattached"):(H.$("livechat").$("profile").bindValue(o),K.$("status$string").bindValue(r),K.$("socket_status$string").bindValue(O),H.bindWrite(R),K.$("reconnect$bool").bindValue(g),window.__z_sdk?U=!0:(U=!1,"visibilityState"in document&&"prerender"==document.visibilityState?document.addEventListener("visibilitychange",s):Tt.connect()))}function s(){"prerender"!=document.visibilityState&&(document.removeEventListener("visibilitychange",s),Tt.connect())}function r(t){if(_t="reattached"==t,_t&&(K.update({client_reattached_timestamp$int:+new Date}),R()),_t&&!1===U&&C(),"idle_disconnect"==t||"shutdown"==t||"error"==t){var e=H.$("livechat").$("account").$("status$string").getValue(),n=H.$("connection").$("backoff"),i=n.$("active$int").getValue()||0,s=n.$("max_seconds$int").getValue();"invalid_account_key"==e?mt.warnBadEmbed():"widget_v2"==st&&"shutdown"==t&&i&&s&&p(s),d()}O()}function o(t){t&&(it()||dt.IS_POPOUT||t.mid$string&&ft.setIdentity(t.mid$string))}function a(t){tt=!0===t}function c(t){nt=!1!==t,nt&&(kt=!1,u())}function u(){for(var t=0,e=$t.length;t<e;t++){var n=$t[t];ct(n)&&n()}$t=[]}function l(t){!nt||tt?(K.update({server_ready$bool:!1}),$t.push(t),kt||(kt=!0,W.reconnect())):t()}function h(t){W&&W.send(t)}function d(t){W&&W.close(),B=!t,W=null}function f(){window.clearTimeout(Tt.reconnectTimer),d(!0),Tt.connect()}function p(t){window.clearTimeout(Tt.reconnectTimer),Tt.reconnectTimer=window.setTimeout((function(){Tt.reconnect()}),1e3*t)}function m(){K.update({status$string:"idle_disconnect"})}function g(t){t&&Tt.reconnect()}function v(t){return at||new vt(t,"W",null,wt)}function b(){W||B||(W=v(Y),W.on("break",y),W.on("message",_),W.on("reopen",k),W.on("resume",$),W.on("open",w))}function w(){Z||(K.update({socket_open_timestamp$int:+new Date,socket_status$string:null,disconnection_status$string:null}),x())}function _(t){if(t){if(t.raw&&t.raw.__messageID in xt){var e=xt[t.raw.__messageID];delete xt[t.raw.__messageID],e(t)}var n=H;if("update"in t){var i=mt.getValueByReference(t,"livechat.account");i&&(G.$("account").update(i),mt.fullyExtend(i,X.getValue("account")));var s=mt.getValueByReference(t,"livechat.settings");s&&(G.$("settings").update(s),mt.fullyExtend(s,X.getValue("settings")));var r=mt.getValueByReference(t,"livechat.profile.mid$string");r&&r!==ft.getIdentity()&&(H.$("livechat").$("channel").update(null),H.$("livechat").$("profile").update(null),H.$("livechat").$("ui").$("chat_button").$("unread_count$int").update(0)),t.path&&(n=n.descend(t.path)),n.update(t.update),Tt.fire("message",t)}}}function y(){K.update({socket_status$string:"break"})}function $(){K.update({socket_resume_timestamp$int:+new Date,socket_status$string:"resume"})}function k(){K.update({socket_open_timestamp$int:+new Date,socket_status$string:"reconnect"}),_t=!1,x()}function E(){var t=ft.getIdentity(),e=it(),n=H.$("livechat").$("ui").getValue("mobile$bool")?"mobile":"desktop",i=H.$("livechat").$("settings").$("theme").getValue("name$string"),s={__type:"register",accountKey:dt.ACCOUNT_KEY,mID:t,ua:V.navigator.userAgent,dt:n,theme:i,cookie_law:e,rev:ut.git_commit,source:st,source_ver:rt,country_code:dt.COUNTRY_CODE,multisession:!0,gd_compatible:ot};H.$("livechat").$("ui").$("popout$bool").getValue()?s.popout=!0:(s.title=F.title,s.url=V.location.href,s.ref=V.document.referrer);var r=Tt._register;if(r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=r[o]);return s}function x(){if(dt.ACCOUNT_KEY){var t=E();pt.retrieveIDToken((function(e,n){e?M():(n&&(delete t.mID,t.idt=n),h(t))}))}}function T(){return!!Q.getValue()}function O(){var t=K.getValue("status$string"),e=K.getValue("socket_status$string");if(window.clearTimeout(L.timer),"error"!=t)if("break"==e)"idle_disconnect"==t?K.update({message$string:"idle_disconnect"}):(K.update({message$string:"reconnecting"}),L.timer=window.setTimeout(L,6e4));else if(null===e&&"registered"==t)K.update({message$string:"resuming"});else if(lt(t)&&lt(e)){var n=T()?"fast_init":"first_init";K.update({message$string:n})}else K.update({message$string:null});else L.timer=window.setTimeout(L,5e3)}function C(){W&&H.$("livechat").$("profile").write({disconnect_timeout$int:j(W.rtt)})}function L(){K.update({message$string:"disconnected"})}function I(){return gt.getConnectionStats(W)}function A(){return Y}function S(){return gt.getServerTime(W)}function D(t){return Et+=1,xt[Et]=t,Et}function R(t){if(t){var e={};e.path=t.path,e.value=t.value,ct(t.func)&&(e.__messageID=D(t.func)),yt.push(e)}if(W&&_t)for(;yt.length;)W.send(yt.shift())}function P(t){return t?G.getValue(t):G.getValue()}function j(t){var e,n,i=10*bt.SECOND,s=1*bt.SECOND,r=120*bt.SECOND,o=20*bt.SECOND;return t=Math.round(t)||0,t=Math.max(s,Math.min(t,i)),e=(t-s)/(i-s),n=o+function(t){return t}(e)*(r-o),Math.floor(n/1e3)}function N(t){at=t}function q(){return W?W.id:null}function M(){K.update({disconnection_status$string:"disconnecting"}),d(),L.timer=clearTimeout(L.timer),K.update({disconnection_status$string:"disconnected"})}function z(){et.unbindValue(c),J.unbindValue(a),H.$("livechat").$("profile").unbindValue(o),K.$("status$string").unbindValue(r),K.$("socket_status$string").unbindValue(O),K.$("reconnect$bool").unbindValue(g),M(),_t=!1,yt=[],$t=[],kt=!1,Et=0,xt={},U=B=H=K=W=Z=X=G=Q=J=tt=et=nt=it=st=rt=ot=at=null}var U,B,V,F,H,K,W,Y,Z,X,G,Q,J,tt,et,nt,it,st,rt,ot,at,ct=n(5),ut=n(4),lt=n(1),ht=n(0),dt=n(3),ft=n(14),pt=n(13),mt=n(6),gt=n(36),vt=n(35),bt=n(30),wt={FLUSH_DELAY_MS:0,RECONNECT_DELAY_MS:1e4},_t=!1,yt=[],$t=[],kt=!1,Et=0,xt={},Tt=ht.extend({init:i,send:h,connect:b,reconnect:f,clientDisconnect:M,destroy:z,disconnect:m,getConnectionStats:I,getHost:A,getServerTime:S,getServerSettings:P,reconnectIfServerRetired:l,registerCallback:D,getSocketID:q,getDCTimeoutValue:j,setSocket:N,reset:z});t.exports=Tt},function(t,e,n){function i(t){var e=t.type,n=u[e];if(!n)return e?new Error(e+" type is not supported. Please upgrade the Web SDK version."):new Error('Structured message object should contain "type" property');var i=n(t);if(i){var s=i.paths&&"type"===i.paths.pop(),r=s&&i.actual?i.actual+" type is not supported. Please upgrade the Web SDK version.":i.message;return new Error(r)}}var s=n(15),r={QUICK_REPLIES:"QUICK_REPLIES",BUTTON_TEMPLATE:"BUTTON_TEMPLATE",PANEL_TEMPLATE:"PANEL_TEMPLATE",PANEL_TEMPLATE_CAROUSEL:"PANEL_TEMPLATE_CAROUSEL",LIST_TEMPLATE:"LIST_TEMPLATE"},o={QUICK_REPLY_ACTION:"QUICK_REPLY_ACTION",LINK_ACTION:"LINK_ACTION"},a=s.obj({text:s.type("string"),action:s.obj({type:s.any([s.equal(o.QUICK_REPLY_ACTION),s.equal(o.LINK_ACTION)]),value:s.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["text","action"],whitelistedKeysOnly:!0}),c=s.obj({type:s.equal(r.PANEL_TEMPLATE),panel:s.obj({heading:s.type("string"),paragraph:s.type("string"),image_url:s.type("string"),action:s.obj({type:s.equal(o.LINK_ACTION),value:s.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["heading"],whitelistedKeysOnly:!0}),buttons:s.each(a)},{requiredKeys:["type","panel"],whitelistedKeysOnly:!0}),u={QUICK_REPLIES:s.obj({type:s.equal(r.QUICK_REPLIES),msg:s.type("string"),quick_replies:s.each(s.obj({text:s.type("string"),action:s.obj({type:s.equal(o.QUICK_REPLY_ACTION),value:s.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["text","action"],whitelistedKeysOnly:!0}))},{requiredKeys:["type","msg","quick_replies"],whitelistedKeysOnly:!0}),BUTTON_TEMPLATE:s.obj({type:s.equal(r.BUTTON_TEMPLATE),msg:s.type("string"),buttons:s.each(a)},{requiredKeys:["type","msg","buttons"],whitelistedKeysOnly:!0}),PANEL_TEMPLATE:c,PANEL_TEMPLATE_CAROUSEL:s.obj({type:s.equal(r.PANEL_TEMPLATE_CAROUSEL),items:s.each(c).minLength(2).maxLength(10)},{requiredKeys:["type","items"],whitelistedKeysOnly:!0}),LIST_TEMPLATE:s.obj({type:s.equal(r.LIST_TEMPLATE),items:s.each(s.obj({heading:s.type("string"),paragraph:s.type("string"),image_url:s.type("string"),action:s.obj({type:s.equal(o.LINK_ACTION),value:s.type("string")},{requiredKeys:["type","value"],whitelistedKeysOnly:!0})},{requiredKeys:["heading","paragraph","action"],whitelistedKeysOnly:!0})),buttons:s.each(a)},{requiredKeys:["type","items"],whitelistedKeysOnly:!0})},l={validate:i,STRUCTURED_MSG_VALIDATOR:u,STRUCTURED_MSG_TYPE:r};t.exports=l},function(t,e,n){function i(t,e){if(!s(e.interval)||!s(e.limit))throw new Error("requires numeric interval and limit");if(e.callback&&!r(e.callback))throw new Error("requires callback to be a function");return function(){var n=Date.now();if(e.start>n-e.interval){if(e.count||(e.count=0),e.count++,e.count>e.limit)return void(e.callback&&e.callback())}else e.start=n,e.count=1;return t.apply(this,arguments)}}var s=n(22),r=n(5),o={rateLimit:i};t.exports=o},function(t,e,n){function i(t,e,n){var i=this;s.extend(i);var o=new r;e=e||{},o.setScope(e),o.on("success",n),o.on("error",(function(t){i.onError(t)})),o.load(t)}var s=n(0),r=n(18);i.prototype.onError=function(t){},t.exports=i},function(t,e,n){function i(t,e){var n=a[t];n.module_function=new Function("$Modules",e.toString().replace(h,"$1")),n.ready()}function s(t){var e,n,i,s;for(e=l.length-1;e>=0;e--){for(i=l[e],s=i.dependencies,n=s.length-1;n>=0;n--)if(s[n]==t){s.splice(n,1);break}i.ready()}}function r(){var t=Array.prototype.slice.call(arguments),e=t.shift();this.fqname=e,this.name=e.split(".").pop(),this.callbacks=[],this.dependencies=t,l.push(this)}function o(t){t()}var a=n(19),c=n(4),u=n(42),l=[],h=/^function *\( *\) *{ *([\s\S]*) *}$/;r.ensureLoaded=function(t,e){t instanceof r?t.ensureLoaded(e):e()},r.prototype.ensureLoaded=function(t){this.ifLoaded(t),this.load()},r.prototype.ifLoaded=function(t){this.callbacks.push(t)},r.prototype.load=function(){function t(t){i(t[0],t[1])}var e,n,s=this.getDependencies();for(e=0;e<s.length;e++)n=s[e],n.loader||(n.loader=new u(c.baseURL+"/lib/"+c.build_number+"/"+n.fqname+".js",a,t))},r.prototype.getDependencies=function(){var t,e=this.dependencies,n=[this];for(t=0;t<e.length;t++){var i=a[e[t]];n=n.concat(i.getDependencies())}return n},r.prototype.ready=function(){if(!this.dependencies.length&&this.module_function){for(t=l.length-1;t>=0;t--)if(l[t]==this){l.splice(t,1);break}this.module_function(a);var t,e=a[this.fqname];for(e.ifLoaded=e.ensureLoaded=o,t=0;t<this.callbacks.length;t++)this.callbacks[t](e);s(this.fqname),delete this.callbacks,delete this.fqname,delete this.name,delete this.dependencies,delete this.loader}},a.Module=r,t.exports=r},function(t,e){function n(t){return window[t]}var i={getVariable:n};t.exports=i},function(t,e,n){function i(){var t=s.getVariable("navigator"),e=t.userAgent||"",n=t.vendor||"",i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i,r=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,o=e||n||window.opera;return i.test(o)||r.test(o.substr(0,4))}var s=n(44);t.exports=i},function(t,e,n){function i(t,e){return e?o(t,e):s(t)}function s(t){for(var e,n,i=t.length;i>1;)e=Math.floor(i--*Math.random()),n=t[e],t[e]=t[i],t[i]=n;return t}function r(t,e){if(!t||t.length<=0)return-1;if(!e)return Math.floor(Math.random()*t.length);e=a(t,e);var n,i=0;for(n=e.length;n--;)i+=e[n];var s=Math.random()*i,r=0,o=e.length;for(n=0;n<o-1;n++)if(r+=e[n],s<=r)return n;return n}function o(t,e){var n,i,s,r,o,c=t.concat();for(e=a(t,e),t.length=0,o=0,n=e.length;n--;)o+=e[n];for(s=Math.random()*o,r=0,n=0;c.length;)r+=e[n],s<=r?(o-=e[n],i=c.splice(n,1)[0],e.splice(n,1),t.push(i),s=Math.random()*o,r=0,n=0):n++;return t}function a(t,e){if(u(e)){if(e.length===t.length)return e.concat();throw new window.Error("Invalid weights array: length does not match")}if(l(e))return c(t,e);throw new window.Error("Invalid weights supplied")}function c(t,e,n){var i,s,r;if(!u(t))throw new TypeError(" arr is not an array");var o=Object(t),a=o.length>>>0;if(!l(e))throw new TypeError(e+" is not a function");for(arguments.length>2&&(i=n),s=new Array(a),r=0;r<a;){var c,h;r in o&&(c=o[r],h=e.call(i,c,r,o),s[r]=h),r++}return s}var u=n(7),l=n(5),h={shuffle:i,random_index:r,map:c};t.exports=h},function(t,e){function n(t,e){this.name=t,this.leaf=/\$[a-z]+$/.test(t),this.parentNode=e,this.leaf||(this.deleted=!1,this.childNodes={},this.keys={})}function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t){for(var e="",n=0;n<t.length;n++)/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(t[n])?e+="."+t[n]:e+="["+JSON.stringify(t[n])+"]";return e.substr(1)}n.prototype.fqname=function(){return s(this.path())},n.prototype.path=function(){for(var t=this,e=[this.name];t=t.parentNode;)e.unshift(t.name);return e},n.prototype._getOrCreateChildNode=function(t){var e;return i(this.childNodes,t)?e=this.childNodes[t]:(e=new n(t,this),this.childNodes[t]=e,this.deleted&&e.undeleteParents()),e},n.prototype.descend=function(t){var e,n,i=this;for("string"==typeof t&&(t=t.split(".")),e=0,n=t.length;e<n;e++)i=i._getOrCreateChildNode(t[e]);return i},n.prototype.$$=n.prototype.descend,n.prototype.$=function(t,e,n,i,s,r,o,a,c){var u=this._getOrCreateChildNode(t);return e?u.$(e,n,i,s,r,o,a,c):u},n.prototype.update=function(t,e){var n,i,s,r,o;if(null!=t&&this.undeleteParents(),this.leaf)this.value!==t&&(this.value=t,r=!0,this.notifyListeners(t,e));else if(null==t){if(!this.deleted){for(n in r=null,this.deleted=!0,this.childNodes)this.childNodes[n].update(null,!0);this.notifyListeners(r,e)}}else{if(this.deleted)for(n in this.deleted=!1,r=t,t)this.$(n).update(t[n],!0);else for(n in t)s=this.$(n),i=t[n],s.leaf?s.update(i,!0)&&(r||(r={}),r[n]=i):void 0!==(o=s.update(i,!0))&&(r||(r={}),r[n]=o);r&&this.notifyListeners(r,e)}return r},n.prototype.replace=function(t,e){var n,s,r,o,a;if(null!=t&&this.undeleteParents(),this.leaf)this.value!==t&&(this.value=t,o=!0,this.notifyListeners(t,e));else if(null==t){if(!this.deleted){for(n in o=null,this.deleted=!0,this.childNodes)this.childNodes[n].replace(null,!0);this.notifyListeners(o,e)}}else{if(this.deleted)for(n in this.deleted=!1,o=t,t)this.$(n).replace(t[n],!0);else{for(n in this.childNodes)i(t,n)||(r=this.childNodes[n],r.leaf?r.replace(null,!0)&&(o||(o={}),o[n]=null):void 0!==(a=r.replace(null,!0))&&(o||(o={}),o[n]=null));for(n in t)r=this.$(n),s=t[n],r.leaf?r.replace(s,!0)&&(o||(o={}),o[n]=s):void 0!==(a=r.replace(s,!0))&&(o||(o={}),o[n]=a)}o&&this.notifyListeners(o,e)}return o},n.prototype.undeleteParents=function(){for(var t=this.parentNode;t&&t.deleted;)t.deleted=!1,t=t.parentNode},n.prototype.write=function(t,e,n){"function"==typeof e&&(n=e,e=!1);var i={path:this.path(),value:t};"function"==typeof n&&(i.func=n),this.update(t,e||!1);for(var s=this;s.parentNode;)s=s.parentNode;s.notifyWriteListeners(i)},n.prototype.bindWrite=function(t){this.getWriteListeners().push(t)},n.prototype.getValueListeners=function(){return this.listeners_value||(this.listeners_value=[]),this.listeners_value},n.prototype.getWriteListeners=function(){return this.listeners_write||(this.listeners_write=[]),this.listeners_write},n.prototype.getKeysListeners=function(){return this.listeners_keys||(this.listeners_keys=[]),this.listeners_keys},n.prototype.bindValue=function(t){var e=this.getValueListeners();e.push(t);try{t.call(this,this.getValue())}catch(t){}},n.prototype.bindKeys=function(t){if(!this.leaf){var e=this.getKeysListeners();e.push(t);try{t.call(this,this.getKeys(),[])}catch(t){}}},n.prototype.unbindValue=function(t){for(var e=this.getValueListeners(),n=0;n<e.length;n++)if(e[n]==t)return void e.splice(n,1)},n.prototype.unbindKeys=function(t){if(!this.leaf)for(var e=this.getKeysListeners(),n=0;n<e.length;n++)if(e[n]==t)return void e.splice(n,1)},n.prototype.on=function(t,e){switch(t){case"value":this.bindValue(e);break;case"keys":this.bindKeys(e)}},n.prototype.un=function(t,e){switch(t){case"value":this.unbindValue(e);break;case"keys":this.unbindKeys(e)}},n.prototype.notifyListeners=function(t,e){var n,s,r,o;if(!this.leaf)if(t)for(n in t)null!=t[n]?i(this.keys,n)||(this.keys[n]=1,s||(s=[]),s.push(n)):i(this.keys,n)&&(delete this.keys[n],r||(r=[]),r.push(n));else for(n in this.keys)delete this.keys[n],r||(r=[]),r.push(n);if(this.listeners_value){o=this.getValueListeners().concat();for(var a=0,c=o.length;a<c;a++)try{o[a](t)}catch(t){}}if(!this.leaf){if(this.listeners_keys&&(s||r))for(o=this.getKeysListeners().concat(),a=0,c=o.length;a<c;a++)try{o[a](s||[],r||[])}catch(t){}if(!e&&this.parentNode){var u={};u[this.name]=t,this.parentNode.notifyListeners(u,e)}}},n.prototype.notifyWriteListeners=function(t){if(this.listeners_write)for(var e=this.getWriteListeners().concat(),n=0;n<e.length;n++)try{e[n].call(this,t)}catch(t){}},n.prototype.getValue=function(t){if(t)return this.descend(t).getValue();if(this.leaf)return this.value;if(this.deleted)return null;var e,n,i={};for(var s in this.childNodes)null!=(n=this.childNodes[s].getValue())&&(i[s]=n,e=!0);return e?i:null},n.prototype.hasKey=function(t){return i(this.keys,t)},n.prototype.getKeys=function(){if(this.leaf)return null;var t=[];for(var e in this.keys)t.push(e);return t},n.prototype.gc=function(){if(this.leaf)throw new TypeError("Leaf nodes cannot be collected");var t=!0;for(var e in this.childNodes){var n=this.childNodes[e];t=n.leaf?!(n.listeners_value&&n.listeners_value.length)&&null==n.value&&(delete this.keys[e],delete this.childNodes[e])&&t:n.gc()&&(delete this.keys[e],delete this.childNodes[e])&&t}return t&&this.deleted&&!(this.listeners_keys&&this.listeners_keys.length)&&!(this.listeners_value&&this.listeners_value.length)},n.DataNode=n,t.exports=n},function(t,e){var n=function(t,e){return t===e||t&&e&&"object"==o(t)&&"object"==o(e)&&i(t,e)},i=function(t,e){var i;for(i in t)if(!n(t[i],e[i]))return!1;for(i in e)if(!n(t[i],e[i]))return!1;return!0},s=function t(e){if("object"!=o(e)||!e)return e;var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=t(e[i]));return n},r=function(t){if(t)for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];if(i)for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])}return t},a={equal:n,clone:s,extend:r};t.exports=a},function(t,e,n){function i(t){dt([ue],[t],"logout")||(Yt.isAuthenticated()?s(t):ht(new Error("This API is only applicable for authenticated visitors"),"logout"))}function s(t){$t.destroy(),c(),Yt.clearIdentity(),Zt.clearIdentity(),te=!1,t&&setTimeout((function(){t(null)}))}function r(t){if(xt&&ee.un("data",xt),xt=function(t){Jt.fire(t.type,t.detail)},ee.on("data",xt),te)ht(new Error("Zendesk Chat Web SDK has already been initialized. Please ensure that zChat.init() is only called once in your code"),"init");else if(Ct.isIE<=10)ht(new Error("The current browser you are on is not supported by the Web SDK. Please refer to the documentation to learn about the system requirements for Zendesk Chat."),"init");else{var e=se.obj({account_key:se.type("string").ok(),suppress_console_error:se.type("boolean"),override_auth_server_host:se.type("string").ok(),override_proxy:se.type("string").ok(),authentication:se.obj({jwt_fn:se.type("function").ok()},{requiredKeys:["jwt_fn"]}),activity_window:se.type("object").chain(he),popout:se.type("boolean")},{requiredKeys:["account_key"]});if(!dt([e],[t],"init")){var n=new jt("root"),i=new jt("root"),s={livechat:{settings:Pt.clone(Wt.livechat.settings)}};n.update(s),i.update(s),zt()&&n.$("livechat").$("ui").$("mobile$bool").update(!0),Mt.ACCOUNT_KEY=t.account_key,t.authentication?(Yt.setOverrideHost(t.override_auth_server_host),Yt.setSiteJWTFunc(t.authentication.jwt_fn),Yt.setDataNode(n),Yt.authenticate((function(e){e?ht(new Error("Failed to verify token: "+e.reason+(e.details?": "+e.details:"")),"init",{reason:e.reason,details:e.details}):a(t,Ht,n,i)}))):a(t,Ht,n,i)}}}function a(t,e,n,i){switch($t=e,kt=n,Et=i,Gt.init(kt,Et),nt(),Tt=function(t){(t.path?Et.descend(t.path):Et).update(t.update)},$t.on("message",Tt),Ot=t.suppress_console_error||!1,Zt.init(t.activity_window),Zt.DOM.getVariable("account_status")){case"invalid_account_key":Ut.warnBadEmbed();case"banned":return}$t.init({root:kt,overrideProxy:t.override_proxy,isCookieDenied:function(){return!1},source:ne,lastHost:Zt.DOM.getVariable("web_sdk_last_host"),source_ver:Lt.release_tag,activity_window:t.activity_window,gd_compatible:1}),kt.$("connection").$("server$string").bindValue((function(t){t&&Zt.DOM.saveVariable("web_sdk_last_host",t)})),Et.$("livechat").$("account").$("status$string").bindValue((function(t){t&&Zt.DOM.saveVariable("account_status",t)})),Kt.init(kt,$t),Xt.init(kt,t.activity_window),te=!0}function c(){ee.un("data",xt),Gt.destroy(),$t.un("message",Tt),xt=null,Tt=null,Ot=void 0}function u(){$t.reconnect()}function l(){"invalid_account_key"!==Zt.DOM.getVariable("account_status")?"closed"===Jt.getConnectionStatus()?fe():ht(new Error("Call has been ignored due to invalid connection status"),"reconnect"):Ut.warnBadEmbed()}function h(){return ee}function d(){return we(Et.$("livechat").$("profile").getValue())}function f(t,e){if(!dt([se.obj({display_name:se.any([se.equal(""),se.type("string").regex(ae).maxLength(255)]),email:se.any([se.equal(""),se.type("string").regex(Nt.email)]),phone:ce}),ue],[t,e],"setVisitorInfo")){var n={};e=e||ie,"display_name"in t&&(n.display_name$string=t.display_name),"email"in t&&(n.email$string=t.email),"phone"in t&&(n.phone$string=t.phone),kt.$("livechat").$("profile").write(n,mt(e))}}function p(t,e){dt([se.type("string").regex(ae),ue],[t,e],"sendChatMsg")||(e=e||ie,Kt.sendChatMsg({msg:t.trim()},null,mt(e)))}function m(t,e){dt([se.chain(ft),ue],[t,e],"sendFile")||g(t,e)}function g(t,e){e=e||ie,Ht.reconnectIfServerRetired((function(){Kt.sendFileWithCallback(t,e)}))}function v(t){var e=se.type("number"),n=Et.$("livechat");if(!dt([e],[t],"getDepartment"))return n.$("account").$("departments_migrated$bool").getValue()&&n.$("dg_mappings").hasKey(t),b(t)}function b(t){var e=Et.$("livechat"),n=e.$("departments").$(t).getValue();if(e.$("account").$("departments_migrated$bool").getValue()){if(n&&e.$("dg_mappings").hasKey(t)){var i=e.$("dg_mappings").$(t).$("group_id$int").getValue();return _e(n,i)}!n&&e.$("groups").hasKey(t)&&(n=e.$("groups").$(t).getValue())}return n?_e(n,t):void 0}function w(){var t={},e=Et.$("livechat");return t=e.$("account").$("departments_migrated$bool").getValue()?e.$("groups").getValue():e.$("departments").getValue(),ot(t,_e)}function _(){var t=Et.$("livechat").$("profile").$("department_id$int"),e=t.getValue();return At(e)?e:void 0}function y(t,e){dt([se.type("number").chain(pt),ue],[t,e],"setVisitorDefaultDepartment")||(e=e||ie,kt.$("livechat").$("profile").write({department_id$int:t},mt(e)))}function $(t){dt([ue],[t],"clearVisitorDefaultDepartment")||(t=t||ie,kt.$("livechat").$("profile").write({department_id$int:null},mt(t)))}function k(t,e){x("added$string",t,"addTag",e)}function E(t,e){x("removed$string",t,"removeTag",e)}function x(t,e,n,i){if(!dt([se.type("string").regex(ae).chain(le),ue],[e,i],n)){i=i||ie;var s={};s[t]=e.trim(),kt.$("livechat").$("channel").$("tags").write(s,mt(i))}}function T(t,e){C("added$string",t,"addTags",e)}function O(t,e){C("removed$string",t,"removeTags",e)}function C(t,e,n,i){if(!dt([se.each(se.type("string").regex(ae).chain(le)).minLength(1),ue],[e,i],n)){i=i||ie;for(var s=0,r=e.length;s<r;s++)e[s]=e[s].trim();var o={};o[t]=e.join(","),kt.$("livechat").$("channel").$("tags").write(o,mt(i))}}function L(t,e){dt([se.obj({title:se.type("string").regex(ae),url:se.type("string").regex(oe)},{requiredKeys:["title","url"]}),ue],[t,e],"sendVisitorPath")||(e=e||ie,kt.$("livechat").$("session").$("page_path").write({url$string:t.url,title$string:t.title},mt(e)))}function I(){var t=Et.$("livechat").$("channel").$("rating$string").getValue(),e=Et.$("livechat").$("channel").$("comment$string").getValue(),n={};return St(t)||(n.rating=t),St(e)||(n.comment=e),n}function A(t,e){dt([se.any([se.equal(null),se.equal("good"),se.equal("bad")]),ue],[t,e],"sendChatRating")||(e=e||ie,kt.$("livechat").$("channel").write({rating$string:t},mt(e)))}function S(t,e){dt([se.type("string"),ue],[t,e],"sendChatComment")||(e=e||ie,kt.$("livechat").$("channel").write({comment$string:t},mt(e)))}function D(t,e){var n=se.obj({clear_dept_id_on_chat_ended:se.type("boolean")}),i=kt.$("livechat").$("channel");"function"==typeof t?(e=t,t={}):void 0===t&&(t={}),dt([n,ue],[t,e],"endChat")||(e=e||ie,i.write({chatting$bool:!1},mt(e)),t.clear_dept_id_on_chat_ended&&Kt.clearChatDepartmentID())}function R(){return Et.$("livechat").$("channel").$("chatting$bool").getValue()||!1}function P(){return ot(Et.$("livechat").$("agents").getValue(),ye)}function j(t){return ye(Et.$("livechat").$("agents").$(t).getValue(),t)}function N(){var t=Et.$("livechat"),e=t.$("settings"),n=e.$("operating_hours");if(e.hasKey("operating_hours")){var i=n.$("type$string").getValue(),s={enabled:n.$("enabled$bool").getValue(),type:i,timezone:e.$("timezone$string").getValue()||"UTC"};if("account"==i)s.account_schedule=gt(n.$("schedule").getValue()||{});else if("department"==i){var r=t.$("dg_mappings").getValue(),o=vt(n.$("schedules").getValue(),t.$("departments").getKeys());t.$("account").$("departments_migrated$bool").getValue()&&r&&(o=Object.keys(o).reduce((function(t,e){return e in r?t[r[e].group_id$int]=o[e]:t[e]=o[e],t}),{})),s.department_schedule=o}return s}}function q(t,e){if(!dt([se.obj({name:se.type("string").regex(ae).maxLength(255),email:se.type("string").regex(Nt.email),message:se.type("string").regex(ae),phone:ce},{requiredKeys:["name","email","message"]}),ue],[t,e],"sendOfflineMsg")){e=e||ie;var n={name:{name$string:"name",value$string:t.name},email:{name$string:"email",value$string:t.email},message:{name$string:"message",value$string:t.message}};"phone"in t&&(n.phone={name$string:"phone",value$string:t.phone}),"department"in t&&(n.department={name$string:"department_id",value$string:t.department}),kt.$("livechat").$("settings").$("forms").$("offline_form").$("form_submitted").write(n,mt(e))}}function M(t){var e=kt.$("livechat").$("channel").$("typing"),n=e.$("typing$bool").getValue(),i=se.type("boolean");n!==t&&(dt([i],[t],"sendTyping")||e.write({typing$bool:t}))}function z(t,e){var n=se.type("string").regex(Nt.email),i=!!Et.$("livechat").$("channel").$("log").getKeys().length;dt([n,ue],[t,e],"sendEmailTranscript")||(e=e||ie,Et.$("livechat").$("channel").$("chatting$bool").getValue()?kt.$("livechat").$("channel").write({email_transcript$string:t},mt(e)):Yt.isAuthenticated()||i?kt.$("livechat").$("channel").write({email_last_transcript$string:t},mt(e)):ht(new Error("There were no past chat to send a transcript of"),"sendEmailTranscript"))}function U(t,e){return{id:parseInt(e,10)}}function B(t){return Object.prototype.hasOwnProperty.call(t,"typing$bool")?{type:"typing"}:null}function V(t){var e=Object.prototype.hasOwnProperty.call(t,"typing$bool"),n={type:"typing",nick:"agent:trigger"};return e?n:null}function F(t){return Object.prototype.hasOwnProperty.call(t,"timestamp$int")?{type:"last_read"}:null}function H(t){return 0===t.indexOf("visitor:")?"visitor":t}function K(t){if(!t.type$string)return null;if(!t.nick$string)return null;var e={nick:H(t.nick$string),type:t.type$string},n=t.msg$string;switch(t.first$bool&&(e.first=t.first$bool),t.type$string){case"chat.msg":if("attachment"in t){if(!0===t.unverified$bool)return null;var i,s=t.attachment,r={mime_type:s.mime_type$string,name:s.name$string,size:s.size$int,url:s.url$string};return"metadata"in s&&(i=s.metadata,r.metadata={width:i.width$int,height:i.height$int}),"deleted$bool"in s&&(r.deleted=s.deleted$bool),Pt.extend(e,{type:"chat.file",display_name:t.display_name$string,attachment:r})}if("structured_msg"in t){var o=lt(t.structured_msg);_t(o,["items","buttons","quick_replies"]);var a=Ft.validate(o);a?ht(a,'Unsupported structured message in "chat.msg" event'):e.structured_msg=o}return Pt.extend(e,{display_name:t.display_name$string,msg:n,options:t.options$string?t.options$string.split("/"):[]});case"chat.rating":return Pt.extend(e,{display_name:t.display_name$string,new_rating:t.new_rating$string,rating:t.rating$string});case"chat.comment":return Pt.extend(e,{display_name:t.display_name$string,comment:t.comment$string,new_comment:t.new_comment$string});case"chat.memberleave":return Pt.extend(e,{display_name:t.display_name$string});case"chat.memberjoin":case"chat.request.rating":return Pt.extend(e,{display_name:t.display_name$string});case"chat.event":var c,u=/Please wait while our agents attend to you. There are currently (\d+) visitor\(s\) waiting to be served\./;return"agent:system"===t.nick$string&&(c=u.exec(n))?{type:"chat.wait_queue",nick:"system.queue",wait_queue:parseInt(c[1],10)}:null;case"chat.join":var l=t.history;if(l&&l[0]){var h=Pt.extend({},l[0]),d=h.timestamp$int;return h.type$string=h.__type$string,h.display_name$string=h.name$string,d*=1e3,h.timestamp$int=d,K(h)}return null;case"chat.file.update":default:return null}}function W(){var t,e,n,i=["type$string","timestamp$int"],s=Et.$("livechat").$("channel").$("log").getValue(),r=[];for(var o in s)if(Object.prototype.hasOwnProperty.call(s,o)){if(s[o].type$string)t=s[o];else if(t=kt.$("livechat").$("channel").$("log").$(o).getValue(),"chat.msg"===t.type$string&&(!0===t.unverified$bool||!0===t.failed$bool))continue;var a=K(t);if(null===a)continue;for(var c=0;c<i.length;c++)e=i[c],n=ut(e),n in a||(a[n]=t[e]);r.push(a)}return r}function Y(){if(!Et)return"closed";var t=Et.$("tmp").$("friendly_connection_status$string").getValue();return ve(t)[0]}function Z(){var t=Et.$("livechat").$("account").$("status$string").getValue();return be(t)[0]}function X(){return Et.$("livechat").$("channel").$("queue_position$int").getValue()||0}function G(t){if(!dt([ue],[t],"fetchChatHistory"))if(Yt.isAuthenticated()){var e=Et.$("livechat").$("history"),n=kt.$("livechat").$("history"),i=n.$("in_progress$bool").getValue(),s=e.$("has_more$bool").getValue(),r=e.$("cursor$string").getValue();i?ht(new Error("Previous fetching of history is still in progress"),"fetchChatHistory"):!1!==s?(t=t||ie,n.$("in_progress$bool").update(!0),n.write({cursor$string:r||""},mt(t))):ht(new Error("No more history to load"),"fetchChatHistory")}else ht(new Error("This API is not available for unauthenticated visitors"),"fetchChatHistory")}function Q(){R()&&kt.$("livechat").$("ui").$("chat").write({read_ts$int:+new Date})}function J(t,e,n){return function(i,s){if(null===i)return{};for(var r={},o=0,a=t.length;o<a;o++){var c=t[o];c in i&&(r[ut(c)]=i[c])}if(Dt(e)&&Object.keys(r).length&&(r[e]=s),Rt(n)){var u=n(i,s);return null===u?{}:Pt.extend(r,u)}return r}}function tt(t,e,n){Et.descend(e).bindValue((function(e){n(e).forEach((function(e){et(t,e)}))}))}function et(t,e){if(e){if(e instanceof Error){if(!e.message)return}else if("object"==o(e)&&!Object.keys(e).length)return;ee.fire("data",{type:t,detail:e})}}function nt(){tt("connection_update","tmp.friendly_connection_status$string",ve),tt("account_status","livechat.account.status$string",st(ge)),tt("visitor_update","livechat.profile",at(["email$string","phone$string","display_name$string"],d)),tt("department_update","livechat.departments",ct(["name$string","status$string"],b)),tt("agent_update","livechat.agents",ct(["avatar_path$string","display_name$string","title$string"],j)),tt("chat","livechat.channel.log",rt(Ee)),tt("chat","livechat.agents",rt($e)),tt("chat","livechat.triggers.agents",rt(ke)),tt("chat","livechat.channel.queue_position$int",it),tt("history","livechat.history.log",rt(Ee)),tt("chat","livechat.channel.last_read",rt(xe))}function it(t){return["number"!=typeof t?null:{type:"chat.queue_position",nick:"system.queue",queue_position:t}]}function st(t){return function(e){return void 0===e?[null]:[t[e]||null]}}function rt(t){return function(e){return ot(e,t)}}function ot(t,e){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(e(t[i],i));return n}function at(t,e){return function(n){return t.some((function(t){return n&&t in n}))?[e()]:[null]}}function ct(t,e){return function(n){var i=[];for(var s in n)if(Object.prototype.hasOwnProperty.call(n,s)){var r=n[s],o=t.some((function(t){return r&&t in r}));o&&i.push(e(s))}return i}}function ut(t){return t.split("$")[0]}function lt(t){if(!t||"object"!=o(t))return t;var e={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=ut(n),s=lt(t[n]);e[i]=s}return e}function ht(t,e,n){var i=e?e+": ":"";t=new Error("Zendesk Chat Web SDK: Error: "+i+t.message),t.context=e,t.extra=n,Ot||window.console&&window.console.error,et("error",t)}function dt(t,e,n){for(var i=0;i<t.length;i++){var s=t[i],r=s(e[i]);if(r)return ht(r,n),!0}return!1}function ft(t){if("[object File]"!==Object.prototype.toString.call(t))return new Error("Expect a File object")}function pt(t){if(!v(t))return new Error("Expect a valid department id")}function mt(t){return function(e){var n=e.raw,i="ok"===n.__status?null:new window.Error("Failed");for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&0===s.indexOf("__")&&delete n[s];t(i,n)}}function gt(t){for(var e,n,i={},s=0;s<7;s++){var r=t[s]||{};if(r.enabled$bool){for(var o in e=[],n=r.periods,n)Object.prototype.hasOwnProperty.call(n,o)&&e.push({start:n[o].start$int,end:n[o].end$int});i[s]=yt(e)}else i[s]=[]}return i}function vt(t,e){var n,i={},s=wt(t),r=bt(t,e);return e.forEach((function(t){var e=r[t];for(i[t]={},n=0;n<7;n++)i[t][n]=[];for(e.forEach((function(e){for(var n in s[e])Object.prototype.hasOwnProperty.call(s[e],n)&&Array.prototype.push.apply(i[t][n],s[e][n])})),n=0;n<7;n++){var o=i[t][n];o.length>1&&(i[t][n]=yt(o))}})),i}function bt(t,e){var n,i={};for(var s in e.forEach((function(t){i[t]=[]})),t)if(Object.prototype.hasOwnProperty.call(t,s))for(var r in n=t[s],n.departments)if(Object.prototype.hasOwnProperty.call(n.departments,r)){if(!n.departments[r])continue;var o=ut(r);if(!i[o])continue;i[o].push(s)}return i}function wt(t){var e,n,i={};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){if(n=t[s],Object.prototype.hasOwnProperty.call(n,"deleted_ts$int"))continue;if(!n.departments)continue;if(!n.enabled$bool)continue;e={};for(var r=0;r<7;r++){var o=n[r],a=[];if(o.enabled$bool&&o.periods){var c=o.periods;for(var u in c)Object.prototype.hasOwnProperty.call(c,u)&&a.push({start:c[u].start$int,end:c[u].end$int});a.length&&(e[r]=a)}}Object.keys(e).length&&(i[s]=e)}return i}function _t(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(-1!==e.indexOf(n)&&(t[n]=ot(t[n],(function(t){return t}))),"object"==o(t[n])&&_t(t[n],e))}function yt(t){if(t.length<=1)return t;var e=[];return t.forEach((function(t){e[t.start]=void 0!==e[t.start]?e[t.start]+1:1,e[t.end]=void 0!==e[t.end]?e[t.end]-1:-1})),function(t){var e,n=[],i=0;return t.forEach((function(t,s){t>0&&!e&&(e=s),t&&(i+=t,0===i&&(n.push({start:e,end:s}),e=void 0))})),n}(e)}var $t,kt,Et,xt,Tt,Ot,Ct=n(2),Lt=n(4),It=n(0),At=n(22),St=n(1),Dt=n(12),Rt=n(5),Pt=n(48),jt=n(47),Nt=n(21),qt=n(20),Mt=n(3),zt=n(45),Ut=n(6),Bt=n(15),Vt=n(41),Ft=n(40),Ht=n(39),Kt=n(29),Wt=n(26),Yt=n(13),Zt=n(14),Xt=n(25),Gt=n(24),Qt={init:r,reconnect:l,getFirehose:h,setVisitorInfo:f,getVisitorInfo:d,setVisitorDefaultDepartment:y,getVisitorDefaultDepartment:_,getAllDepartments:w,getDepartment:v,clearVisitorDefaultDepartment:$,addTag:k,removeTag:E,addTags:T,removeTags:O,sendChatMsg:p,sendFile:m,sendVisitorPath:L,sendChatComment:S,sendChatRating:A,getChatInfo:I,endChat:D,isChatting:R,getServingAgentsInfo:P,sendOfflineMsg:q,sendTyping:qt.debounceExceptFirst(M,300),sendEmailTranscript:z,getChatLog:W,getConnectionStatus:Y,getAccountStatus:Z,getOperatingHours:N,getQueuePosition:X,fetchChatHistory:G,markAsRead:qt.throttle(Q,2e3),logout:i,EMAIL_REGEX:Nt.email},Jt=It.extend(Qt),te=!1,ee=It.extend({}),ne="web_sdk",ie=function(){},se=Bt,re=/[0-9]+/,oe=/^(https?|ftps?):\/\//i,ae=/\S/,ce=se.any([se.equal(""),se.type("string").regex(re).maxLength(25)]),ue=se.any([se.equal(void 0),se.type("function")]),le=se.predicate((function(t){return-1===t.indexOf(",")}),"not contain any comma character"),he=se.predicate((function(t){return"object"==o(t.document)&&!!t.document&&"object"==o(t.navigator)&&!!t.navigator&&"object"==o(t.location)&&!!t.location}),"be a valid window object"),de={interval:6e5,limit:10,callback:function(){ht(new Error("Call has been ratelimted"),"reconnect")}},fe=Vt.rateLimit(u,de),pe=["email$string","phone$string","display_name$string"],me={connected:"connected",connecting:"connecting",closed:"closed"},ge={online:"online",offline:"offline",away:"away",invalid_account_key:null,banned:null},ve=st(me),be=st(ge),we=J(pe),_e=J(["name$string","status$string"],"id",U),ye=J(["avatar_path$string","display_name$string","title$string"],"nick"),$e=J(["typing$bool"],"nick",B),ke=J(["typing$bool"],"display_name",V),Ee=J(["timestamp$int"],null,K),xe=J(["timestamp$int"],"nick",F),Te=(J(["banner","behavior","branding","bubble","chat_button","chat_window","concierge","file_sending","forms","greetings","language","login","rating","sound","theme","timezone$string"]),["on","un","fire","unextendEvents","init","getFirehose","getConnectionStatus"]);for(var Oe in Jt)Object.prototype.hasOwnProperty.call(Jt,Oe)&&-1===Te.indexOf(Oe)&&Rt(Jt[Oe])&&(Jt[Oe]=function(t,e){return function(){if(!1!==te)return e.apply(null,arguments);ht(new Error("Web SDK is not initialized yet. Please ensure that you call zChat.init() and wait for the connection to be established before calling this method"),t)}}(Oe,Jt[Oe]));t.exports=Jt},function(t,e,n){var i=n(49),s=i;t.exports=s}])}))}).call(this,n("62e4")(t))},ceb8:function(t,e,n){},d28b:function(t,e,n){var i=n("746f");i("iterator")},d6b6:function(t,e,n){},d998:function(t,e,n){var i=n("342f");t.exports=/MSIE|Trident/.test(i)},da48:function(t,e,n){"use strict";n("c024")},da5f:function(t,e,n){},dc83:function(t,e,n){"use strict";n("afd3")},e01a:function(t,e,n){"use strict";var i=n("23e7"),s=n("83ab"),r=n("da84"),o=n("e330"),a=n("1a2d"),c=n("1626"),u=n("3a9b"),l=n("577e"),h=n("9bf2").f,d=n("e893"),f=r.Symbol,p=f&&f.prototype;if(s&&c(f)&&(!("description"in p)||void 0!==f().description)){var m={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),e=u(p,this)?new f(t):void 0===t?f():f(t);return""===t&&(m[e]=!0),e};d(g,f),g.prototype=p,p.constructor=g;var v="Symbol(test)"==String(f("test")),b=o(p.toString),w=o(p.valueOf),_=/^Symbol\((.*)\)[^)]+$/,y=o("".replace),$=o("".slice);h(p,"description",{configurable:!0,get:function(){var t=w(this),e=b(t);if(a(m,t))return"";var n=v?$(e,7,-1):y(e,_,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:g})}},e0b6:function(t,e,n){"use strict";n("fac0")},e1de:function(t,e,n){},e2cc:function(t,e,n){var i=n("6eeb");t.exports=function(t,e,n){for(var s in e)i(t,s,e[s],n);return t}},e567:function(t,e,n){},e906:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"messageListDOM",staticClass:"message-list-container",class:{hasQueue:t.queue_position>0},on:{touchstart:function(e){return t.touchBegin()},touchmove:function(e){return t.touchMove()},touchend:function(e){return t.touchEnd()}}},[!t.isAPP&&t.showHistory?i("ChatHistory"):t._e(),t.isAPP&&t.showHistoryH5?i("ChatHistoryH5",{attrs:{status:t.h5PullDownStatus}}):t._e(),i("div",{staticClass:"welcome-wrap"},[(t.isAPP,i("img",{attrs:{src:t.logoUrl||n("b256"),alt:""}})),i("div",[t._v(t._s(t.$t("base.maybeQuestion")))])]),i("div",{staticClass:"message-wrap pd-waaper",on:{click:t.zoomImg}},[t.isAPP?t._e():i("Tickets"),i("QuestionTree"),t.isAPP?i("Tickets"):t._e(),t.config.welcome?i("div",{staticClass:"welcome-msg message-text-wrap",domProps:{innerHTML:t._s(t.getWelcomeMsg(t.config.welcome))}}):t._e(),i("MessageList",{attrs:{data:t.chats}}),i("QueuePosition"),i("div",{staticClass:"block-pos"})],1),i("ChatRating"),i("PrechatForm"),i("Logout",{on:{close:function(e){t.showHistory=!1}}}),t._m(0)],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"preload-img chat-rating"},[n("div",{staticClass:"message-loading"}),n("div",{staticClass:"tips-msg-wrap"},[n("i"),n("i",{staticClass:"solve"})]),n("button",{staticClass:"btn-answer-wrap btn-unsolve active"},[n("i")]),n("button",{staticClass:"btn-answer-wrap btn-solve active"},[n("i")]),n("button",{staticClass:"btn-answer-wrap btn-solve active show-animate"},[n("i")]),n("div",{staticClass:"rating-wrap"},[n("dd",[n("i",{staticClass:"icon-bad"})]),n("dd",[n("i",{staticClass:"icon-good"})]),n("dd",{staticClass:"active"},[n("i",{staticClass:"icon-bad"})]),n("dd",{staticClass:"active"},[n("i",{staticClass:"icon-good"})]),n("dd",{staticClass:"show-animate"},[n("i",{staticClass:"icon-bad"})]),n("dd",{staticClass:"show-animate"},[n("i",{staticClass:"icon-good"})])])])}],r=n("5530"),o=n("1da1"),a=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0"),n("5319"),n("99af"),n("caad"),n("2532"),n("2f62")),c=n("c82c"),u=n.n(c),l=(n("0808"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showLogoutDia?n("div",{staticClass:"dialog-wrap dialog-logout-wrap"},[n("div",{staticClass:"dialog-wrap-detail"},[n("div",{staticClass:"title"},[n("span",[t._v(t._s(t.$t("dialog.title")))]),t.isAPP?t._e():n("button",{on:{click:t.close}},[n("i",{staticClass:"icon-close"})])]),n("div",{staticClass:"content"},[t._v(t._s(t.tipsText))]),n("div",{staticClass:"footer"},[n("button",{staticClass:"cancel",on:{click:t.close}},[t._v(" "+t._s(t.$t("dialog.cancel"))+" ")]),n("button",{staticClass:"confirm",on:{click:t.logout}},[t._v(" "+t._s(t.$t("dialog.confirm"))+" ")])])])]):t._e()}),h=[],d=n("cb24"),f=n.n(d),p=n("a3be"),m={mounted:function(){this.$EventBus.$on("logout",this.logout)},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP","showLogoutDia","uid"])),Object(a["d"])("zchat",["queue_position","isZendeskChatting"])),{},{tipsText:function(){var t=this.queue_position,e=this.isZendeskChatting;return e&&t>0?this.$i18n.t("dialog.logout/queue"):this.$i18n.t("dialog.logout/leave")}}),methods:{close:function(){this.$store.commit("base/setLogoutDiaState",!1)},logout:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$emit("close"),t.$store.commit("base/setLogoutDiaState",!1),t.$store.commit("base/setVisible",!1),t.$store.commit("chats/clearChats"),t.$store.commit("zchat/setQueuePosition",0),t.$store.commit("zchat/setRatingState",!1),window.sensors.track("customer_sc_note_leave_confirm_click"),e.next=9,Object(p["a"])();case 9:if(i=e.sent,s=i.data.success,s)try{localStorage.removeItem("HELP-TEMP-TOKEN")}catch(a){window["HELP-TEMP-TOKEN"]=""}if(f.a.endChat({clear_dept_id_on_chat_ended:!0},(function(){t.$store.commit("zchat/setChatStatus",!1),f.a.setVisitorInfo({email:"",phone:"",display_name:""})})),!t.isAPP){e.next=19;break}return e.next=16,n.e("chunk-2d212b4b").then(n.t.bind(null,"aa0e",7));case 16:r=e.sent,o=r.default,o("20010006");case 19:case"end":return e.stop()}}),e)})))()}},watch:{showLogoutDia:function(t){t&&window.sensors.track("customer_sc_note_leave_pop_expose")}}},g=m,v=(n("ffdb"),n("da48"),n("2877")),b=Object(v["a"])(g,l,h,!1,null,"4eb03ce0",null),w=b.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"question-tree-wrap"},[n("div",{staticClass:"left"},[n("dl",{ref:"leftDOM"},t._l(t.firstList,(function(e,i){return n("dd",{key:i,class:{active:t.curId?e.questionId===t.curId:0===i},on:{click:function(n){return t.changeQuestion(e.questionId)}}},[n("div",{staticClass:"text-wrap"},[t._v(t._s(e.question))])])})),0),t.isAPP?t._e():n("div",{staticClass:"line",style:{height:t.leftH+"px",top:t.leftTop+"px"}})]),n("div",{staticClass:"right"},[n("dl",{ref:"rightDOM"},t._l(t.rightList,(function(e,i){return n("dd",{key:i,on:{click:function(n){return t.getAnwser(e)}}},[t._v(" "+t._s(e.question)+" ")])})),0),t.childList.length>=6&&t.isAPP?n("div",{staticClass:"next-btn",on:{click:t.nextEvent}},[n("i"),t._v(" "+t._s(t.$t("base.changeABatch"))+" ")]):t._e(),t.isAPP?t._e():n("div",{staticClass:"line",style:{height:t.rightH+"px",top:t.rightTop+"px"}})])])},y=[],$=n("6b75");function k(t){if(Array.isArray(t))return Object($["a"])(t)}n("a4d3"),n("e01a"),n("d28b"),n("a630");function E(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var x=n("06c5");function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(t){return k(t)||E(t)||Object(x["a"])(t)||T()}n("fb6a");var C={data:function(){return{curId:"",leftH:0,leftTop:0,rightH:0,rightTop:0,timerTop:null,timerLeft:null,timerRight:null,childList:[],step:0}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP"])),Object(a["c"])("base",["secondList","treeObj","firstList"])),{},{defaultId:function(){return(this.firstList[0]||{}).questionId},rightList:function(){return this.isAPP?this.childList.slice(this.step,this.step+5):this.childList}}),methods:{changeQuestion:function(t){(this.curId!==t||this.isBottom)&&(this.step=0,this.curId=t,this.$refs.rightDOM.scrollTop=0,window.sensors.track("customer_sc_tab_click",{tab_id:t}))},getAnwser:function(t){t.question&&(this.$store.dispatch("chats/updateChats",{type:"chat.msg",msg:t.question}),this.isZendeskChatting?f.a.sendChatMsg(t.question):(t.childList&&t.childList.length?this.$store.dispatch("chats/updateChats",{type:"chat.anwser.list",questionList:t.childList,questionText:t.question}):this.$store.dispatch("chats/updateChats",{type:"chat.anwser",questionId:t.questionId}),window.sensors.track("customer_sc_content_click",{content_id:t.questionId})))},initLeftScrollbar:function(){var t=this.$refs.leftDOM,e=this.boxH=t.clientHeight;this.leftH=t&&t.scrollHeight>e?e*(e/t.scrollHeight):0,t.addEventListener("scroll",this.handleLeftScroll)},initRightScrollbar:function(){var t=this.boxH,e=this.$refs.rightDOM;this.rightH=e&&e.scrollHeight>t?t*(t/e.scrollHeight):0,e.addEventListener("scroll",this.handleRightScroll)},handleLeftScroll:function(){var t=this;clearTimeout(this.timerLeft),this.timerLeft=setTimeout((function(){var e=t.boxH,n=t.leftH,i=t.$refs.leftDOM,s=(e-n)*(i.scrollTop/(i.scrollHeight-e));t.leftTop=s}),10)},handleRightScroll:function(){var t=this;clearTimeout(this.timerRight),this.timerRight=setTimeout((function(){var e=t.boxH,n=t.rightH,i=t.$refs.rightDOM,s=(e-n)*(i.scrollTop/(i.scrollHeight-e));t.rightTop=s}),10)},setChildList:function(){this.childList=O(this.secondList(this.curId))||[]},nextEvent:function(){this.childList.slice(this.step,this.step+6).length>=6?this.step=this.step+5:this.step=0}},watch:{defaultId:function(t){var e=this;this.curId=t,this.$nextTick((function(){!e.isAPP&&e.initLeftScrollbar()}))},curId:function(){var t=this;this.setChildList(),!this.isAPP&&this.$nextTick((function(){t.initRightScrollbar()}))}},beforeDestroy:function(){this.$refs.leftDOM&&this.$refs.leftDOM.removeEventListener("scroll",this.handleLeftScroll),this.$refs.rightDOM&&this.$refs.rightDOM.removeEventListener("scroll",this.handleRightScroll),this.timerLeft&&clearTimeout(this.timerLeft),this.timerRight&&clearTimeout(this.timerRight)}},L=C,I=(n("dc83"),Object(v["a"])(L,_,y,!1,null,null,null)),A=I.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"message-list"},t._l(t.data,(function(e,i){return n(t.componentsObj[e.type],{key:e.key?e.key:i,tag:"component",class:"chat-msg-container",attrs:{info:e.info||{},message:e.msg,answer:e.answer,attachment:e.attachment,"need-to-bottom":e.needToBottom,"class-name":e.className,"need-ticket":e.needTicket,"question-id":e.questionId,"question-list":e.questionList,"question-text":e.questionText}})})),1)},D=[],R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-msg",class:t.className},[n("Avatar",{attrs:{type:t.className}}),t.loading&&"agent"===t.className?n("div",{staticClass:"message-loading"}):n("div",{staticClass:"chat-message maxwidth",class:t.className},[t.allowToHtml?n("span",{domProps:{innerHTML:t._s(t.newMsg)}}):n("span",[t._v(t._s(t.message))])])],1)},P=[],j=(n("841c"),{props:{message:{type:String,default:""},className:{type:String,default:"visiter"}},components:{Avatar:function(){return n.e("chunk-2aa7f8ae").then(n.bind(null,"df3a"))}},data:function(){return{loading:!0,newMsg:""}},mounted:function(){var t=this;setTimeout((function(){t.loading=!1}),800),"agent"===this.className&&this.toLink()},computed:{allowToHtml:function(){return"agent"===this.className}},methods:{toLink:function(){var t=document.createElement("div");t.innerHTML=this.message;var e=t.innerText,n="w{3}[^\\s]*",i="(https|http)://[^\\s]*",s=n+"|"+i,r=new RegExp(s,"gi"),o=e.replace(r,(function(t){return t.search("http")<0&&t.search("HTTP")<0?'<a href="http://'+t+'" target="_blank"  rel="noopener noreferrer">'+t+"</a>":'<a href="'+t+'" target="_blank" rel="noopener noreferrer">'+t+"</a>"}));this.newMsg=o}}}),N=j,q=(n("3142"),Object(v["a"])(N,R,P,!1,null,null,null)),M=q.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-media-wrap",class:t.className},[n("Avatar",{attrs:{type:t.className}}),n("div",{staticClass:"chat-media-content"},[t.uploadError?n("div",{staticClass:"upload-error",on:{click:t.sendFile}},[n("i",{staticClass:"icon-info"})]):t._e(),t.isImage?n("a",{staticClass:"chat-img-container",attrs:{href:t.imageUrl?t.imageUrl:t.attachment.url,target:"_blank"}},[n("div",{staticClass:"chat-img",style:t.attachment.url&&"background-image: url("+t.attachment.url+")"},[t.isVisiterSend?n("div",{staticClass:"img-wrap",class:{sending:t.isSending,error:t.uploadError}},[t.isSending?n("i",{staticClass:"loading"}):t._e(),!t.isSending&&t.uploadError?n("i",{staticClass:"icon-img-error"}):t._e()]):t._e()])]):t._e()])],1)},U=[],B=(n("00b4"),{props:{attachment:{type:Object,default:function(){return{}}},className:{type:String,default:"visiter"}},data:function(){return{isSending:!1,uploadError:!1,imageUrl:""}},components:{Avatar:function(){return n.e("chunk-2aa7f8ae").then(n.bind(null,"df3a"))}},mounted:function(){this.attachment.isVisiterSend&&this.sendFile()},computed:{isImage:function(){return/^image/.test(this.attachment.mime_type)},isVisiterSend:function(){return this.attachment.isVisiterSend}},methods:{sendFile:function(){var t=this,e=this.attachment.file;this.isImage&&(this.isSending=!0,f.a.sendFile(e,(function(e,n){e?(t.uploadError=!0,t.$EventBus.$emit("toast",{type:"error",msg:t.$i18n.t("base.uploadError")})):(t.uploadError=!1,t.imageUrl=n.url),t.isSending=!1})))}}}),V=B,F=(n("ed8d"),Object(v["a"])(V,z,U,!1,null,null,null)),H=F.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agent-answer-wrap",class:{mt0:t.mt0}},[n("Avatar",{attrs:{type:"system"}}),t.loading?n("div",{staticClass:"message-loading"}):t._e(),t.sendFailed?n("div",{staticClass:"resend-message",on:{click:function(e){return t.getAnswer(!0)}}},[n("i",{staticClass:"icon-resend"})]):t._e(),!t.loading&&t.answerMsg?n("div",{staticClass:"message-text-wrap agent-answer"},[n("div",{staticClass:"msg-anwser",domProps:{innerHTML:t._s(t.answerMsg)}}),t.showBtn?n("div",{staticClass:"action-wrap"},[n("button",{staticClass:"btn-answer-wrap btn-solve",class:{active:"solve"===t.curSelect,"show-animate":t.hasAnimate},attrs:{disabled:t.disBtn},on:{click:t.solve}},[n("i",{staticClass:"icon-praise"}),t._v(" "+t._s(t.$t("base.slove"))+" ")]),n("button",{staticClass:"btn-answer-wrap btn-unsolve",class:{active:"unsolve"===t.curSelect},attrs:{disabled:t.disBtn},on:{click:t.toZendedsk}},[n("i",{staticClass:"icon-unsolve"}),t._v(" "+t._s(t.$t("base.customer/chart"))+" ")])]):t._e()]):t._e(),!t.loading&&t.noAnswer?n("div",{staticClass:"message-text-wrap tips-msg-wrap"},[n("i"),n("span",[t._v(t._s(t.config.missWordTip))])]):t._e()],1)},W=[],Y=(n("a9e3"),n("1276"),{props:{questionId:{type:[String,Number],default:""},message:{type:String,default:""},answer:{type:String,default:""}},data:function(){return{hasAnimate:!1,answerMsg:"",curSelect:"",loading:!0,sendFailed:!1,noAnswer:!1,showBtn:!0,mt0:!1,deptId:0,referrer:""}},components:{Avatar:function(){return n.e("chunk-2aa7f8ae").then(n.bind(null,"df3a"))}},mounted:function(){this.referrer=document.referrer,this.answer?(this.showBtn=!1,this.answerMsg=this.handleAnswerHref(this.answer),this.loading=!1):this.getAnswer()},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP","config","sceneCode","latestDomain","domainWhiteList","uid","locale"])),Object(a["d"])("zchat",["isZendeskChatting","connection"])),{},{disBtn:function(){return this.isZendeskChatting||!!this.curSelect}}),methods:{getAnswer:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,s,r,o,a,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.checkCookie();case 2:if(i=n.sent,i){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,Object(p["b"])({questionId:e.questionId||void 0,question:e.message||void 0});case 7:if(s=n.sent,r=s.data,o=r.success,a=r.data,c=r.code,o)1===a.answerType?(e.answerMsg=a.answer&&e.handleAnswerHref(a.answer),e.deptId=a.deptId):(u=JSON.parse(a.answer),u&&0===u.length?e.noAnswer=!0:(e.loading=!1,e.mt0=!0,e.$store.dispatch("chats/updateChats",{type:"chat.anwser.list",questionList:u,questionText:e.message}))),setTimeout((function(){e.loading=!1,e.$EventBus.$emit("toBottom")}),800),e.sendFailed=!1,!t&&e.$EventBus.$emit("toBottom");else if(60001===c){try{localStorage.removeItem("HELP-TEMP-TOKEN")}catch(l){window["HELP-TEMP-TOKEN"]=""}e.getAnswer()}else e.sendFailed=!0,e.$EventBus.$emit("toast",{type:"error"});case 13:case"end":return n.stop()}}),n)})))()},handleAnswerHref:function(t){var e=this,n=new RegExp(/<a[^>]*href=[ '"]([^"]*)[' "][^>]*>(.*?)<\/a>/,"gi"),i=new RegExp(/http(s)?:\/\/(.*?)\//,"gi"),s=t.replace(n,(function(t){var s=n.exec(t)||[],r=s[1],o=s[2];n.lastIndex=0;var a=-1===t.indexOf("target"),c='<a href="'.concat(r,'" target="_blank" rel="noopener noreferrer">').concat(o,"</a>");return e.isAPP&&a&&(c='<a href="javascript:;" data-url="'.concat(r,'">').concat(o,"</a>")),c.replace(i,(function(t){var n=i.exec(t)||[];if(i.lastIndex=0,e.domainWhiteList.includes(n[2])){var s=(i.exec(e.referrer)||[])[2],r=s&&s.substring(s.indexOf(".")+1)||e.latestDomain;return i.lastIndex=0,r?t.replace("hbg.com",r):t}return t}))}));return s},solve:function(){var t=this;this.curSelect="solve",this.hasAnimate=!0;var e=this.isAPP?600:800;setTimeout((function(){t.hasAnimate=!1}),e),setTimeout((function(){t.$store.dispatch("chats/updateChats",{type:"chat.agent.tips",msg:t.config.solvedTip,className:"solve"})}),1500),Object(p["l"])({type:2,questionId:this.questionId}),window.sensors.track("customer_sc_solved_click",{content_id:this.questionId})},toZendedsk:function(){if(Object(p["l"])({type:3,questionId:this.questionId}),window.sensors.track("customer_sc_unsolved_click",{content_id:this.questionId}),["ru-ru"].includes(this.locale)||7===+this.sceneCode)this.showTicket();else{var t=1*this.deptId,e=f.a.getDepartment(t),n=e&&e.status;"offline"===n?this.showTicket():(this.$store.commit("base/setDepartmentId",t),this.uid?this.toArtificial():this.$store.commit("base/setPrechatDiaState",!0),window.sensors.track("customer_sc_customer_pop_expose"))}},checkCookie:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n="";try{n=localStorage.getItem("HELP-TEMP-TOKEN")}catch(a){n=window["HELP-TEMP-TOKEN"]}if(!n){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,Object(p["j"])({sceneCode:t.sceneCode});case 6:if(i=e.sent,s=i.data,r=s.success,o=s.data,!r){e.next=15;break}try{localStorage.setItem("HELP-TEMP-TOKEN",o.token)}catch(c){window["HELP-TEMP-TOKEN"]=o.token}return e.abrupt("return",!0);case 15:return t.$EventBus.$emit("toast",{type:"error"}),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)})))()},toArtificial:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r,o,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.uid,"closed"===t.connection&&f.a.reconnect(),i=f.a.getVisitorInfo(),s=i.email,r=i.phone,o=i.display_name,a=o&&-1!==o.indexOf("UID:")?"".concat(o.split("UID:")[0],"UID: ").concat(n):"".concat(o," UID: ").concat(n),f.a.setVisitorInfo({email:s||"",phone:r||"",display_name:a},(function(e){if(!e){try{f.a.setVisitorDefaultDepartment(2147641153)}catch(n){}f.a.sendChatMsg(t.$i18n.t("base.hello"))}})),c=t.locale,setTimeout((function(){f.a.addTags([c],(function(){}))}),3e3),t.$store.dispatch("chats/updateChats",{type:"chat.wating"}),t.$store.commit("base/setZchatBtnTime",+new Date);case 9:case"end":return e.stop()}}),e)})))()},showTicket:function(){this.$store.dispatch("chats/updateChats",{type:"chat.agent.tips",msg:this.$i18n.t("base.contact/information"),className:"unsolve",needTicket:!0}),this.$store.commit("base/setZchatBtnTime",+new Date)}}}),Z=Y,X=(n("c8d6"),Object(v["a"])(Z,K,W,!1,null,null,null)),G=X.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agent-tips-msg"},[n("Avatar",{attrs:{type:"system"}}),t.loading?n("div",{staticClass:"message-loading"}):[n("div",{staticClass:"message-text-wrap tips-msg-wrap"},[n("i",{class:t.className}),n("span",[t._v(t._s(t.message))]),t.needTicket?n("div",{staticClass:"ticket"},[n("a",{ref:"noopener noreferrer",attrs:{href:t.ticketUrl,target:"_blank"},on:{click:t.goTicketTrack}},[t._v(" "+t._s(t.$t("base.ticket"))+" ")])]):t._e()])]],2)},J=[],tt=n("d930"),et={props:{className:{type:String,default:""},needTicket:{type:Boolean,default:!1},message:{type:String,default:""}},data:function(){return{loading:!0}},components:{Avatar:function(){return n.e("chunk-2aa7f8ae").then(n.bind(null,"df3a"))}},mounted:function(){var t=this;setTimeout((function(){t.loading=!1,t.$EventBus.$emit("toBottom")}),800)},computed:Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["locale","sceneCode"])),{},{ticketUrl:function(){if(1*this.sceneCode===7)return Object(tt["a"])(this.locale);var t=Object(tt["b"])(this.locale);return"https://huobiglobal.zendesk.com/hc/".concat(t,"/requests/new")}}),methods:{goTicketTrack:function(){window.sensors.track("customer_sc_submit_system_click")}}},nt=et,it=(n("7070"),Object(v["a"])(nt,Q,J,!1,null,null,null)),st=it.exports,rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"agent-question-list maxwidth",class:{pad0:t.needLoading&&t.loading,mt0:!t.needLoading}},[i("Avatar",{attrs:{type:"system"}}),t.needLoading&&t.loading?i("div",{staticClass:"message-loading"}):i("div",{staticClass:"list-wrap"},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.questionText,expression:"questionText"}],staticClass:"question-text"},[t._v(" "+t._s(t.questionText)+" ")]),i("dl",t._l(t.curentPageData,(function(e,n){return i("dd",{key:n,on:{click:function(n){return t.getAnwser(e)}}},[t._v(" "+t._s(e.question)+" ")])})),0),t.showPagination?[t.isAPP?i("div",{staticClass:"pagination-box-h5"},[i("img",{attrs:{src:n("0e1d"),alt:""}}),i("button",{on:{click:t.changeABatch}},[t._v(t._s(t.$t("base.changeABatch")))])]):i("div",{staticClass:"pagination-box-web"},[i("button",{staticClass:"btn-prev",attrs:{disabled:t.disablePrevBtn},on:{click:t.prev}},[i("i",{staticClass:"icon-arrow"})]),i("button",{staticClass:"btn-next",attrs:{disabled:t.disableNextBtn},on:{click:t.next}},[i("i",{staticClass:"icon-arrow"})])])]:t._e()],2)],1)},ot=[],at={props:{needToBottom:{type:Boolean,default:!0},needLoading:{type:Boolean,default:!0},questionText:{type:String,default:""},questionList:{type:Array,default:function(){return[]}}},data:function(){return{curentPage:1,pageSize:5,loading:!0}},components:{Avatar:function(){return n.e("chunk-2aa7f8ae").then(n.bind(null,"df3a"))}},mounted:function(){var t=this;this.needToBottom?setTimeout((function(){t.loading=!1,t.needToBottom&&t.$EventBus.$emit("toBottom")}),800):this.loading=!1},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP"])),Object(a["d"])("zchat",["isZendeskChatting"])),{},{showPagination:function(){return this.questionList.length>this.pageSize},allPageAmount:function(){return Math.ceil(this.questionList.length/this.pageSize)},curentPageData:function(){var t=this.pageSize,e=this.curentPage,n=t*(e-1),i=t*e;return this.questionList.slice(n,i)},disablePrevBtn:function(){return 1===this.curentPage},disableNextBtn:function(){return this.curentPage>=this.allPageAmount}}),methods:{getAnwser:function(t){t.question&&(this.$store.dispatch("chats/updateChats",{type:"chat.msg",msg:t.question}),this.isZendeskChatting?f.a.sendChatMsg(t.question):(t.childList&&t.childList.length?this.$store.dispatch("chats/updateChats",{type:"chat.anwser.list",questionList:t.childList,questionText:t.question}):this.$store.dispatch("chats/updateChats",{type:"chat.anwser",questionId:t.questionId}),window.sensors.track("customer_sc_content_click",{content_id:t.questionId})))},prev:function(){1!==this.curentPage&&this.curentPage--},next:function(){this.curentPage>=this.allPageAmount||this.curentPage++},changeABatch:function(){this.curentPage>=this.allPageAmount?this.curentPage=1:this.curentPage++}},watch:{questionList:function(){this.curentPage=1}}},ct=at,ut=(n("e0b6"),Object(v["a"])(ct,rt,ot,!1,null,null,null)),lt=ut.exports,ht=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"zchat-button-wrap"},[i("Avatar",{attrs:{type:"system"}}),t.loading?i("div",{staticClass:"message-loading"}):[i("div",{staticClass:"message-text-wrap tips-msg-wrap"},[i("i"),i("span",[t._v(t._s(t.config.unsolvedTip))]),t.showZendesk?i("button",{staticClass:"zendesk-btn",on:{click:t.toZendedsk}},[i("span",[t._v(t._s(t.$t("base.customer/enter")))]),t.isAPP?i("img",{staticClass:"icon-customer-h5",attrs:{src:n("f505")}}):i("i",{staticClass:"icon-customer"})]):t._e()])]],2)},dt=[],ft={props:{info:{type:Object,default:function(){return{}}}},components:{Avatar:function(){return n.e("chunk-2aa7f8ae").then(n.bind(null,"df3a"))}},data:function(){return{loading:!0,timestamp:1}},mounted:function(){var t=this;this.timestamp=+new Date,setTimeout((function(){t.loading=!1,t.$EventBus.$emit("toBottom")}),500)},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP","config","locale","sceneCode","uid","departmentId","clickedZchatBtnTimestamp"])),Object(a["d"])("zchat",["connection"])),{},{showZendesk:function(){return this.clickedZchatBtnTimestamp<=this.timestamp}}),methods:{toZendedsk:function(){if(Object(p["l"])({type:9}),window.sensors.track("customer_sc_call_customer_click"),["ru-ru"].includes(this.locale)||7===+this.sceneCode)this.showTicket();else{var t=1*this.info.deptId,e=f.a.getDepartment(t),n=e&&e.status;"offline"===n?this.showTicket():(this.$store.commit("base/setDepartmentId",t),this.uid?this.toArtificial():this.$store.commit("base/setPrechatDiaState",!0),window.sensors.track("customer_sc_customer_pop_expose"))}},toArtificial:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r,o,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.uid,"closed"===t.connection&&f.a.reconnect(),i=f.a.getVisitorInfo(),s=i.email,r=i.phone,o=i.display_name,a=o&&-1!==o.indexOf("UID:")?"".concat(o.split("UID:")[0],"UID: ").concat(n):"".concat(o," UID: ").concat(n),f.a.setVisitorInfo({email:s||"",phone:r||"",display_name:a},(function(e){if(!e){try{f.a.setVisitorDefaultDepartment(1*t.departmentId)}catch(n){}f.a.sendChatMsg(t.$i18n.t("base.hello"))}})),c=t.locale,setTimeout((function(){f.a.addTags([c],(function(){}))}),3e3),t.$store.dispatch("chats/updateChats",{type:"chat.wating"}),t.$store.commit("base/setZchatBtnTime",+new Date);case 9:case"end":return e.stop()}}),e)})))()},showTicket:function(){this.$store.dispatch("chats/updateChats",{type:"chat.agent.tips",msg:this.$i18n.t("base.contact/information"),className:"unsolve",needTicket:!0}),this.$store.commit("base/setZchatBtnTime",+new Date)}}},pt=ft,mt=(n("fefc"),Object(v["a"])(pt,ht,dt,!1,null,null,null)),gt=mt.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"chat-msg wating-msg"},[n("span",[t._v(t._s(t.$t("base.queue/connecting")))])]):t._e()},bt=[],wt={computed:Object(r["a"])(Object(r["a"])({},Object(a["d"])("zchat",["queue_position","isZendeskChatting","agentMemberjoin"])),{},{show:function(){var t=this.queue_position,e=this.isZendeskChatting,n=this.agentMemberjoin;return e&&!n&&0===t}})},_t=wt,yt=(n("3fd1"),Object(v["a"])(_t,vt,bt,!1,null,"21252345",null)),$t=yt.exports,kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-msg system-msg"},[n("i"),n("span",[t._v(t._s(t.message))]),n("i")])},Et=[],xt={props:{info:{type:Object,default:function(){return{}}}},computed:{message:function(){var t=this.info;switch(t.type){case"chat.memberjoin":return t.display_name+" "+this.$i18n.t("base.memberjoin");case"chat.memberleave":return t.display_name+" "+this.$i18n.t("base.memberleave")}return""}}},Tt=xt,Ot=(n("b4b6"),Object(v["a"])(Tt,kt,Et,!1,null,null,null)),Ct=Ot.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-rating-h5"},[n("div",{staticClass:"chat-rating-detail"},[n("div",{staticClass:"title"},[n("span",[t._v(t._s(t.$t("dialog.rating/title")))])]),n("div",{staticClass:"content",class:{"need-scroll":t.needScroll}},[n("dl",{staticClass:"rating-wrap"},[n("dd",{class:{active:t.rateBad,"show-animate":t.hasAnimate&&t.rateBad}},[n("button",{attrs:{"data-name":"icon-bad"},on:{click:function(e){return t.rate("bad")}}},[n("i",{staticClass:"icon-bad"}),n("span",[t._v(t._s(t.$t("dialog.rating/bad")))])])]),n("dd",{class:{active:t.rateGood,"show-animate":t.hasAnimate&&t.rateGood}},[n("button",{attrs:{"data-name":"icon-good"},on:{click:function(e){return t.rate("good")}}},[n("i",{staticClass:"icon-good"}),n("span",[t._v(t._s(t.$t("dialog.rating/good")))])])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowTextBox&&!t.subBad,expression:"isShowTextBox && !subBad"}],staticClass:"textarea-wrap",class:{focus:t.isfocus}},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.comment,expression:"comment",modifiers:{trim:!0}}],staticClass:"textarea-text",attrs:{maxlength:"300",placeholder:t.placeholderText},domProps:{value:t.comment},on:{focus:function(e){t.isfocus=!0},blur:[function(e){t.isfocus=!1},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.comment=e.target.value.trim())}}}),t._v(" "),n("div",{staticClass:"max-tips"},[t._v(t._s(t.comment.length)+"/300")])]),n("p",{directives:[{name:"show",rawName:"v-show",value:t.subBad&&t.comment,expression:"subBad && comment"}],staticClass:"comment-text"},[t._v(" "+t._s(t.comment)+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowTextBox&&!t.subBad,expression:"isShowTextBox && !subBad"}],staticClass:"footer",class:{"is-bangs":t.isBangs}},[n("button",{attrs:{"data-name":"sub",disabled:t.disBtn},on:{click:t.submit}},[t._v(" "+t._s(t.$t("dialog.submit"))+" ")])])])])])},It=[],At={data:function(){return{evaluate:"",comment:"",hasAnimate:!1,isfocus:!1,needScroll:!1,isShowTextBox:!1,subBad:!1}},mounted:function(){var t=this;window.addEventListener("scroll",(function(){t.isAPP&&(t.needScroll=window.innerHeight<690)}))},computed:Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP","isBangs","ratingDiaInfo"])),{},{rateBad:function(){return"bad"===this.evaluate},rateGood:function(){return"good"===this.evaluate},disBtn:function(){return!this.comment},placeholderText:function(){return this.$i18n.t("dialog.rating/placeholder")}}),methods:{close:function(){this.hasAnimate=!1,this.isShowTextBox&&(this.subBad=!0),this.$store.commit("zchat/setRatingState",!0)},submit:function(){var t=this.evaluate,e=this.comment;t&&f.a.sendChatRating(t),e&&f.a.sendChatComment(e),window.sensors.track("customer_sc_evaluate_confirm_click",{satisfaction_evaluate:t}),this.close()},rate:function(t){var e=this;"good"===this.evaluate||this.subBad||(this.evaluate=t,this.isShowTextBox="bad"===t,this.hasAnimate=!0,clearTimeout(this.timer),this.timer=setTimeout((function(){e.hasAnimate=!1,"bad"!==t&&e.submit()}),1500))}},watch:{"ratingDiaInfo.show":{handler:function(t){t&&window.sensors.track("customer_sc_evaluate_pop_expose")},deep:!0}}},St=At,Dt=(n("5e78"),Object(v["a"])(St,Lt,It,!1,null,null,null)),Rt=Dt.exports,Pt={"chat.msg":M,"chat.media":H,"chat.anwser":G,"chat.agent.tips":st,"chat.anwser.list":lt,"chat.zendesk":gt,"chat.systemMessage":Ct,"chat.wating":$t,"chat.raingH5":Rt},jt={name:"",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{componentsObj:Pt}}},Nt=jt,qt=Object(v["a"])(Nt,S,D,!1,null,null,null),Mt=qt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showHistory?n("div",{staticClass:"chat-history-wrap"},[n("div",{staticClass:"btn-action"},[n("button",{directives:[{name:"show",rawName:"v-show",value:"show-more"===t.listState,expression:"listState === 'show-more'"}],on:{click:t.loadHistory}},[t._v(" "+t._s(t.$t("base.history/view"))+" ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:"loading"===t.listState,expression:"listState === 'loading'"}],staticClass:"loading"}),n("span",{directives:[{name:"show",rawName:"v-show",value:"no-more-data"===t.listState,expression:"listState === 'no-more-data'"}],staticClass:"no-data"},[t._v(" "+t._s(t.$t("base.history/noData"))+" ")])]),n("MessageList",{directives:[{name:"show",rawName:"v-show",value:t.btnIsClicked,expression:"btnIsClicked"}],attrs:{data:t.allHistory}})],1):t._e()},Ut=[],Bt={components:{MessageList:Mt},data:function(){return{allHistory:[],historyList:[],showHistory:!1,btnIsClicked:!1,isLoading:!1,needInit:!0,originData:[],params:{from:"",direct:1,limit:11}}},mounted:function(){var t=this;this.$EventBus.$on("logout",(function(){t.allHistory=[],t.historyList=[]}))},computed:Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["visible","sceneCode"])),{},{listState:function(){var t=this.isLoading,e=this.btnIsClicked,n=this.historyList,i=this.params.limit;return t?"loading":e&&n.length<2*i?"no-more-data":"show-more"}}),methods:{fetchHistory:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,s,o,a,c,u,l,h;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,localStorage.getItem("HELP-TEMP-TOKEN")){n.next=3;break}return n.abrupt("return");case 3:n.next=9;break;case 5:if(n.prev=5,n.t0=n["catch"](0),window["HELP-TEMP-TOKEN"]){n.next=9;break}return n.abrupt("return");case 9:if(!t){n.next=15;break}if(!e.isLoading){n.next=14;break}return n.abrupt("return");case 14:e.isLoading=!0;case 15:return n.next=17,Object(p["g"])(Object(r["a"])({},e.params));case 17:if(i=n.sent,s=i.data,o=s.success,a=s.data,c=s.code,!o){n.next=30;break}!e.btnIsClicked&&a.length>0&&(e.showHistory=!0),e.btnIsClicked&&a.length>10&&(e.params.from=a[0].id),e.historyList=a&&a.reduce((function(t,e){t.push({type:"chat.msg",msg:e.question});var n=1===e.answerType?"chat.anwser":"chat.anwser.list";return e.answer&&t.push({type:n,questionId:e.questionId,questionList:"chat.anwser.list"===n&&JSON.parse(e.answer),questionText:e.question,needToBottom:!1,answer:e.answer,key:"".concat(e.id).concat(e.createdAt)}),t}),[])||[],e.isLoading=!1,t&&(a.length>10?(u=e.allHistory).unshift.apply(u,O(e.historyList.slice(2))):(l=e.allHistory).unshift.apply(l,O(e.historyList.slice(0)))),n.next=38;break;case 30:if(60001!==c){n.next=37;break}return n.next=33,e.checkCookie();case 33:h=n.sent,h&&(e.isLoading=!1,e.fetchHistory(t)),n.next=38;break;case 37:e.$EventBus.$emit("toast",{type:"error"});case 38:case"end":return n.stop()}}),n,null,[[0,5]])})))()},checkCookie:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["j"])({sceneCode:t.sceneCode});case 2:if(n=e.sent,i=n.data,s=i.success,r=i.data,!s){e.next=11;break}try{localStorage.setItem("HELP-TEMP-TOKEN",r.token)}catch(o){window["HELP-TEMP-TOKEN"]=r.token}return e.abrupt("return",!0);case 11:return t.$EventBus.$emit("toast",{type:"error"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))()},loadHistory:function(){this.btnIsClicked=!0,this.fetchHistory(!0)}},watch:{visible:function(t){t&&this.needInit&&(this.fetchHistory(),this.needInit=!1)}}},Vt=Bt,Ft=(n("720f"),Object(v["a"])(Vt,zt,Ut,!1,null,null,null)),Ht=Ft.exports,Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-history-h5",class:{mb40:t.allHistory.length>0||t.text||t.loading}},[n("div",{staticClass:"action-wrap"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"refresh"}),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]},[t._v(t._s(t.text))])]),n("MessageList",{attrs:{data:t.allHistory}})],1)},Wt=[],Yt={props:{status:{type:String,default:""}},components:{MessageList:Mt},data:function(){return{allHistory:[],historyList:[],isFetching:!0,hasMoreData:!0,isLoadingData:!1,params:{from:"",direct:1,limit:11}}},computed:{text:function(){var t=this.status;return this.hasMoreData?"start"===t?this.$i18n.t("base.history/viewh5"):"release"===t?this.$i18n.t("base.history/refresh"):"":this.$i18n.t("base.history/noData")},loading:function(){return this.status&&"startLoad"===this.status&&this.isFetching}},methods:{fetchHistory:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isLoadingData){e.next=2;break}return e.abrupt("return");case 2:return t.isLoadingData=!0,t.isFetching=!0,e.next=6,Object(p["g"])(Object(r["a"])({},t.params));case 6:n=e.sent,i=n.data,s=i.success,o=i.data,s?(o.length>10&&(t.params.from=o[0].id),t.hasMoreData=o.length>10,t.historyList=o&&o.reduce((function(t,e){t.push({type:"chat.msg",msg:e.question});var n=1===e.answerType?"chat.anwser":"chat.anwser.list";return e.answer&&t.push({type:n,questionId:e.questionId,questionList:"chat.anwser.list"===n&&JSON.parse(e.answer),questionText:e.question,answer:e.answer,needToBottom:!1,key:e.questionId+e.createdAt}),t}),[])||[],setTimeout((function(){var e,n;o.length>10?(e=t.allHistory).unshift.apply(e,O(t.historyList.slice(2))):(n=t.allHistory).unshift.apply(n,O(t.historyList.slice(0)));t.isFetching=!1,t.isLoadingData=!1}),1500)):(t.$EventBus.$emit("toast",{type:"error"}),setTimeout((function(){t.isFetching=!1,t.isLoadingData=!1}),1500));case 11:case"end":return e.stop()}}),e)})))()},loadHistory:function(){this.fetchHistory()}},watch:{status:function(t){"startLoad"===t&&this.hasMoreData&&this.fetchHistory()}}},Zt=Yt,Xt=(n("95cf"),Object(v["a"])(Zt,Kt,Wt,!1,null,null,null)),Gt=Xt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ratingDiaInfo.show&&!t.isAPP||t.isAPP&&t.isLogout&&t.ratingDiaInfo.show?n("div",{staticClass:"chat-rating"},[n("div",{staticClass:"chat-rating-detail"},[n("div",{staticClass:"title"},[n("span",[t._v(t._s(t.$t("dialog.rating/title")))]),t.isAPP?n("button",{on:{click:t.logout}},[n("i",{staticClass:"icon-close"})]):n("button",{on:{click:t.close}},[n("i",{staticClass:"icon-close"})])]),n("div",{staticClass:"content",class:{"need-scroll":t.needScroll}},[n("dl",{staticClass:"rating-wrap"},[n("dd",{class:{active:t.rateBad,"show-animate":t.hasAnimate&&t.rateBad}},[n("button",{on:{click:function(e){return t.rate("bad")}}},[n("i",{staticClass:"icon-bad"}),n("span",[t._v(t._s(t.$t("dialog.rating/bad")))])])]),n("dd",{class:{active:t.rateGood,"show-animate":t.hasAnimate&&t.rateGood}},[n("button",{on:{click:function(e){return t.rate("good")}}},[n("i",{staticClass:"icon-good"}),n("span",[t._v(t._s(t.$t("dialog.rating/good")))])])])]),n("div",{staticClass:"textarea-wrap",class:{focus:t.isfocus}},[n("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.comment,expression:"comment",modifiers:{trim:!0}}],staticClass:"textarea-text",attrs:{maxlength:"300",placeholder:t.placeholderText},domProps:{value:t.comment},on:{focus:function(e){t.isfocus=!0},blur:[function(e){t.isfocus=!1},function(e){return t.$forceUpdate()}],input:function(e){e.target.composing||(t.comment=e.target.value.trim())}}}),t._v(" "),n("div",{staticClass:"max-tips"},[t._v(t._s(t.comment.length)+"/300")])])]),t.isAPP?n("div",{staticClass:"footer",class:{"is-bangs":t.isBangs}},[n("button",{attrs:{disabled:t.disBtn},on:{click:t.submit}},[t._v(" "+t._s(t.$t("dialog.submit"))+" ")])]):n("div",{staticClass:"footer"},[n("button",{staticClass:"cancel",on:{click:t.logout}},[t._v(" "+t._s(t.isLogout?t.$t("dialog.rating/logout"):t.$t("dialog.cancel"))+" ")]),n("button",{staticClass:"confirm",attrs:{disabled:t.disBtn},on:{click:t.submit}},[t._v(" "+t._s(t.$t("dialog.confirm"))+" ")])])])]):t._e()},Jt=[],te={data:function(){return{evaluate:"",comment:"",hasAnimate:!1,isfocus:!1,needScroll:!1}},mounted:function(){var t=this;window.addEventListener("scroll",(function(){t.isAPP&&(t.needScroll=window.innerHeight<690)}))},computed:Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP","isBangs","ratingDiaInfo"])),{},{rateBad:function(){return"bad"===this.evaluate},rateGood:function(){return"good"===this.evaluate},disBtn:function(){return!this.evaluate&&!this.comment},placeholderText:function(){return this.$i18n.t("dialog.rating/placeholder")},isLogout:function(){return this.ratingDiaInfo.isLogout}}),methods:{close:function(){this.evaluate="",this.comment="",this.hasAnimate=!1;var t=this.ratingDiaInfo.isLogout;this.$store.commit("zchat/setRatingState",!0),this.$store.commit("base/setRatingDiaState",{show:!1,isLogout:t})},submit:function(){var t=this.evaluate,e=this.comment;t&&f.a.sendChatRating(t),e&&f.a.sendChatComment(e),this.isLogout&&this.$EventBus.$emit("logout"),window.sensors.track("customer_sc_evaluate_confirm_click",{satisfaction_evaluate:t}),this.close()},logout:function(){this.isLogout&&this.$EventBus.$emit("logout"),this.close()},rate:function(t){var e=this;this.evaluate=t,this.hasAnimate=!0,clearTimeout(this.timer),this.timer=setTimeout((function(){e.hasAnimate=!1}),1500)}},watch:{"ratingDiaInfo.show":{handler:function(t){t&&window.sensors.track("customer_sc_evaluate_pop_expose")},deep:!0}}},ee=te,ne=(n("6692"),Object(v["a"])(ee,Qt,Jt,!1,null,null,null)),ie=ne.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.showPrechatDia?n("div",{staticClass:"dialog-wrap dialog-prechat-wrap"},[n("div",{staticClass:"dialog-wrap-detail"},[n("div",{staticClass:"title"},[n("span",[t._v(t._s(t.$t("dialog.prechat/title")))]),n("button",{on:{click:t.close}},[n("i",{staticClass:"icon-close"})])]),n("div",{staticClass:"content",class:{"need-scroll":t.needScroll}},[n("div",{staticClass:"input-wrap email"},[n("div",[t._v(t._s(t.$t("dialog.prechat/email")))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.email,expression:"formData.email"}],attrs:{type:"text",placeholder:t.emailText},domProps:{value:t.formData.email},on:{input:function(e){e.target.composing||t.$set(t.formData,"email",e.target.value)}}}),n("div",{staticClass:"error"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.emailError,expression:"emailError"}]},[t._v(t._s(t.$t("dialog.prechat/emailError")))])])]),n("div",{staticClass:"input-wrap phone"},[n("div",[t._v(t._s(t.$t("dialog.prechat/phone")))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.phone,expression:"formData.phone"}],attrs:{type:"text",maxlength:"25",placeholder:t.phoneText},domProps:{value:t.formData.phone},on:{input:function(e){e.target.composing||t.$set(t.formData,"phone",e.target.value)}}}),n("div",{staticClass:"error"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.phoneError,expression:"phoneError"}]},[t._v(t._s(t.$t("dialog.prechat/phoneError")))])])])]),t.isAPP?n("div",{staticClass:"footer",class:{"is-bangs":t.isBangs}},[n("button",{on:{click:t.submit}},[t._v(" "+t._s(t.$t("dialog.confirm"))+" ")])]):n("div",{staticClass:"footer"},[n("button",{staticClass:"cancel",on:{click:t.close}},[t._v(" "+t._s(t.$t("dialog.cancel"))+" ")]),n("button",{staticClass:"confirm",on:{click:t.submit}},[t._v(" "+t._s(t.$t("dialog.confirm"))+" ")])])])]):t._e()},re=[],oe={data:function(){return{emailError:!1,phoneError:!1,needScroll:!1,formData:{email:"",phone:""}}},mounted:function(){var t=this;window.addEventListener("scroll",(function(){t.isAPP&&(t.needScroll=window.innerHeight<690)}))},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP","isBangs","departmentId","showPrechatDia","locale"])),Object(a["d"])("zchat",["connection"])),{},{emailText:function(){return this.$i18n.t("dialog.prechat/emailPlaceholder")},phoneText:function(){return this.$i18n.t("dialog.prechat/phonePlaceholder")}}),methods:{close:function(){this.formData.email="",this.formData.phone="",this.emailError=!1,this.phoneError=!1,this.$store.commit("base/setPrechatDiaState",!1)},submit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.formData,i=n.email,s=n.phone,t.emailError=!f.a.EMAIL_REGEX.test(i),t.phoneError=!/^[0-9]{0,25}$/.test(s),window.sensors.track("customer_sc_customer_confirm_click"),!t.emailError&&!t.phoneError){e.next=6;break}return e.abrupt("return");case 6:"closed"===t.connection&&f.a.reconnect(),f.a.setVisitorInfo({email:i,phone:s,display_name:""},(function(e){if(!e){try{f.a.setVisitorDefaultDepartment(1*t.departmentId)}catch(n){}f.a.sendChatMsg(t.$i18n.t("base.hello"))}})),r=t.locale,setTimeout((function(){f.a.addTags([r],(function(){}))}),3e3),t.$store.dispatch("chats/updateChats",{type:"chat.wating"}),t.close(),t.$store.commit("base/setZchatBtnTime",+new Date);case 13:case"end":return e.stop()}}),e)})))()}}},ae=oe,ce=(n("1040"),Object(v["a"])(ae,se,re,!1,null,"46f03f16",null)),ue=ce.exports,le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agent-tips-msg maxwidth position"},[t.loading||!t.loading&&t.showQueueInfo?n("Avatar",{attrs:{type:"system"}}):t._e(),t.loading?n("div",{staticClass:"message-loading"}):t._e(),!t.loading&&t.showQueueInfo?[n("div",{staticClass:"message-text-wrap"},[n("div",[n("p",[t._v(t._s(t.$t("base.queue/connecting")))]),n("p",[t._v(t._s(t.queueInfo))]),t.showTicket?n("p",[t._v(t._s(t.$t("base.queue/desc")))]):t._e()]),t.showTicket?n("div",{staticClass:"ticket"},[n("a",{ref:"noopener noreferrer",attrs:{href:t.ticketUrl,target:"_blank"},on:{click:t.goTicketTrack}},[t._v(" "+t._s(t.$t("base.ticket"))+" ")])]):t._e()])]:t._e()],2)},he=[],de={data:function(){return{loading:!1,timestamp:1}},mounted:function(){this.timestamp=+new Date},components:{Avatar:function(){return n.e("chunk-2aa7f8ae").then(n.bind(null,"df3a"))}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["locale","sceneCode"])),Object(a["d"])("zchat",["queue_position","isZendeskChatting"])),{},{showTicket:function(){return this.queue_position>10},showQueueInfo:function(){return this.isZendeskChatting&&this.queue_position>0},queueInfo:function(){return"".concat(this.$i18n.t("base.queue/position")).concat(this.queue_position)},ticketUrl:function(){if(1*this.sceneCode===7)return Object(tt["a"])(this.locale);var t=Object(tt["b"])(this.locale);return"https://huobiglobal.zendesk.com/hc/".concat(t,"/requests/new")}}),methods:{goTicketTrack:function(){window.sensors.track("customer_sc_submit_system_click")}},watch:{showQueueInfo:function(t){var e=this;t&&(this.loading=!0,setTimeout((function(){e.loading=!1,e.$EventBus.$emit("toBottom")}),500))}}},fe=de,pe=(n("6acc"),Object(v["a"])(fe,le,he,!1,null,null,null)),me=pe.exports,ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ticketsInfo.length?n("div",{staticClass:"ticket"},[n("div",{ref:"ticketWrap",staticClass:"tickets__wrap"},t._l(t.ticketsInfo,(function(e){return n("a",{key:e.fId,ref:"noopener noreferrer",refInFor:!0,staticClass:"item",attrs:{href:t.getLink(e.fUrl),target:"_blank"}},[n("div",{staticClass:"item__img",style:{"background-image":"url("+e.fImageUrl+")"}}),n("p",[n("span",{staticClass:"item__text"},[t._v(" "+t._s(e.fShowName)+" ")])])])})),0),!this.isAPP&&t.showPage?n("a",{staticClass:"pagination",class:t.isNext?"next":"prev",on:{click:t.page}},[n("svg",{staticClass:"css-qqjy8b",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none"}},[n("path",{attrs:{d:"M12.586 17.586L14 19l7-7-7-7-1.414 1.414L17.172 11H2v2h15.172l-4.586 4.586z",fill:"#76808F"}})])]):t._e()]):t._e()},ve=[],be=(n("2b3d"),n("9861"),{name:"Ticket",props:{},data:function(){return{isNext:!0,showPage:!1}},computed:Object(r["a"])({},Object(a["d"])("base",["latestDomain","domainWhiteList","sceneCode","isAPP","visible","ticketsInfo"])),watch:{visible:function(t){t&&!this.isAPP&&this.initPage()}},methods:{toUrl:function(t){location.href=t},getLink:function(t){var e=function(t){var e={};try{e=new URL(t)}catch(n){e={}}return e},n=e(t),i=n.host,s=void 0===i?"":i;if(this.domainWhiteList.includes(s)){var r=e(document.referrer),o=r.host,a=void 0===o?"":o,c=a.substring(a.indexOf(".")+1)||this.latestDomain;return c?t.replace("hbg.com",c):t}return t},initPage:function(){var t=this.$refs.ticketWrap||{},e=t.offsetWidth,n=t.scrollWidth;this.showPage=n>e},page:function(){var t=this.isNext,e=t?278:-278;this.$refs.ticketWrap.scrollTo(e,0),this.isNext=!t}}}),we=be,_e=(n("c3b3"),Object(v["a"])(we,ge,ve,!1,null,"4c945ba8",null)),ye=_e.exports,$e={components:{QuestionTree:A,MessageList:Mt,ChatHistory:Ht,ChatHistoryH5:Gt,ChatRating:ie,PrechatForm:ue,Logout:w,QueuePosition:me,Tickets:ye},data:function(){return{showHistory:!0,showHistoryH5:!0,h5StartY:0,h5PullDownStatus:"",isMove:!1,referrer:""}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.referrer=document.referrer,t.$EventBus.$on("toBottom",t.toBottom),e.next=4,n.e("chunk-2d212b4b").then(n.t.bind(null,"aa0e",7));case 4:i=e.sent,s=i.default,t.callNative=s,r=document.querySelector(".message-list-container"),r&&r.addEventListener("click",(function(e){var n=e.target,i=n.tagName,s=n.dataset;"A"===i&&s&&s.url&&t.callNative("20010043",{url:s.url,titleBack:"{#返回#}"})}));case 9:case"end":return e.stop()}}),e)})))()},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(a["d"])("base",["isAPP","visible","config","latestDomain","domainWhiteList"])),Object(a["d"])("chats",["chats"])),Object(a["d"])("zchat",["queue_position"])),Object(a["d"])("config",["logoUrl"])),{},{chatsLength:function(){return this.chats.length}}),methods:{toBottom:function(){var t=this;this.$nextTick((function(){var e=t.$refs.messageListDOM;e&&(e.scrollTop=e.scrollHeight)}))},touchBegin:function(){this.h5StartY=event.touches[0].pageY},touchMove:function(){var t="";try{t=localStorage.getItem("HELP-TEMP-TOKEN")}catch(n){t=window["HELP-TEMP-TOKEN"]}if(t){if(this.isTop()&&event.touches[0].pageY-this.h5StartY>0){var e=event.touches[0].pageY-this.h5StartY;this.isMove=e>100,e>100&&e<=240&&(this.h5PullDownStatus="start"),e>240&&(this.h5PullDownStatus="release")}}else this.showHistoryH5=!1},touchEnd:function(){this.isTop()&&this.isMove&&(this.h5PullDownStatus="startLoad")},isTop:function(){var t=this.$refs.messageListDOM;return this.testtt=t.scrollTop,t&&t.scrollTop<=0},getWelcomeMsg:function(t){var e=this,n=new RegExp(/<a[^>]*href=[ '"]([^"]*)[' "][^>]*>(.*?)<\/a>/,"gi"),i=new RegExp(/http(s)?:\/\/(.*?)\//,"gi"),s=t.replace(n,(function(t){var s=n.exec(t)||[],r=s[1],o=s[2];n.lastIndex=0;var a=-1===t.indexOf("target"),c='<a href="'.concat(r,'" target="_blank" rel="noopener noreferrer">').concat(o,"</a>");return e.isAPP&&a&&(c='<a href="javascript:;" data-url="'.concat(r,'">').concat(o,"</a>")),c.replace(i,(function(t){var n=i.exec(t)||[];if(i.lastIndex=0,e.domainWhiteList.includes(n[2])){var s=(i.exec(e.referrer)||[])[2],r=s&&s.substring(s.indexOf(".")+1)||e.latestDomain;return i.lastIndex=0,r?t.replace("hbg.com",r):t}return t}))}));return s},zoomImg:function(t){var e=this;"IMG"===t.target.nodeName&&(this.imgArr=t.target.src,this.$nextTick((function(){e.isAPP?new u.a(t.target,{toolbar:!1,navbar:!1,title:!1}):window.open(e.imgArr,"_blank")})))}},watch:{chatsLength:function(){this.toBottom()}}},ke=$e,Ee=(n("10da"),n("25ce"),Object(v["a"])(ke,i,s,!1,null,null,null));e["a"]=Ee.exports},e95a:function(t,e,n){var i=n("b622"),s=n("3f8c"),r=i("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||o[r]===t)}},ebed:function(t,e,n){},ed8d:function(t,e,n){"use strict";n("da5f")},f0c5:function(t,e,n){},f505:function(t,e,n){t.exports=n.p+"img/icon-customer-h5.e82e81c1.svg"},fac0:function(t,e,n){},fafe:function(t,e,n){},fefc:function(t,e,n){"use strict";n("e1de")},ffdb:function(t,e,n){"use strict";n("288f")}}]);