/*AGENT_VERSION=3.3.7220308*/function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _typeof(t){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.TINGYUN=function(t,e){if(/(MSIE [0-8].\d+)/.test(navigator.userAgent)){return ;}function n(t){var e=!!t&&"length"in t&&t.length,n=_typeof(t);return"function"===n?!1:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function r(t,e,r){var i,o=0;if(t)if(n(t))for(i=t.length;i>o&&e.call(t[o],t[o],o)!==!1;o++);else for(o in t)if((r||Object.prototype.hasOwnProperty.call(t,o))&&e.call(t[o],t[o],o)===!1)break;return t}function i(t){var e=!1;try{/\{\s+\[native code\]/.test(Function.prototype.toString.call(t))&&(e=!0)}catch(n){}return e}function o(t){return JSON.parse(t)}function a(t){return JSON.stringify(t)}function s(t){return function(e){return"Array"===t&&Array.isArray?Array.isArray(e):Object.prototype.toString.call(e)==="[object "+t+"]"}}function c(t){return new Function("return "+t)()}function u(t){switch(_typeof(t)){case"object":if(!t)return null;if(t instanceof Array){var e=Uo.call(t);return r(e,function(t,n){e[n]=u(t)}),"["+e.join(",")+"]"}if(t instanceof Date)return t.getTime().toString();var n="";return r(t,function(t,e){Lo(t)||(n+=u(e)+":"+u(t)+",")}),n&&(n=n.substr(0,n.length-1)),"{"+n+"}";case"string":return Fo+t.replace(Go,"\\$1").replace(Yo,"\\n")+Fo;case"number":return isNaN(t)?null:t;case"boolean":return t;case"function":return u(t.toString());case"undefined":default:return'"undefined"'}}function f(){var t=zo&&zo.stringify;if(!Lo(t)||!i(t))return!1;var e=!0;try{var n=[Boolean,Number,String,Object,Array];r(n,function(t){return t.prototype.toJSON?(e=!1,!1):void 0})}catch(o){}return e}function l(){var t=zo&&zo.stringify;return Lo(t)&&i(t)}function d(){Io=l()?o:c,Po=f()?a:u}function p(t){return t&&Do(t)?Io(t):t}function h(t,e,n,r){return t.addEventListener(e,n,r)}function v(t,e,n){return t.attachEvent("on"+e,n)}function m(t,e){return Function.prototype.apply.apply(t,e)}function g(t,e){return function(){return t.apply(e,arguments)}}function y(t){return Wo?Wo(t):t}function _(t){var e=arguments.length;if(2>e||!t)return t;var n=Uo.call(arguments,1);return r(n,function(e){r(e,function(e,n){t[n]=e})}),t}function x(t,e){for(var n=-1,r=0,i=null==t?0:t.length,o=[];++n<i;){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}function b(t,e){return t?e?t.replace(/\{(\w+.?\w+)\}/g,function(t,n){return e[n]||""}).replace(/\{(\d+)\}/g,function(t,n){return e[n]||""}):t:""}function E(t,e,n){var r;if(null==t)return-1;var i=Object(t),o=i.length>>>0;if(0===o)return-1;var a=+n||0;if(Math.abs(a)===1/0&&(a=0),a>=o)return-1;for(r=Math.max(a>=0?a:o-Math.abs(a),0);o>r;){if(r in i&&i[r]===e)return r;r++}return-1}function T(t,e){var n=null==t?0:t.length;if(!n)return-1;for(var r=n;r--;)if(t[r]===e)return r;return r}function S(t){return setTimeout(t,0)}function A(t){return setTimeout(t,0,{__ty_ignore:!0})}function C(){}function k(){var t=window&&window.performance;return t&&t.timing&&t.timing.navigationStart&&t.now?Math.round(t.timing.navigationStart+t.now()):+new Date}function w(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}function O(t){return t?Do(t)?t.length:e.ArrayBuffer&&t instanceof ArrayBuffer?t.byteLength:e.Blob&&t instanceof Blob?t.size:t.length?t.length:0:0}function N(){this.events={}}function I(t,e){return setTimeout(t,e||0,{__ty_ignore:!0})}function P(t,e){bu[t]=e}function D(t){t=t||{},this._contexts=t.contexts||null,this._name=t.name}function R(){Eu.scope||(Eu.scope=new D({name:"ROOT"}))}function L(){R(),Eu.scope.setContext.apply(Eu.scope,arguments)}function j(){R(),Eu.scope.setExtraContext.apply(Eu.scope,arguments)}function H(t,e,n){if(t&&e){n||(n="scope");var r=e?e.getData():null;return r&&(t[n]=r),t}}function q(t,e,n){return n||(e===Oc?n=Rc:e===Nc&&(n=Lc)),"".concat(t,"_").concat(e||ku,"_").concat(n||wu)}function M(t){if(t&&jo(t)){var n=t.type,r=t.name,i=t.handler,o=t.options;if(!(null==Cu[n]||r&&E(Cu[n],r)<0||!Lo(i)||o&&!jo(o))){var a=q(n,r,o&&o.position);Ou[a]||(Ou[a]=[]),Ou[a].push(t),n===Ec&&(r===kc&&e.TINGYUN&&e.TINGYUN.inited&&Y({type:Ec,name:kc}),r===wc&&Eu.pageLoadEventEnd&&Y({type:Ec,name:wc}))}}}function B(t,e){M({type:Ec,name:t,handler:e})}function U(t,e,n){M({type:Tc,name:t,handler:e,options:n})}function F(t,e){M({type:Sc,name:t,handler:e})}function G(t){M({type:Ac,handler:t})}function Y(t){var e=t.type,n=t.name,i=t.hookPostion,o=t.args,a=q(e,n,i),s={exist:!1,results:[]};if(Ou[a]){s.exist=!0;var c=t.scope;c||(c=new D);try{r(Ou[a],function(t){var e=t.handler,n=t.options;n=n||{};var r=_(o||{},{scope:c}),i=e.call(c,r);s.results.push(i)})}catch(u){}}return s}function z(t,e){return Cu[t]&&E(Cu[t],e)>-1}function J(t){function e(){}return e.prototype=t,new e}function W(){try{return e.self!==e.top}catch(t){return!1}}function K(t){X(),ju=t||{},Hu=Nu(ju),_(Hu,{isGather:!1,fp_threshold:vu,fs_threshold:mu,dr_threshold:gu,trace_threshold:yu,pvid:Xo(),ref:Pu.URL,referrer:Pu.referrer,v:"3.3.7-huobi.1",av:"3.3.7-huobi.1",ua:(Lu||{}).userAgent,baseInfo:{}}),Bu={pvid:Hu.pvid,ref:Hu.ref,referrer:Hu.referrer,v:Hu.v,av:Hu.av,ua:Hu.ua},W()&&(Bu.ifr=1)}function V(t){_(Bu,t)}function X(){Hu={},ju={}}function $(){return e.navigator.userAgent.substring(0,256)}function Q(){return Fu}function Z(){return e.webkit&&e.webkit.messageHandlers&&e.webkit.messageHandlers.nbsBrowserAgent&&e.webkit.messageHandlers.nbsBrowserAgent.postMessage}function tt(t){return Do(t)||(t=Po(t)),t}function et(t,e){e=e||C;var n=new Image;Jo(n,na,function(){("loaded"==n.readyState||4==n.readyState)&&e(null)},!1),Jo(n,Qo,function(){e(null)},!1),Jo(n,$o,function(){e($o)},!1),n.src=t}function nt(t,e){var n=t.url,r=t.data,i=(t.header,t.callback),o=t.method,a=t.timeout,s=w(i),c=new XDomainRequest;c[ua]=!0,o=o||du,c.open(o,n),c.onload=function(){s(c.responseText),e()},c.onerror=function(t){s(t),e()},a&&(c.timeout=a),Gu(function(){o===du?c.send(tt(r)):c.send()})}function rt(t,e){var n=t.url,r=t.data,i=t.header,o=t.callback,a=t.method,s=t.timeout,c=w(o),u=new Du;u[ua]=!0,u.overrideMimeType&&u.overrideMimeType("text/html"),s&&(u.timeout=s),u.onreadystatechange=function(){4==u.readyState&&(c(u.responseText),e())},u.onerror=function(){c(),e()};try{a=a||du,u.open(a,n,!0);for(var f in i)u.setRequestHeader(f,i[f]);a===du?u.send(tt(r)):u.send()}catch(l){e()}}function it(t,e){var n=t.url,r=t.data,i=(t.header,t.callback),o=Lu.sendBeacon(n,tt(r));o&&(i&&i(),e())}function ot(t,n){var r=t.url,i=t.data,o=t.callback,a={url:r,header:{"content-type":"text/plain;charset=UTF-8"},body:tt(i)},s={type:0,params:{ri:a}},c=tt(s);try{e.webkit.messageHandlers.nbsBrowserAgent.postMessage(c)}catch(u){}o&&o(),n()}function at(t){this.size=t||100,this.queue=[],this.running=!1}function st(){Yu=Su=rt,zu=!1,Mu.initiator=nu}function ct(t){Au=new at(t)}function ut(t){Au.add(t)}function ft(){var t=this;t.xhrs={},t.errs=[],N.call(t)}function lt(){var t="";try{t=e.location.protocol}catch(n){}return E(nf,t)<0&&(t=ef),t}function dt(t){if(!t)return null;var e=t.indexOf(":");return e>-1&&(t=t.substring(0,e)),t}function pt(t){vt(t,rf)}function ht(t){vt(t,of)}function vt(t,e){var n="ok";return t?void e.push(t):n=e.length?e.join("\n"):n}function mt(t){try{return p(t)}catch(e){pt(e&&e.message)}return null}function gt(t,e,n){if(null==t[e]||Ro(t[e]))Ro(t[e])?t[e].push(n):t[e]=n;else{var r=t[e];t[e]=[r],t[e].push(n)}}function yt(t){return t.send_protocol?t.send_protocol:t.pageProtocol!==tf&&/^https/i.test(t.pageProtocol)?ef:tf}function _t(t){if(!t||!Do(t))return"";var e,n=t.indexOf("?");return n>=0&&(e=t.substring(n+1)),e}function xt(t){var e=_t(t),n=Tt(e);return{queryObj:n,queryString:e}}function bt(t){var e=_t(t);return Tt(e)}function Et(t){var e={};return t=t||"",Do(t)&&t?e=Tt(t):e}function Tt(t){var e={};return t&&r(t.split("&"),function(t){var n=t.split("="),r=St(n[0]),i=St(n[1]);if(Do(i)&&window.isNaN(i)){var o=mt(i);null!=o&&(i=o)}r&&null!=i&&gt(e,r,i)}),e}function St(t){try{return decodeURIComponent(t)}catch(e){}return null}function At(t){var e=[];return r(t,function(t,n){var r=y(n)+"="+y(t);e.push(r)}),e.join("&")}function Ct(t,e){var n=At(e);return t+=(t.indexOf("?")>0?"&":"?")+n}function kt(t,e){return e?Xu+"//"+t:t}function wt(t){Xu=yt(t)}function Ot(){e.TINGYUN_RELEASE&&e.TINGYUN_RELEASE.id&&(Hu.releaseId=e.TINGYUN_RELEASE.id)}function Nt(t){t[0]&&(Bu.sid=t[0]),t[1]&&(Bu.__s=+t[1])}function It(){delete Bu.sid,delete Bu.__s}function Pt(){return Hu.sessionMode==Jc}function Dt(){var t=$u(Ms);return t?t.split(Fs):null}function Rt(t){t&&3===t.length&&Qu(Ms,t.join(Fs))}function Lt(){var t=jt();Nt(t)}function jt(){var t=k(),e=[Xo(),t,t];return Rt(e),e}function Ht(){var t=k(),e=Dt();qt(e)?Lt():(e[2]=t,Rt(e))}function qt(t){return!t||3!==t.length||k()-+t[2]>Us}function Mt(){var t=$u(Bs);return t?t:Qu(Bs,Xo())}function Bt(){return e.TINGYUN&&e.TINGYUN.uid?e.TINGYUN.uid:$u(qs)}function Ut(t,n){if(null!=t){var r=Bt();null!=r&&t!==r&&Lt(),e.TINGYUN.uid=t,n&&n.noStore||Qu(qs,t)}}function Ft(t){null!=t&&Qu(Bs,t)}function Gt(){var t={did:Mt()},e=Bt();return e&&(t.uid=e),t}function Yt(t){var e=!0;if(t.beacon_config&&jo(t.beacon_config)){var n=dt(t.pageProtocol),r=n&&t.beacon_config[n];r&&(t.beacon=r,e=!1)}t.relativeBeaconProtocol=e}function zt(t){var n=Gt(),r=_({url:e.location.href},Bu,n,t||{},Hu.baseInfo,Ku||{});return Ot(),Hu.releaseId&&(r.rid=Hu.releaseId),r}function Jt(t){var e=Wt();return t=zt(t),{beacon:e,query:t}}function Wt(){return kt(Hu.beacon,Hu.relativeBeaconProtocol)}function Kt(t){var e=t.beacon,n=t.path,r=t.query;return Ct("".concat(e).concat(n),r)}function Vt(t,e){var n=!1;return r(t,function(t){var r=e.call(this,t);return r?(n=!0,!1):!0}),n}function Xt(){return H({type:wa,optCustomParam:Eu.opt_custom_param,info:Mu},Eu.scope)}function $t(t,e){if(t){Pt()&&Ht(),e=e||{};var n=e.requestInfo;n||(n=Jt()),_(n.query,e.query||{},{ps:e.crossPage||t.type===Da&&t.subType===Ha?1:0,__r:k()}),n.path="/action";var i=[e.commonActionInfoMessage?e.commonActionInfoMessage:Xt(),t];n.data=i;var o=Y({type:Ac,args:n,scope:Eu.scope});if(!o.exist||!Vt(o.results,function(t){return t===!1})){af&&(af=!1,d());try{var a=[];r(n.data,function(t){var e=Qt(t);e&&a.push(e+Po(t))});var s=a.join("\n"),c=Kt(n);Wu.emit("send",c,s,function(){e.cb&&e.cb.call(null,t)})}catch(u){}}}}function Qt(t){var e="";return e=t.type===wa?Ya:t.type===Oa?Ma:t.type===Na?Ba:t.type===Pa?Fa:t.type===Ia?Ua:t.type===Da?Ga:t.type===La?za:t.type===$c?Qc:t.type}function Zt(t,e){var n;return t&&(n=!0,r(t,function(){return n=!1},e)),!!n}function te(){var t={};return r(uf,function(e){t[e]={current:0,children:0}}),t}function ee(t,e){r(t,function(t){t.cid===e.id&&(t.items=e.items||[])})}function ne(t,e){r(t,function(t){r(e,function(e){t.cid===e.id&&(t.state||(t.state=e.state),t.items=e.items||[])})}),r(e,function(t){ne(t.items,t.children)})}function re(t){t=t||{},this.id=++Eu.uniqueId,this.parent=t.parent||null,this.children=[],this.name=t.name||"",this.type=t.type||Oa,this.subType=this.type===Oa?t.subType||"click":t.subType,this.items=[],this.remain=te(),this.s=t.s||k(),this.e=null,this.data=t.data,this.state=Wa,this.crossPage=t.crossPage||!1,this.callback=t.callback||{},this.endLock=t.endLock,this.registerTimeout(),this.closed=!1,this.isTimeout=!1,this.cleared=!1,this.stateChanged=!1,this.actionCount={ajax:this.type===Na?1:0,iframe:this.type===Pa?1:0},this.sent=!1,this.sendOptions={},this.speBinded=!1,this.spe=null,this.waitingSpeEnd=!1,this.waitingSpeTimer=null,null!=this.parent&&this.parent.children.push(this),this.eventData=null,this.resource={handler:{},loaded:{},srcs:{}},this._ctx={}}function ie(t){Nt([t.id,t.startTime]),ff=t}function oe(t,e,n){if(!Pt()){var r={id:t||Xo(),startTime:k()};return Do(e)&&(r.name=e),Hu.session_handler&&Hu.session_handler.create&&Hu.session_handler.create.call(this,r),ie(r),ce(Kc,n),r}}function ae(t,e){Pt()||(Hu.session_handler&&Hu.session_handler.end&&(!t&&ff&&(t=ff.id),Hu.session_handler.end.call(this,t)),ce(Xc,e),It(),ff=null)}function se(t){Pt()||ff&&jo(t)&&ce(Vc,t)}function ce(t,e){if(ff){var n=ff,r=n.id,i=n.startTime,o=n.name,a={type:Wc,id:r,time:k(),startTime:i};o&&(a.name=o),e&&(a.scope={contexts:e}),re.buildImmediateAction(Wc,t,a)}}function ue(){if(Hu.session_handler&&Hu.session_handler.init){var t;try{t=Hu.session_handler.init.call(null)}catch(e){}t&&ie(t)}}function fe(t){var e={},n={},r=xt(t),i=r.queryObj,o=r.queryString;return i&&(e=le(i,Hu.requestParamKeys[da],Hu.requestParamKeys[pa]),n[ha]=ve(i,Hu.optCustomParamRules[ha],!0)),{requestParams:e,optCustomParams:he(n),operaAllParam:o}}function le(t,e,n){var i={};return t&&e&&e.length&&e.length>0&&r(e,function(e){var n=t[e];null!=n&&gt(i,e,n)}),t&&n&&n.length&&n.length>0&&r(n,function(e){var n=de(_a,e),r=n(t);null!=r&&gt(i,e,r)}),i}function de(t,e){var n=t+"."+e;if(df[n])return df[n];var i=(e||"").split("."),o="";e&&0!==e.indexOf("[")&&(o=".");var a=t;r(i,function(t,e){0===e&&(a+=o),a+=t.indexOf("-")>-1&&0!==t.indexOf("[")&&t.indexOf("]")!==t.length-1?"['"+t+"']":(e>0?".":"")+t});var s;try{s=new Function(t,"try{return "+a+";}catch(e){}return null;")}catch(c){s=C}return df[n]=s,s}function pe(t){return t+="",t&&t.substr(0,128)||""}function he(t){var e={};return r(t,function(t,n){Zt(t)||(e[n]=t)}),e}function ve(t,e,n){var i={};return t&&e&&e.length&&e.length>0&&r(e,function(e){var r=t[e];if(null!=r)gt(i,e,r);else if(n){var o=de(_a,e);r=o(t),null!=r&&gt(i,e,r)}}),i}function me(t){pf&&t()}function ge(t){return function(){pf&&t.apply(this,arguments)}}function ye(){pf=!1}function _e(t){return t.loadEventEnd||t._end}function xe(e){var n=e.performance||{},r=n.timing,i=r&&r.navigationStart?r.navigationStart:t;return{performance:n,timing:r,startTime:i}}function be(t,n){var i=xe(n),o=i.performance,a=i.timing,s=i.startTime,c=0;if(xu[jc]&&xu[jc]>0?(c=xu[jc],t.__fp=mf):o.getEntriesByName&&a?(c=a.domLoading,r(xu.resources,function(t){var e=o.getEntriesByName(t);if(1===e.length){var n=e[0].responseEnd;n>c&&(c=n)}}),c-=s,t.__fp=_f):e.TINGYUN&&e.TINGYUN[rc]&&(c=e.TINGYUN[rc]-s,0>c&&(c=0),t.__fp=xf),!c||0>=c){if(n.chrome&&n.chrome.loadTimes){var u=n.chrome.loadTimes();u&&u.firstPaintTime&&(c=1e3*u.firstPaintTime-s,t.__fp=gf)}else a&&a.msFirstPaint&&(c=a.msFirstPaint-s,t.__fp=yf);(!c||0>=c)&&(c=0,t.__fp=vf)}return Math.round(c)}function Ee(t,n){var i=xe(n),o=i.performance,a=i.timing,s=i.startTime,c=t.fp||0;if(t.__fs=Cf,xu[Hc])c=xu[Hc],t.__fs=Ef;else if(xu.lcpStopTime)c=xu.lcpStopTime-s,t.__fs=Tf;else if(Te()){var u=xu.imageResources||[],f=e.innerHeight,l=e.innerWidth;f||(f=Pu.documentElement.clientHeight),l||(l=Pu.documentElement.clientWidth);var d=[];u.length>0?r(u,function(t){Ae(t.element,f,l)&&d.push(t)}):Lo(o.getEntriesByName)&&r(Pu.querySelectorAll("img"),function(t){Ae(t,f,l)&&d.push({element:t})});var p=(a.loadEventEnd||Wu.loadEventEnd)-s;r(d,function(e){if(e.loadTime){var n=e.loadTime-s;n>c&&(c=n,t.__fs=Af)}else if(e.element&&e.element.src){var r=o.getEntriesByName(e.element.src);if(r.length){var i=r[0],a=i.responseEnd;i.fetchStart<=p&&a>c&&(c=a,t.__fs=Sf)}}})}return c<=t.fp&&(c=t.fp||0,t.__fs=Cf,0>=c&&(c=0,t.__fs=bf)),Math.round(c)}function Te(t){var e=!0,n=Pu.createElement("img");return n.getBoundingClientRect||(e=!1),e}function Se(t){if(!t)return!1;if(!Hu.fs_resources||0===Hu.fs_resources.length)return!0;var e=!1;return r(Hu.fs_resources,function(n){return t.indexOf(n)>-1?(e=!0,!1):void 0}),e}function Ae(t,e,n){return t.src&&Se(t.src)&&Ce(ke(t),e,n)&&!we(t)}function Ce(t,n,r){if(t){var i=e.pageYOffset,o=t.top+(0===i?0:i||Pu.scrollTop||0)-(Pu.clientTop||0);if(o>=n)return!1;var a=t.left;return a>=0&&r>a}return!1}function ke(t){if(Q())return Lo(t.getBoundingClientRect)?t.getBoundingClientRect():void 0;var e;try{e=t.getBoundingClientRect?t.getBoundingClientRect():void 0}catch(n){}return e}function we(t){return cf.reliableHiddenOffsets()?t.offsetWidth<=0&&t.offsetHeight<=0&&!t.getClientRects().length:Oe(t)}function Oe(t){for(;t&&1===t.nodeType;){if("none"===Ne(t)||"hidden"===t.type)return!0;t=t.parentNode}return!1}function Ne(t){return t.style&&t.style.display}function Ie(t,e){var n=xe(e),r=n.timing,i=n.startTime,o=0;r&&(o=r[ts]||r.domInteractive||r.domLoading||o),0>=o?(Wu.domContentLoadedEventStart?(o=Wu.domContentLoadedEventStart,t.__dr=Of):(o=Wu._end,t.__dr=Nf),0>=o&&(t.__dr=kf)):t.__dr=wf;var a=o-i;return 0>a&&(a=0),Math.round(a)}function Pe(e,n,r){e.loadEventEnd=e.le;var i=n.performance&&n.performance.timing||{},o=i.navigationStart||t,a=0;if(r&&r.hasChildType(Na))a=k()-o;else{var s=(i.loadEventEnd||Wu.loadEventEnd)-o,c=[e.fs,e.dr,e.fp,s];a=Math.max.apply(null,c)}return Math.round(a)}function De(t,e){var n=t.fp||0,r=xe(e),i=r.startTime,o=k()-i-n;return 0>o&&(o=0),o}function Re(e){function n(t){return a[t]>0?a[t]-s:0}var i={},o=e.performance||{},a=o.timing||{},s=e.TINGYUN&&e.TINGYUN.globalStart||t,c=e.TINGYUN&&e.TINGYUN.currentAgent||Wu;if(a){me(function(){var t=hf.t={};r(a,function(e,n){Lo(e)||(t[n]=e)},!0)}),s=a.navigationStart,i={ns:s,f:n(Xa),qs:n($a),rs:n(Qa),re:n(Za),os:n(ts),oe:n(es),oi:n(ns),oc:n(rs),ls:n(is),le:n(os),tus:n(as),tue:n(ss)};var u=n(cs),f=n(us),l=n(fs),d=n(ls),p=n(ds),h=n(ps);if(i.cs=p,i.ce=h,i.ds=u,i.de=f,(d-l>0||d>0)&&(i.es=l,i.ee=d),0==i.le){var v=_e(c);i.ue=v-s}c&&(c._le=i.ue||i.le),a[hs]?i.sl=n(hs):i.sl=0}else i={t:s,le:_e(c)-s};return i.je=c&&c.errs&&c.errs.length||0,i}function Le(t){if(!t)return{};var e=Re(t);return e.fp=be(e,t),e.dr=Ie(e,t),e.fs=Ee(e,t),e.le=Pe(e,t),je(e)}function je(t){var e={f:t.f,fp:t.fp,fs:t.fs,dr:t.dr,le:t.le,loadEventEnd:t.loadEventEnd,je:t.je,load:t.load};return _(e,Eu.pageServerData),Eu.iframeMetric=e,e}function He(){Eu.enableLCPObserver=!1;try{r(Eu.performanceObserver,function(t){t&&t.disconnect()})}catch(t){}}function qe(){xu.lcpStopTime=k(),Eu.enableLCPObserver=!1;try{var t=Eu.performanceObserver[Hc];t&&t.disconnect()}catch(e){}}function Me(){var t=fe(Hu.ref);Eu.pageUrlInfo=t,Eu.opt_custom_param=t.optCustomParams}function Be(t,e,n){if(!n)try{n=e&&window[e]||Pu.cookie||""}catch(r){}if(n){var i=n.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?i[3]:null}return null}function Ue(t,e,n,r,i){var o=t+"="+e;if(n){var a=new Date;a.setTime(a.getTime()+1e3*n),o+=";expires="+a.toGMTString()}r&&(o+=";path="+r),(i||Pu).cookie=o}function Fe(t){var e,n;if(t)if(0===t.indexOf(Sa)){var r=t.substring(Sa.length);try{n=Pf.decode(r),e=mt(n)}catch(i){}}else{try{n=decodeURIComponent(t),e=mt(n)}catch(i){}if(!e)try{n=decodeURIComponent(n),e=mt(n)}catch(i){pt(i&&i.message)}}return e}function Ge(){if(!Hu.pageServerData){var t=Ye(),e={};t&&jo(t)&&(e.s_id=t.id,e.s_tname=t.tname,e.s_tid=t.tid,e.s_rid=t.rid,e.s_duration=t.duration,"user"in t&&(e.s_user=t.user,Ut(t.user)),"bid"in t&&(e.s_bid=pe(t.bid)),"ber"in t&&(e.s_ber=t.ber),"isError"in t&&(e.s_isError=t.isError)),Hu.pageServerData=e}}function Ye(){var t={},e=Be(ba,xa);return e&&(t=Fe(e),Ue(ba,"",-1e3,"/")),t}function ze(t){var e={};if(t){var n=[mc,gc,yc,_c,xc];r(t.split(""),function(t,r){e[n[r]]="1"===t})}return e}function Je(t){var e={};return r(t,function(t){t&&E(e[t.type]||[],t.key)<0&&(e[t.type]=e[t.type]||[]).push(t.key)}),e}function We(t){return Ve(t,!0)}function Ke(t,e){return t in Hu&&Hu[t]>0?Hu[t]:e}function Ve(t,e){return t in Hu?1==Hu[t]:e}function Xe(t,e){return t in Hu?Hu[t]:e}function $e(t){K(t),_(Hu,{requestParamKeys:Je(Hu.request_param_keys),optCustomParamRules:Je(Hu.opt_custom_param_rule),corsDomains:Xe("cors_domains",[]),ignoreNoFilePropError:We("ignore_err"),debuggable:We("debug"),sessionTimeout:Ke("session_timeout",Us),collectAllParam:ze(Hu.collect_all_param),routerEnable:We("router_enable"),hook_auto_event:We("hook_auto_event"),hook_timer:Ve("hook_timer",!1),hook_iframe:We("hook_iframe"),hook_cross_page:We("hook_cross_page"),hook_inline_event:We("hook_inline_event"),inline_event_associate_threshold:Ke("inline_event_associate_threshold",Hs),script_event_associate_threshold:Ke("script_event_associate_threshold",bc),spaMetricEnable:We("spa_metric_enable"),lcpEnable:We("lcp_enable"),pageLoadDelay:Ke("page_load_delay",Mc),resourceWaitTime:Ke("resource_wait_time",Bc),resourceAssociateThreshold:Ke("resource_associate_threshold",Uc),eventResources:Xe("event_resources",[]),eventResourcesIgnore:Xe("event_resources_ignore",[]),fs_resources:Xe("fs_resources",[]),sessionMode:Xe("session_mode",Jc),exposeOriginError:We("expose_origin_error"),ajaxBlacklist:Xe("ajax_blacklist",[]),eventTimeout:Ke("event_timeout",ka),configLoad:Ve("config_load",!1),configLoadUri:Xe("config_load_uri",fu),configLoadInterval:Ke("config_load_interval",cu),configLoadTimeout:Ke("config_load_timeout",uu),console_debug:Ve("console_debug",!1),set_timeout_max_depth:Ke("set_timeout_max_depth",vs),mpaas_rpc:We("mpaas_rpc"),mpaas_rpc_api:Xe("mpaas_rpc_api",pu),req_capacity:Ke("req_capacity",hu),x_server_switch:We("x_server_switch"),collect_noajax_hashroute:Ve("collect_noajax_hashroute",!1),upload_timeout_ajax:Ve("upload_timeout_ajax",!1),hook_xhr_setrequestheader:Ve("hook_xhr_setrequestheader",!0),router_event_delay:Ke("router_event_delay",ic),monitor_dom_mutation:Ve("monitor_dom_mutation",!0),user_action_timeout:Ke("user_action_timeout",zs)});var n=Hu.apm_headers||[];Hu.apm_arms&&E(Hu.apm_headers,Qs)<0&&n.push(Qs),Hu.apmHeaders=n,r(Hu.corsDomains,function(t){return"*"===t?(Hu.apmEnableAllCorsDomains=!0,!1):!0}),r(Df,function(t){ju[t]&&(Hu.baseInfo[t]=ju[t],e[sa][t]=ju[t])});try{Hu.baseHref=(document.getElementsByTagName("base")[0]||{}).href}catch(i){}}function Qe(){if(Hu.appKey&&!Z()&&st(),Hu.pageProtocol=lt(),wt(Hu),Yt(Hu),V(Gt()),Pt()){var t=Dt();qt(t)&&(t=jt()),Nt(t)}else ue();Ge(),Ot(),Me()}function Ze(){return Hu}function tn(t){function e(t,e,r){var i=r||"log",o=n[t]||(n[t]={});o[i]=o[i]||"",o[i]+=e}var n={},i=pt();if(e("Status",i,"ok"!==i),e("Debug",ht()),r(Rf,function(t,n){e("Timeline",n+": "+t.toString())}),!t&&Lf)console.log("[TingYun Agent Diagnosis]\n"),r(n,function(t,e){var n=console[e];r(n,function(t,e){console[e](t)})});else{if(t!==ca)return Po(n);Ru.href=Ru.href+"#"+Po(n)}}function en(t,e,n){t&&t.context&&t.context.parent&&(t.pcid=t.context.parent.id,t.context.parent.updateRemain(1,e),t.context.parent.items.push(t.context.data),n&&t.context.parent.children.push(t.context))}function nn(t){if(!t)return!1;var e=Hu.eventResources.length>0,n=Hu.eventResourcesIgnore.length>0;return e&&n?rn(t)&&on(t):e?rn(t):n?on(t):!0}function rn(t){var e=!1;return r(Hu.eventResources,function(n){return t.indexOf(n)>-1?(e=!0,!1):void 0}),e}function on(t){var e=!0;return r(Hu.eventResourcesIgnore,function(n){return t.indexOf(n)>-1?(e=!1,!1):void 0}),e}function an(t){return t&&(t.type===Da||t.type===Oa&&t.subType!==Cs)}function sn(t){var e=jf.indexOf(t.nodeName)>-1&&nn(t.src)&&!we(t);if(e){var n=Eu.recentFinishedAjaxContext;if(n&&n.data){var i=k()-n.data.end;if(i<=Hu.resourceAssociateThreshold){var o=re.getRootContext(n,function(t){return t.type===Da||t.type===Oa&&!t.subType===Cs});o&&o.addResource(t)}}}r(t.childNodes,sn)}function cn(){if(Hu.spaMetricEnable&&Lo(window.MutationObserver)){var t=document.getElementsByTagName("body"),e=t&&t[0];if(e){var n={childList:!0,subtree:!0},i=function(t){r(t,function(t){r(t.addedNodes,sn)})};try{lf=new MutationObserver(i),lf.observe(e,n)}catch(o){}}}}function un(){var t=Pu.getElementsByTagName("img");r(t,function(t){t.complete||t[ec]||(t[ec]=!0,Jo(t,Qo,function(){xu.imageResources.push({loadTime:k(),element:t})}))})}function fn(t){var e=Pu.createElement("script");e.type="text/javascript";try{e.appendChild(Pu.createTextNode(t))}catch(n){e.text=t}Pu.getElementsByTagName("head")[0].appendChild(e)}function ln(){function t(t){try{var e=t.getEntries();e&&r(e,function(t){t.entryType===Hc&&Eu.enableLCPObserver?xu[Hc]=t.renderTime||t.loadTime:t.entryType===jc&&t.name===qc&&(xu[jc]=t.startTime)})}catch(n){}}if(e.PerformanceObserver){var n=[jc];Hu.lcpEnable&&n.push(Hc);var i=[],o=e.PerformanceObserver.supportedEntryTypes||[];if(r(n,function(t){o.indexOf(t)>-1&&i.push(t)}),me(function(){hf.et=i}),0!=i.length)try{r(i,function(n){Eu.performanceObserver[n]=new e.PerformanceObserver(t),Eu.performanceObserver[n].observe({type:n,buffered:!0})})}catch(a){}}}function dn(t){ln(),Mf.on(Qo,w(function(){n();var e=k();me(function(){hf.load=e}),t.loadEventEnd=e,clearInterval(qf)})),r([Qo,Zo,ta,ea],function(t){Jo(e,t,function(e){me(function(){(hf.e[t]||(hf.e[t]=[])).push(k())}),Mf.emit(t,e)})});var n=w(function(){Hu.monitor_dom_mutation&&cn();var n=k();if(me(function(){hf.end=n}),t.domContentLoadedEventStart=n,Q()&&e.performance&&e.performance.getEntriesByName){if(!Pu.querySelectorAll)return;xu.resources=xu.resources||[],r(Pu.querySelectorAll("head>link,head>script"),function(t){var e;"LINK"==t.tagName?e=t.href:"SCRIPT"!=t.tagName||t.defer||t.async||(e=t.src),e&&xu.resources.push(e)})}});if(Q()&&Jo(Pu,ia,n),Jo(Pu,na,function(t){Pu.readyState===ra&&n()}),(!Q()||e.performance&&!e.performance.getEntriesByName)&&(qf=setInterval(un,nc)),!Q())try{fn("if(window.TINGYUN) {window.TINGYUN.".concat(rc,"=+new Date();}"))}catch(i){}}function pn(t){return Hf.call(t)}function hn(t){var e={},n=t.split(":");if(!n)return e;if(1===n.length)e.filename=n[0],e.lineno=0,e.colno=0,e.resolveLevel=Zc;else if(n.length>=2){var r,i=n[n.length-1],o=n[n.length-2],a=!isNaN(+i),s=!isNaN(+o);a&&s?(r=2,e.lineno=+o,e.colno=+i,e.resolveLevel=eu):a?(r=1,e.lineno=+i,e.colno=0,e.resolveLevel=tu):(r=0,e.lineno=0,e.colno=0,e.resolveLevel=Zc),e.filename=(n.slice(0,n.length-r)||[]).join(":")}return e}function vn(t){if(t&&(t=pn(t))){var e;if(0===t.indexOf("at ")){var n=t.indexOf("("),r=t.indexOf(")");if(n&&r){var i=n+1;i>r&&(i=r);var o=t.substring(i,r);o&&(e=hn(o))}}else if(t.indexOf("@")>-1){var a=t.split("@");a[1]&&(e=hn(a[1]))}return e}}function mn(t){this.limit=t,this.reset()}function gn(t,e,n,r,i){return String(t)+String(e)+String(n)+String(r)+String(i)}function yn(t,e,n,r){return String(t)+String(e)+String(n)+String(r)}function _n(t,e,n,r,i,o,a,s){var c=this;c.id=t,c.time=k(),c.msg=e,c.lineno=r,c.colno=i,c.filename=n,c.count=1,c.stack=o&&o.stack||"",c.module=a,c.trigger=s||Gf,c.error=o,c.fix();var u=yn(e,r,i,a),f=zf[u];c.ep=f?0:1,zf[u]=!0,c.fep=0,c.trace={},this.recordFileName()}function xn(e){var n=function(t){var e=[];return r(t,function(t){e.push(t.toObject())}),e}(Yf.c);if(!n||!n.length)return null;var i={fu:Uf?Uf:Uf++,os:parseInt((k()-(xu.pfStart||t))/1e3)};_u.ulabel&&(i.ulabel=_u.ulabel),re.buildImmediateAction(La,null,null,{actionOptions:_(i,{items:n})}),Yf.reset()}function bn(t,e,n,i,o,a,s){if(e||!Hu.ignoreNoFilePropError){var c=!1;if(r(Hu.domains,function(t){return c=t.test(e),c?!1:void 0}),!c){var u=o&&o.moduleId,f=gn(e,t,n,i,u),l=Yf.get(f);l?l.increase():(l=new _n(f,t,e,n,i,o,u,a),Yf.add(f,l),Wu.errs&&Wu.errs.push(l));var d=l.initTraceInstance();l.triggerActionHook(d);try{d.scope.setContext(s)}catch(p){}l.trace[d.id]={time:d.time,scope:d.scope}}}}function En(){var t=e.onerror;e.onerror=function(e,n,r,i,o){return bn(e,n,r,i,o),Lo(t)?t.apply(this,arguments):void 0},e.onerror._ty=!0}function Tn(){var t=e.onerror;t&&t._ty||En()}function Sn(t,e){if(t){var n=t.message||"",i=t.stack,o="",a=0,s=0;if(i){var c,u={},f=i.split(/\n/);r(f,function(t,e){var n=vn(t);if(!n)return!0;var r=n.resolveLevel;if(r===eu){if(n.filename&&n.lineno>0&&n.colno>0)return c=n,!1}else u[r]||(u[r]=n)}),c||(c=u[tu]||u[Zc]),c&&(o=c.filename,a=c.lineno,s=c.colno)}bn(n,o,a,s,{stack:i},Ff,e)}}function An(){var t=Ko();return t?En():Jo(e,$o,function(t){var n,r,i,o,a;(t instanceof e.Event||e.ErrorEvent&&t instanceof e.ErrorEvent)&&(n=t.message||t.error&&(t.error.message||t.error.constructor.name)||"",r=t.lineno||0,i=t.colno||0,o=t.filename||t.error&&t.error.filename||t.target&&t.target.baseURI||"",a=t.error),bn(n,o,r,i,a)}),Mf.on([Qo,Zo,ta,ea],function(t){xn()}).on(Qo,function(){t&&Gu(Tn)}),setInterval(xn,Bf,!0)}function Cn(t){return Lo(t)?t.apply(this):t}function kn(t){if(t&&jo(t)){var e=t.name,n=t.msg,r=t.status,i=t.context,o=Cn(e),a=Cn(n),s=Cn(r),c=Cn(i),u={type:$c,name:o,time:k()};u.name&&(a&&(u.msg=a),s&&(u.status=s),c&&jo(c)&&(u.scope={contexts:c}),re.buildImmediateAction($c,null,u))}}function wn(t){t=t||{},this._capacity=t.capacity||10,this._cache={},this._cacheKeys=[],this._size=0}function On(t,e,n){if(t&&n&&Lo(n)){var r=t[e];if(!r||!r._wrapped){var i=n(r,e);return i&&(i._wrapped=!0),t[e]=i,i}}}function Nn(t,n){return function(r){if(e[Aa].hook&&e[Aa].hook.eventCb&&Mn(r)){var i={originalCallback:t,eventHandlerType:n};return e[Aa].hook.eventCb.call(this,arguments,i)}return t.apply(this,arguments)}}function In(t,e,n){return n===Kf?Nn(t,e):(t.handleEvent=Nn(t.handleEvent,e),t)}function Pn(t){return Lo(t)}function Dn(t){return jo(t)&&Lo(t.handleEvent)}function Rn(t){var e;return Pn(t)?e=Kf:Dn(t)&&(e=Vf),{isValid:t&&e,listenerType:e}}function Ln(t){return function(){var e=arguments[0],n=arguments[1],r=arguments[2],i=!0;r&&jo(r)&&r[Es]&&(i=!1);var o=Rn(n),a=o.isValid,s=o.listenerType;if(i&&Wf.indexOf(e)>-1&&a){var c;if(n[Zs]&&n[Zs][this])c=n[Zs][this];else{var u=In(n,ks,s);s===Kf&&(n[Zs]||(n[Zs]={},n[Zs][tc]=0),n[Zs][this]={listener:u,options:arguments[2]},n[Zs][tc]++,c=n[Zs][this])}c&&(c.listener&&(arguments[1]=c.listener),c.options&&(arguments[2]=c.options))}return t&&t.apply(this,arguments)}}function jn(t){return function(e,n){var r;try{r=t&&t.apply(this,arguments)}finally{try{if(n&&Wf.indexOf(e)>-1){var i=n[Zs];i&&i[this]&&i[this].listener&&(null!=i[this].options?this.removeEventListener(e,i[this].listener,i[this].options):this.removeEventListener(e,i[this].listener),i[this]=null,i[tc]--,i[tc]<=0&&(n[Zs]=null,delete n[Zs]))}}catch(o){}}return r}}function Hn(){e.EventTarget&&(On(e.EventTarget.prototype,"addEventListener",function(t){return Ln(t)}),On(e.EventTarget.prototype,"removeEventListener",function(t){return jn(t)}))}function qn(){Object.getOwnPropertyDescriptor&&Object.defineProperty&&r(Wf,function(t){var n="on"+t,r=Object.getOwnPropertyDescriptor(e.HTMLElement.prototype,n),i=r.get,o=r.set;Object.defineProperty(e.HTMLElement.prototype,n,{get:function(){return i.apply(this,arguments)},set:function(){var t=arguments[0];t&&(arguments[0]=In(t,ws,Kf)),o&&o.apply(this,arguments)},configurable:!0,enumerable:!0})})}function Mn(t){return t&&t.target instanceof e.HTMLElement&&t.currentTarget instanceof e.HTMLElement}function Bn(t){return!!t.match(Bn.regex)}function Un(t){return t&&t.substr(0,256)||""}function Fn(t){try{if(!t)return"";for(var e=[],n=t.parentNode,r=function(){var r=t.tagName,i=void 0;i=n.children;var o=void 0;o=i?1===x(i,function(t){return t.tagName===r}).length?r:"".concat(r,":nth-child(").concat(1+E(i,t),")"):r;var a=t.id?"#".concat(t.id):"",s=t.className;Do(s)&&(s=pn(s));var c="";if(s){var u=s.split(" ");u&&(c=x(u,function(t){return pn(t)}).map(function(t){return".".concat(t)}).join(""))}e.unshift("".concat(o).concat(a).concat(c)),t=n,n=t.parentNode};n;)r();return"".concat(e.join(" > ")).toLowerCase()}catch(i){}}function Gn(t){return!t.isTrusted||null!=t.pointerType&&!t.pointerType}function Yn(t,e,n){var r=t.target,i=r.nodeName,o=r.id,a=r.className,s=r.title,c=r.value,u=r.innerText,f=i+o,l=Gn(t),d={type:Oa,id:o,nodeName:i,className:a,title:s,value:c,text:i===Ps?"":Un(u),path:Fn(t.target),trigger:l?dc:lc,range:pc},p=t[Ts];if(p||(p=Xo(),t[Ts]=p),d.eventId=p,l){var h=t.timeStamp&&k();Zf&&Math.abs(h-Zf.timestamp)<=Hu.script_event_associate_threshold&&(d.refId=Zf.eventId)}else Zf={timestamp:t.timeStamp&&k(),eventId:d.eventId};if(Ns===i){var v=t.target.getAttribute("src");v&&!Bn(v)&&(d.src=v)}if(Is===i){var m=t.target.getAttribute("href");m&&(d.href=m)}return d.eventHandlerType=e,new re(_({name:f,type:Oa,subType:t.type||Ss,data:d},n))}function zn(t,e){Eu.context=Yn(t,e)}function Jn(){var t=Eu.context;t&&t.canEnd()&&t.end(),Eu.context=null}function Wn(t,e){var n=e.originalCallback,r=e.eventHandlerType,i=t[0],o=!(i&&i.target&&Xf.indexOf(i.type)>-1);if(!o)try{zn.call(this,i,r)}catch(a){}var s;try{s=n.apply(this,t)}finally{if(!o)try{Eu.context&&!Eu.context.canEnd({ignoreFields:[Ia]})&&(i[bs]=!0),Jn.apply(this);
}catch(a){}}return s}function Kn(){r(Xf,function(t){document.addEventListener(t,function(t){$f.length>=ms&&$f.shift(),$f.push(t)},_defineProperty({capture:!0},Es,!0))})}function Vn(t){try{return 13===(t+"").split(".")[0].length}catch(e){}return!1}function Xn(n){var r=e.performance&&e.performance.timing?e.performance.timing.navigationStart:t,i=n.timeStamp;return i=i?Vn(i)?i:Math.round(n.timeStamp+r):k()}function $n(t){var e=x($f,function(t){return!t[bs]}),n=e[e.length-1];if(n){var r=Xn(n);if(Math.abs(r-t)<Hu.inline_event_associate_threshold){var i;return n[Ts]&&(i=Qf.get(n[Ts])),i||(i=Yn(n,Os,{s:r}),n[Ts]&&Qf.put(n[Ts],i)),i}}}function Qn(t){var e=[];try{e=x($f,function(e){return!e[bs]&&e.timeStamp===t.timeStamp&&t.target.nodeName===e.target.nodeName})}catch(n){}if(e.length>0){var r=e[0];return Yn(r,Os,{s:Xn(r)})}}function Zn(){e[Aa].hook&&(e[Aa].hook.eventCb=Wn),!e[Aa].listenerHooked&&e.HTMLElement&&(Hn(),qn()),Hu.hook_inline_event&&Kn()}function tr(t,e){this.flags=0,Lo(t.create)&&(this.create=t.create,this.flags|=tl),Lo(t.before)&&(this.before=t.before,this.flags|=el),Lo(t.after)&&(this.after=t.after,this.flags|=nl),Lo(t.error)&&(this.error=t.error,this.flags|=rl),this.data=e}function er(t,e){if(!ol){if(!jo(t)||!t)throw new TypeError("callbacks arguments must be an object");return ol=new tr(t,e)}}function nr(t,e){var n=e||ol.data;if(!n&&0!==(ol.flags&tl)){var r=ol.create(ol.data);void 0!==r&&(n=r)}return function i(){0!==(ol.flags&el)&&ol.before(this,n);var e=i;e._&&(e._=1);var r;if(Hu.exposeOriginError)try{r=t.apply(this,arguments)}finally{0!==(ol.flags&nl)&&ol.after(this,n)}else{try{r=t.apply(this,arguments)}catch(o){throw 0!==(ol.flags&rl)&&ol.error(n,o),o}0!==(ol.flags&nl)&&ol.after(this,n)}return r}}function rr(t){return function(){var e;try{e=t.apply(this,arguments)}finally{Eu.context=null}return e}}function ir(t,e){return!ol||ol.flags<=0?t:nr(t,e)}function or(t,e){return rr(ir(t,e))}function ar(){this.id=null,this.active=null,this._set=[]}function sr(){var t=new ar;return t.id=er({create:function(){return t.active},before:function(e,n){n&&t.enter(n)},after:function(e,n){n&&t.exit(n)},error:function(e,n){if(e){try{var r="moduleId";n[r]=e[r]}catch(i){}t.exit(e)}}}),t}function cr(){return sl||(al=sr(),sl=!0),al}function ur(t){var e=t,n=t.xhrs;e.hasAjax=n&&n.length>0,delete e.xhrs;var r={ss:1};t.type===Ks&&(r.rs=1),re.buildImmediateAction(Oa,Cs,{type:Oa,items:n,spe:e},{sendOptions:{query:r}})}function fr(t){if(dl[t.key]){var e=dl[t.key];if(delete dl[t.key],e.speBinded){var n=e.setSpe(t);n||(!e.isMeaningfulAction()&&e.isNoRemain()?ur(t):I(function(){e.sent||ur(t)},oc))}}else ur(t)}function lr(t){Lf&&console.warn(t||"Event key required!")}function dr(t){t=t||{},this.key=t.key,this.type=t.type||Ws,this.timeout=t.timeout||Hu.user_action_timeout,this.status=ul,this.remain=0,this.xhrs=[],this.s=k(),this.e=null,this.called=this.sent=this.stored=!1,t.debugInfo&&(this.debugInfo=t.debugInfo),this.duration=t.duration||0,this.scope=new D({contexts:t.context})}function pr(t){var e=null;e=Eu.context?re.getRootContext(Eu.context,function(t){return t.type===Oa&&t.subType!==Cs}):$n(t.s),null!=e&&(dl[t.key]=e,e.speBinded=!0)}function hr(t){t=t||{};var e=t.key;if(!e)return new lr;if(ll[e])return new lr("event "+e+" is executing");ll[e]=!0;var n=cl.createContext();cl.enter(n);var r=new dr(t);return r._end=function(){var t=this;t.sent||t.stored||0!==t.remain||!t.called?t.stored&&this.refreshEventAndStore(n):t.finish().send(n)},r.end=function(t){t=t||{};var e=this;return e.called?void(Lf&&console.warn("Event "+this.key+"has ended or failed!")):(e.called=!0,cl.exit(n),e.status=null!=t.status?t.status:1,t.context&&jo(t.context)&&e.scope.setContext(t.context),void(t.storeEvent||e._end()))},r.finish=function(){var t=this;return t.e=k(),t.i&&clearTimeout(t.i),delete ll[t.key],t},r.fail=function(){this.end({status:fl})},r.store=function(){this.end({storeEvent:!0}),this.refreshEventAndStore(n),this.stored=!0},r.type===Ks&&pr(r),cl.set("event",r),r}function vr(t){if(e.TINGYUN&&e.TINGYUN.inited){var n=$u(Gs),r=mt(n);if(r&&r.start&&(t=t||{},!t.key||r.key===t.key)){var i=t.timeout;if(i||(i=Ys),r.duration=k()-r.start,r.duration>i)return void Zu(Gs);var o=e.performance&&e.performance.timing;if(o&&o.navigationStart&&(o.loadEventEnd||o.loadEventStart)&&o.navigationStart-r.start>=0){var a={method:"GET",url:Hu.ref,status:200,type:Na,subType:Da,startSpeOffset:o.navigationStart-r.start,start:o.navigationStart,__spe:1,du:(o.loadEventEnd||o.loadEventStart)-o.navigationStart};r.xhrs||(r.xhrs=[]),r.xhrs.push(a)}var s=ul;t.status&&(s=t.status===Xs?ul:0),r.status=s,Zu(Gs),fr(r)}}}function mr(t,e){e.status&&e.status===$s?t.fail():t.end()}function gr(t,n){if(!e.TINGYUN||!e.TINGYUN.inited)return new lr("Agent is not inited!");t=_({},{type:Js},n?{debugInfo:{immediate:!0}}:{},t||{});var r=hr(t);return n?mr(r,t):t.autoEnd&&I(function(){mr(r,t)},t.endDelay||Vs),r}function yr(t){return dl[t]}function _r(t,e){if(dl[t]){var n=dl[t];n.id!==e.id&&e.type!==Da&&(e.speBinded=!0,dl[t]=e)}}function xr(t,n){e.TINGYUN&&e.TINGYUN.inited&&(n&&jo(n)||(n={}),t&&t.beforeEach&&t.afterEach&&(Hu.routerEnable=!1,t.afterEach(function(t){var r=t.fullPath;if(r=r?e.location.origin+r:t.path){var i={key:r,type:Ks,autoEnd:!0,endDelay:ic,debugInfo:{api:fc}};_(i,n),gr(i)}})))}function br(t,e){if(t){var n=t.split("_"),r=n[0],i=n[1];"ty"===r&&i&&P(i,{timestamp:k(),data:e})}}function Er(){return{get:function(t,e){null==e&&(e=C);var n=mt($u(au));n&&n[su]?e(n[su][t]):e()},set:function(t,e){var n=mt($u(au));n||(n={}),n[su]||(n[su]={}),n[su][t]=e,Qu(au,Po(n))}}}function Tr(){return{get:function(t){t&&t()},set:C}}function Sr(t){return Hu.configLoad?t&&t.config?k()-(t.lastUpdate||0)>6e4*Hu.configLoadInterval:!0:!1}function Ar(t){if(Mu.initiator!==iu&&Sr(t)){var e={token:Hu.token,_r:k()},n="".concat(Wt()).concat(Hu.configLoadUri,"?").concat(At(e));ut({url:n,method:lu,timeout:Hu.configLoadTimeout,callback:function(t){var e=mt(t);if(e){var n=e.code,r=e.data;200===n&&r&&yl(Hu.token,{token:Hu.token,lastUpdate:k(),config:r})}}})}}function Cr(){if(Object.defineProperty){var t=e[aa];t&&Object.defineProperty(e,aa,{get:function(){return _l++>0&&e.console&&console.warn("window.%s is deprecated, use window.%s instead.",aa,sa),t}})}}function kr(t){var e=t;return xl&&(bl.setAttribute("href",e),e=bl.href),bl.setAttribute("href",e),{href:bl.href,protocol:bl.protocol?bl.protocol.replace(/:$/,""):"",host:bl.host,search:bl.search?bl.search.replace(/^\?/,""):"",hash:bl.hash?bl.hash.replace(/^#/,""):"",hostname:bl.hostname,port:bl.port,pathname:"/"===bl.pathname.charAt(0)?bl.pathname:"/"+bl.pathname}}function wr(t){var e=!1;return Hu.corsDomains&&r(Hu.corsDomains,function(n){return t.indexOf(n)>-1?(e=!0,!1):void 0}),e}function Or(t){if(!Do(t))return!1;if(Hu.apmEnableAllCorsDomains)return!0;var e=kr(t);return e.protocol===El.protocol&&e.host===El.host||wr(e.host)}function Nr(){try{return Xo().substring(0,16)}catch(t){}}function Ir(t){var e=!1;try{var n=Or(t.url);if(Hu.x_server_switch&&n){var i=Nr(),o="c=B|"+Hu.key;if(i&&(o+=";x="+i),t.addHeader(Ea,o),e=!0,t.xTingyunSent=!0,Hu.apmHeaders){var a={},s=Xo().replace(/-/g,"");r(Hu.apmHeaders,function(n){if(n){var r=t.getHeader(n);null==r&&(t.addHeader(n,s),e=!0,r=s),a[n]=r}}),t.apms=a}}}catch(c){}return e}function Pr(t,e){if(!t.context){var n=Eu.context;!t.shouldAddToEvent&&an(n)&&(n=null),t.context=new re({parent:n,name:"".concat(t.url,"-").concat(t.id),type:Na,subType:e||Gc})}}function Dr(t,e){var n=t.context.data,r=t.xTingyunSent?mt(e(Ta)):null;if(r){if(n.hasServerHeader=!0,n.s_id=r.id,n.s_tname=r.tname,n.s_tid=r.tid,n.s_rid=r.rid,n.s_duration=r.duration,"user"in r){var i=r.user,o=i;if(null!=i&&0===i.indexOf(Sa)){var a=i.substring(Sa.length);try{o=Pf.decode(a)}catch(s){}}n.s_user=o,Ut(o)}"bid"in r&&(n.s_bid=pe(r.bid)),"ber"in r&&(n.s_ber=r.ber),"isError"in r&&(n.s_isError=r.isError)}else n.hasServerHeader=!1;t.apms&&(n.apms=t.apms)}function Rr(t){var e=t.context.data;t.key&&(e.__spe=1)}function Lr(t,e){Eu.context=t.context,Eu.globalAsyncStore=t,Eu.globalAjaxContext=e}function jr(t){if(t.context){var e=!1;return t.context.setData({state:Ka}),t.context.canEnd()&&(t.context.end(),e=!0),t.context.data&&t.context.state===Va&&Hu.upload_timeout_ajax&&(t.context.data.brsOnly=!0,re.buildImmediateAction(Na,"",t.context.data,{actionOptions:{state:Va}})),Eu.globalAsyncStore=null,Eu.globalAjaxContext=null,e}}function Hr(t){if(!t||!t.context)return{};var e=t.context.data,n={method:e.method,url:e.url,start:e.start,end:e.end,du:e.du,status:e.status};return t.context.subType===Gc?_(n,{err:e.err,rec:e.rec,send:e.send,requestHeader:t.headerRecord}):_(n,{requestHeader:t.fetchOptions.headers}),n}function qr(t){if(t.shouldAddToEvent&&null==t.context.parent){var e;if(Q()&&(e=$n(t.start)),!e&&Eu.recordingPageLoadEvent&&Eu.pageLoadEvent&&(e=Eu.pageLoadEvent,Eu.recordingCpActions&&t.context.setData({crossPage:!0})),!e){var n=cl.get("event");n&&n.type==Ks&&n.key===t.key&&(e=yr(n.key))}if(e){t.context.parent=e,t.context.unregisterTimeout(),en(t,Na,!0);var r=cl.get("event");r&&r.type==Ks&&r.key===t.key&&_r(r.key,e)}}}function Mr(t){var e=cl.get("event");if(e&&e.key){if(e.type===Ks){var n=yr(e.key),r=re.getRootContext(t.context,function(t){return t.type===Oa&&t.subType!==Cs});if(n&&r&&n.id!=r.id)return}t.key=e.key,e.remain++}}function Br(t){var e=!0;return r(Hu.ajaxBlacklist,function(n){return n&&t.indexOf(n)>-1?(e=!1,!1):void 0}),e}function Ur(t,e){t[aa]=e.id,kl[e.id]=e}function Fr(t){return kl[t[aa]]}function Gr(t){try{kl[t[aa]]=null,delete kl[t[aa]]}catch(e){}}function Yr(t){return t?t[ua]?!1:!0:!1}function zr(t){return{addHeader:function(e,n){try{t.setRequestHeader(e,n)}catch(r){}},getHeader:function(t){return this.headerRecord[t]}}}function Jr(t){return function e(n,r){var i=this,o=e;if(o._&&(o._=1),!Br(r)&&i&&(i[ua]=!0),Yr(i)){var a={};a.method=n,a.url=r,a.id=Tl.uniqueId++,a.jserror=!1,a.headerRecord={},a.scope=new D,a.shouldAddToEvent=nn(r),_(a,zr(i)),Pr(a),Mr(a),a.context.setData({type:Na,subType:Gc,id:a.id,cid:a.context.id,method:a.method,url:a.url,state:a.state,jserror:a.jserror}),en(a,Na),a.toJSON=function(){},Ur(i,a)}try{return t.apply(i,arguments)}catch(s){}return Q()?void 0:m(t,[i,arguments])}}function Wr(t){return function e(n,r){var i=this,o=e;o._&&(o._=1);var a;if(Yr(i)&&(a=Fr(i))){var s=si(n,Hu.optCustomParamRules);a&&s&&(a.reqHeaderParam||(a.reqHeaderParam={}),a.reqHeaderParam[n]=r),a.headerRecord||(a.headerRecord={}),a.headerRecord[n]=r}try{return t.apply(i,arguments)}catch(c){}return Q()?void 0:m(t,[i,arguments])}}function Kr(t){return function e(n){var r=this,i=e;i._&&(i._=1);var o;Yr(r)&&(o=Fr(r))&&(o.start=k(),o.reqSize=O(n),o.requestData=n,o.context.setData({start:o.start}),qr(o),Zr(r,o),Ir(o),Y({type:Tc,name:Oc,hookPostion:Dc,args:{target:r},scope:o.scope}));try{return t.apply(r,arguments)}catch(a){}return Q()?void 0:m(t,[r,arguments])}}function Vr(t,e){r(Sl,function(n,r){var i="on"+r;t[i]?On(t,i,function(t){return function(){return $r(e,n,r),Lo(t)?t.apply(this,arguments):void 0}}):t[i]=function(){$r(e,n,r)}})}function Xr(t,e){r(Sl,function(n,r){Jo(t,r,function(){$r(e,n,r),t&&t[js]===Al&&ti(t,e)})})}function $r(t,e,n){t&&(t.errorCode=e,t.errorEvent=n)}function Qr(t,e){if(Q()){var n=t[Al];n&&!t[Ls]&&(On(t,Al,e),t[Ls]=!0,t[js]=Al)}var r=t[Cl];!r||t[Ls]||r[Ls]||(On(t,Cl,e),t[Ls]=!0,t[js]=Cl)}function Zr(t,e){function n(n){return or(function i(){var r=i;r._&&(r._=1),ti(t,e);var o;if(Lo(n)){var a;if(e&&4==t.readyState&&(a=k(),Lr(e,t)),Hu.exposeOriginError)try{o=n.apply(this,arguments)}finally{e&&4==t.readyState&&(e.cbTime=k()-a)}else try{o=n.apply(this,arguments)}catch(s){throw e&&(e.jserror=!0),s}finally{e&&4==t.readyState&&(e.cbTime=k()-a)}}return o},r)}var r=cl.getContext();Qr(t,n);try{Q()?Xr(t,e):Vr(t,e)}catch(i){}if(!t[Ls]){var o=or(function a(){var n=a;n._&&(n._=1),t[Ls]||4===t.readyState&&ti(t,e)},r);try{Q()?Jo(t,na,o):(t[Cl]=o,t[Cl][Ls]=!0)}catch(i){return}}Gu(function(){Qr(t,n)})}function ti(t,e){if(e&&(e.end=k(),e.readyState=t.readyState,4==t.readyState)){if(e.callbackEnd)return;e.callbackEnd=!0,Q()&&delete t[Ls],Lr(e),e.status=t.status,e.text=ei(t),e.resSize=O(e.text);var n=ii(e,t);Y({type:Tc,name:Oc,hookPostion:Rc,args:{target:t,actionData:Hr(e)},scope:e.scope}),e.shouldAddToEvent&&(Eu.recentFinishedAjaxContext=e.context);var r=cl.get("event");Gu(function(){ri(e,n),r&&r.key==e.key&&(r.xhrs.push(n),0===--r.remain&&r._end()),Wu.xhrs&&(Wu.xhrs[e.url]=n);var i=jr(e);i&&Gr(t)})}}function ei(t){var e="";if(""==t.responseType||"text"==t.responseType)e=t.responseText;else if(t.response)e=t.response;else try{e=t.responseText}catch(n){}return e||""}function ni(t){return this.getResponseHeader(t)}function ri(t,e){t&&e&&t.jserror&&(e.jserror=t.jserror),t.errorCode&&!e.err&&(e.err=t.errorCode),t.cbTime&&!e.cb&&(e.cb=t.cbTime),H(e,t.scope)}function ii(t,e){if(t&&t.context&&!t.composed){var n=t.status;_(t.context.data,{end:t.end,du:n>0?t.end-t.start:0,cb:t.cbTime||0,status:n,err:t.errorCode?t.errorCode:0,rec:t.resSize,send:t.reqSize});var r=t.context.data,i={},o=fe(t.url),a=o.optCustomParams;i[va]=t.reqHeaderParam||{},i[ma]=ve(ui(t.requestData),Hu.optCustomParamRules[ma],!0),i[ga]=ci(e,Hu.optCustomParamRules,ga);var s=mt(t.text);s&&(i[ya]=ve(s,Hu.optCustomParamRules[ya],!0)),r.opt_custom_param=he(oi(i,a)),Dr(t,g(ni,e)),Rr(t);var c={};if(Hu.collectAllParam[mc]&&o.operaAllParam&&(c[mc]=o.operaAllParam),Hu.collectAllParam[gc]&&t.headerRecord&&(c[gc]=t.headerRecord),Hu.collectAllParam[yc]&&t.requestData&&(c[yc]=t.requestData),Hu.collectAllParam[_c])try{c[_c]=fi(e.getAllResponseHeaders())}catch(u){}return Hu.collectAllParam[xc]&&t.text&&(c[xc]=t.text),Zt(c)||(r.opera_all_param=c),t.composed=!0,r}}function oi(t,e){return r(e,function(e,n){t[n]=_({},t[n]||{},e||{})}),t}function ai(t,e){if(t&&t.getResponseHeader)try{return t.getResponseHeader(e)}catch(n){}}function si(t,e){var n;return r(e[va],function(e){return t===e?(n=!0,!1):void 0}),n}function ci(t,e,n){var i={};return r(e[n||la],function(e){var n=ai(t,e);null!=n&&gt(i,e,n)}),i}function ui(t){var e=mt(t);return e||(e=Et(t)),e}function fi(t){if(!t)return{};var e=t.split(/\r?\n/),n={};return r(e,function(t){if(!t)return!0;var e=t.indexOf(":");if(e>-1){var r=Vo(t.substring(0,e)),i=Vo(t.substring(e+1));r&&(n[r]=i)}}),n}function li(){var t=Du&&Du.prototype;t?(On(t,"open",Jr),Hu.hook_xhr_setrequestheader&&On(t,"setRequestHeader",Wr),On(t,"send",Kr)):Du&&(e.XMLHttpRequest=function(){var t=new Du;return On(t,"open",Jr),Hu.hook_xhr_setrequestheader&&On(t,"setRequestHeader",Wr),On(t,"send",Kr),t})}function di(t){t&&!t.composed&&(_(t.contextData,{end:t.end||k()}),t.composed=!0)}function pi(){On(window,"setTimeout",bi),On(window,"clearTimeout",Ei)}function hi(t){t.context||(t.context=new re({name:"".concat(t.name,"-").concat(t.id),type:Ia,subType:t.name}))}function vi(t){Eu.context=t.context,Eu.globalAsyncStore=t}function mi(t){t.context&&(t.context.setData({state:Ka}),t.context.canEnd()&&t.context.end(),Eu.globalAsyncStore=null)}function gi(t){var e=0,n=t.context;if(n){var r=n.remain[Na],i=n.remain[Pa];e+=r.current+r.children+i.current+i.children}return e>0}function yi(t){for(var e=0;null!=t&&e<Hu.set_timeout_max_depth;)e+=t.type===Ia?1:0,t=t.parent;return e<Hu.set_timeout_max_depth}function _i(t){return function(){return ir(t).apply(this,arguments)}}function xi(t,e,n,r){var i=null,o=null,a=Eu.context,s=re.getRootContext(Eu.context,function(t){return t.type===Da});return s&&(a=null),jo(r)&&r[Rs]||null==a?o=_i(t):yi(a)?(i={id:wl++,name:e,start:k(),delay:n,parentContext:a},hi(i),i.contextData={type:Ia,id:i.id,cid:i.context.id,name:i.name,start:i.start,delay:i.delay},i.context&&i.context.setData(i.contextData),i.parentContext&&(i.pcid=i.parentContext.id,i.parentContext.updateRemain(1,Ia),i.parentContext.items.push(i.contextData)),o=or(function(){var e;try{vi(i)}catch(n){}try{t&&(e=t.apply(this,arguments))}finally{try{gi(i)?(i.end=k(),di(i),mi(i)):i&&i.context.removeFromParent()}catch(n){}}return e})):o=_i(t),{store:i,cb:o}}function bi(t,e){return function(n){var r=Uo.call(arguments,0),i=null;if(!arguments[2]&&Lo(n)){var o=xi(n,e,r[1],r[2]);o.cb&&(r[0]=o.cb),i=o.store}var a=t.apply(this,r);return i&&(Ol[a]=i),a}}function Ei(t){return function(e){try{var n=Ol[e];n&&n.context&&(n.context.removeFromParent(),Ol[e]=null)}catch(r){}return t.apply(this,arguments)}}function Ti(t,e){for(var n=k(),r=e.length-1;r>=0;r--){var i=e[r];i.type===Oa||i.end||(i.end=n),e[r-1]&&(e[r-1].items=[i]);var o=void 0;o=i.start&&i.end&&i.end-i.start>Hu.eventTimeout?Va:i.type===Oa?e[r+1]&&e[r+1].state||Ka:Ka,i.state=o}t.data=e[0],t.end=n}function Si(t){var e=Eu.cpParent;if(e){Eu.recordingCpActions=!1;var n=e.action,r=e.data,i=e.commonActionInfo,o=e.requestInfo;if(n&&r&&0!==r.length){var a=t.context;r[r.length-1].items=[a.eventData.data],Ti(n,r),n.data&&(n.data.range=hc);var s=_(i||{},H({pageParam:zt(),cpOptCustomParam:Eu.opt_custom_param},Eu.scope,"cpScope"));a.eventData=n,a.setSendOptions({commonActionInfoMessage:s,requestInfo:o,crossPage:!0})}}}function Ai(t){if(t){var e=t.action,n=t.data;e&&n&&0!==n.length&&(Ti(e,n),$t(e))}}function Ci(t){Qu(gs,Po(t))}function ki(t){var e=Nl++,n=t.url||"",r=k(),i=new re({parent:Eu.context,name:"".concat(n,"-").concat(e),type:Ra,subType:t.subType||ys}),o={type:Ra,subType:i.subType,id:e,cid:i.id,url:n,start:r};i&&i.setData(o);var a;return i.parent&&(i.parent.type===Na?ii(Eu.globalAsyncStore,Eu.globalAjaxContext):i.parent.type===Ia&&di(Eu.globalAsyncStore),a=i.collectCrossPageData(),Il=a,t.delayStorage||Ci(a),i.clear(),i=null),{storageData:a,context:i}}function wi(t){return function(){var e=arguments[0],n=ki({url:e,delayStorage:!0}),r=n.storageData,i=n.context;try{var o=t.apply(this,arguments);if(o){if(!r&&i){var a=$n(i.data.start);a&&(i.parent=a,r=i.collectCrossPageData(),Il=r,i.clear(),i=null)}Ci(r)}return o}catch(s){}return Q()?void 0:m(t,[this,arguments])}}function Oi(){On(e,"open",wi)}function Ni(){function t(t){return{valid:Is===t.target.nodeName&&!t.defaultPrevented&&t.target.href,url:t.target.href,subType:_s}}function e(t){return{valid:Ps===t.target.nodeName&&!t.defaultPrevented&&t.target.action,url:t.target.action,subType:xs}}r([Ss,As],function(n){Pu.addEventListener(n,function(r){if(r){var i=n===Ss?t(r):e(r);if(i.valid){var o=r.timeStamp?Qn(r):$n(Xn(r));o&&(Eu.context=o,ki({subType:i.subType,url:i.url}),Eu.context=null)}}},_defineProperty({},Es,!0))})}function Ii(){Ai(Il),Il=null}function Pi(){Jo(Pu,vc,function(){"hidden"===Pu.visibilityState&&Ii()}),Jo(e,ea,function(){Ii()})}function Di(){Oi(),Ni(),Pi()}function Ri(t){t.context.setData(_({pvid:t.pvid,end:t.end,url:t.url},t.iframePageMetric||{}))}function Li(t){if(!t.context){var e=Eu.context;!t.shouldAddToEvent&&an(e)&&(e=null),t.context=new re({parent:e,name:"".concat(t.src,"-").concat(t.id),type:Pa})}}function ji(t){if(!t)return!0;var e=!1,n=t.substring(0,100);try{r(Ll,function(t){return n.indexOf(t)>-1?(e=!0,!1):void 0})}catch(i){e=!0}return e}function Hi(t,e,n){function r(){if(i.end=k(),i.sameOrigin&&this&&this.contentDocument&&this.contentWindow){i.sameOrigin=!0,i.url=this.contentDocument.URL;var e,n=this.contentWindow[sa],o=!1;n&&(i.pvid=n.pvid||"",Lo(n.checkHookSupported)&&n.checkHookSupported(Ec,wc)&&(o=!0,n.addLifeCycleHook(wc,function(t){var n=t.iframeMetric;e=n,qi(i,e)}))),o||(e=Le(this.contentWindow),qi(i,e))}else i.sameOrigin=!1;Ri(i),Mi(i),t.removeEventListener("load",r)}if(!ji(e)&&t){n||(n=t.src?Rl:Dl);var i={id:Pl++,src:e,loadType:n,start:k(),sameOrigin:Or(e),shouldAddToEvent:nn(e)};Li(i),i.context&&i.context.setData({type:Pa,loadType:i.loadType,id:i.id,cid:i.context.id,src:i.src,start:i.start,sameOrigin:i.sameOrigin}),en(i,Pa);var o;null==i.context.parent&&i.shouldAddToEvent&&Q()&&(i.context.parent=$n(i.start),o=i.context.parent),null==i.context.parent&&i.shouldAddToEvent&&Eu.recordingPageLoadEvent&&Eu.pageLoadEvent&&(i.context.parent=Eu.pageLoadEvent,o=i.context.parent,Eu.recordingCpActions&&(i.context.crossPage=!0)),o&&(en(i,Pa,!0),i.context.unregisterTimeout()),t.addEventListener("load",r)}}function qi(t,e){t.iframePageMetric=e,Ri(t),Mi(t)}function Mi(t){t.context&&(t.context.setData({state:Ka}),t.context.canEnd()&&t.context.end())}function Bi(){function t(t){return function(e){return"IFRAME"===e.nodeName&&e.src&&Hi(e,e.src,Dl),t.apply(this,arguments)}}On(Node.prototype,"appendChild",t),On(Node.prototype,"insertBefore",t)}function Ui(){function t(){if(Pu&&Pu.body&&Pu.body.contains&&Pu.body.contains(this)){var t=arguments[0],e=this;Hi(e,t)}return r.apply(this,arguments)}if(Object.getOwnPropertyDescriptor&&Object.defineProperty){var e=Object.getOwnPropertyDescriptor(HTMLIFrameElement.prototype,"src"),n=e.get,r=e.set;Object.defineProperty(HTMLIFrameElement.prototype,"src",{get:function(){return n.apply(this,arguments)},set:t,enumerable:!0,configurable:!0})}}function Fi(){Bi(),Ui()}function Gi(){Hu.hook_auto_event&&Zn(),Hu.hook_timer&&pi(),Hu.hook_iframe&&Fi(),Hu.hook_cross_page&&Di()}function Yi(t){var e=!0,n=!0;t.fetchOptions.headers||(e=!1,t.fetchOptions.headers={});var r=t.fetchOptions.headers;Mo(r)?_(t,jl.headers):jo(r)?_(t,jl.literal):(n=!1,_(t,jl.notSupport)),t.hasOriginalHeaders=e,t.supportAddHeaders=n}function zi(t){return this.headers?this.headers.get(t):void 0}function Ji(t,e){if(t&&t.context){t.context.setData({end:t.end,du:t.status>0?t.end-t.start:0,status:t.status});var n=t.context.data;e||(n.err=Sl.error);var i={},o=fe(t.url);o.optCustomParams[ha]&&(i[ha]=o.optCustomParams[ha]),i[va]=Wi(t),e&&(i[ga]=Ki(e)),n.opt_custom_param=he(i),t.headerAdded&&Dr(t,g(zi,e||{})),Rr(t);var a={};if(Hu.collectAllParam[mc]&&o.operaAllParam&&(a[mc]=o.operaAllParam),Hu.collectAllParam[gc]&&t.fetchOptions.headers&&(a[gc]=t.fetchOptions.headers),Hu.collectAllParam[_c]&&e&&e.headers&&Lo(e.headers.entries)){var s={};r(e.headers,function(t,e){s[e]=t}),a[_c]=s}return Zt(a)||(n.opera_all_param=a),n}}function Wi(t){var e={};return r(Hu.optCustomParamRules[va],function(n){var r=t.getHeader(n);null!=r&&(e[n]=r)}),e}function Ki(t){var e={};return r(Hu.optCustomParamRules[ga],function(n){var r=t.headers.get(n);null!=r&&(e[n]=r)}),e}function Vi(t){if(!Bo(t)&&!jo(t))return null;var e={};return t.url&&(e.url=t.url),t.method&&(e.method=t.method),t.headers&&(e.headers=t.headers),e}function Xi(t){var e={};return Do(t)?e.url=t:_(e,Vi(t)),e}function $i(t,e){t&&e&&Zi(t,null)}function Qi(t){return function e(){var n=e;n._&&(n._=1);var r=this,i=Uo.call(arguments,0);return new Promise(function(e,n){var o={};if(i&&(o=Xi(i[0]),i[1])){var a=i[1];_(o,Xi(a))}var s,c=Br(o.url);if(c){if(s={id:Tl.uniqueId++,method:o.method||lu,url:o.url,start:k(),fetchOptions:o,shouldAddToEvent:nn(o.url),scope:new D},Yi(s),s.supportAddHeaders){var u=Ir(s);if(!s.hasOriginalHeaders&&u)try{i[1]||(i[1]={}),i[1].headers=s.fetchOptions.headers}catch(f){u=!1}s.headerAdded=u}Pr(s,Yc),Mr(s),s.context.setData({type:Na,subType:Yc,id:s.id,cid:s.context.id,method:s.method,url:s.url,start:s.start}),en(s,Na),qr(s),Y({type:Tc,name:Oc,hookPostion:Dc,args:{},scope:s.scope})}var l;try{l=t.apply(r,i)}catch(f){return $i(s,c),void n(f)}l.then(or(function d(t){var n=d;n._&&(n._=1),t&&c&&s&&Zi(s,t),e(t)}),or(function(t){$i(s,c),n(t)}))})}}function Zi(t,e){t.end=k(),t.status=e?e.status:0;var n=Ji(t,e);Y({type:Tc,name:Oc,hookPostion:Rc,args:{target:e||{},actionData:Hr(t)},scope:t.scope}),H(n,t.scope);var r=cl.get("event");r&&r.key==t.key&&(r.xhrs.push(n),0===--r.remain&&r._end()),Wu.xhrs&&(Wu.xhrs[t.url]=n),jr(t)}function to(){e.fetch&&e.Promise&&Q()&&On(e,"fetch",Qi)}function eo(t){var e={};return r(Hu.optCustomParamRules[va],function(n){var r=t[n];null!=r&&(e[n]=r)}),e}function no(t){var e={};return t&&Ro(t)&&t.length>0&&r(t,function(t){var n=t;Do(t)&&(n=mt(t)),_(e,ve(n,Hu.optCustomParamRules[ma],!0))}),e}function ro(t,e,n){if(t&&t.context&&!t.composed){t.composed=!0;var r=mt(e),i={};i[va]=eo(n.headers||{}),i[ma]=no(n.requestData),t.context.setData({end:t.end,du:t.end-t.start,cb:t.cbTime,status:200,err:r&&null!=r.error?r.error:0,opt_custom_param:he(i)})}}function io(t){return t.context.data}function oo(t,e,n){var r=e;return function(e){t.end=k();var i,o=k();try{r&&(i=r.apply(this,arguments))}finally{var a=k();t.cbTime=a-o}ro(t,e,n),Y({type:Tc,name:Oc,hookPostion:Rc,args:{target:this,actionData:io(t)},scope:t.scope}),H(t.context.data,t.scope);var s=cl.get("event");return s&&s.key==t.key&&(s.xhrs.push(t.context.data),0===--s.remain&&s._end()),jr(t),i}}function ao(t){return function(){var e=arguments[0],n=arguments[1];if("rpc"===e&&n&&n.operationType){var r=arguments[2],i=Hu.mpaas_rpc_api+n.operationType,o={id:Tl.uniqueId++,url:i,method:"",start:k(),shouldAddToEvent:nn(i),scope:new D};Pr(o,zc),Mr(o),o.context.setData({type:Na,subType:zc,id:o.id,cid:o.context.id,method:o.method,url:o.url,start:o.start}),en(o,Na),qr(o),Y({type:Tc,name:Oc,hookPostion:Dc,args:{},scope:o.scope}),arguments[2]=oo(o,r,n)}try{return t.apply(self,arguments)}catch(a){}}}function so(){Hu.mpaas_rpc&&window.AlipayJSBridge&&Lo(window.AlipayJSBridge.call)&&On(window.AlipayJSBridge,"call",ao)}function co(){li(),to(),so()}function uo(){if(Q()){var t=0;try{t=window.performance.timing.loadEventEnd}catch(e){}return t>0}return Pu.readyState===ra}function fo(t,e){if(lo()){var n={rm:{},em:[],cpm:{}};e&&(n.rm.res=e.res||[]),t&&(n.cpm=t,n.cpm.ul=Hu.ref),nbsJsBridge.logJsResult(Po(n))}}function lo(){return"undefined"!=typeof nbsJsBridge&&nbsJsBridge.logJsResult}function po(e,n){var i={tr:!1,tt:y(Pu.title),charset:Pu.characterSet};_u.resources&&_(i,_u.resources),me(function(){i.debug=hf}),ye();var o=Wu.errs;r(o,function(e,r){var i=e.toObject();i.o=i.o-n&&n.navigationStart||t,o[r]=i}),i.err=o;var a,s="getEntriesByType";return e[s]?a=e[s]("resource"):ht(b(Hl,[s])),a&&(i.tr=!0,i.res=[],r(a,function(t){function e(e){var n=t[e];return n>0?n:0}var n=t.initiatorType,o=t.name,a={o:e("startTime"),rt:n,n:o,f:e(Xa),ds:e(cs),de:e(us),cs:e(ds),ce:e(ps),sl:e(hs),qs:e($a),rs:e(Qa),re:e(Za),ts:t.transferSize||0,es:t.encodedBodySize||0};if("xmlhttprequest"===n||"fetch"===n){var s=ho(o);r(s,function(t,e){0==e.indexOf("s_")&&(a[e]=t)})}i.res.push(a)})),i}function ho(t){var e;return r(Wu.xhrs,function(n,r){return r&&t.indexOf(r)>-1?(e=n,!1):void 0}),e}function vo(t){if(t){var e=t.fetchStart;if(e)return e-t.navigationStart}}function mo(){var n={},i=0,o=e.performance;o&&o.getEntriesByType&&r(o.getEntriesByType("mark")||[],function(t){if(t&&t.name&&t.startTime&&0===t.name.indexOf(Ca)){var e=t.name.substring(Ca.length);e&&(n[e]=Math.round(t.startTime),i+=1)}});var a=o&&o.timing?o.timing.navigationStart:t,s=e[Aa]&&e[Aa].data,c=_({},s||{},bu||{});return c&&o&&o.timing&&r(c,function(t,e){t&&jo(t)&&t.timestamp&&(n[e]=t.timestamp-a,i+=1)}),i>0?n:null}function go(t,e,n){var r=_({},t||{},{type:Da,subType:n||Ha});return Eu.recordingCpActions&&(r.crossPage=!0),e&&(r.body=e),r}function yo(t){Eu.recordingPageLoadEvent=!1,Eu.pageLoadEvent&&(t&&(Eu.pageLoadEvent._ctx.pageClose=!0),Eu.pageLoadEvent.endLock=!1,Eu.pageLoadEvent.end())}function _o(){if(Eu.recordingPageLoadEvent=!0,Eu.pageLoadEvent=new re({type:Da,subType:Ha,endLock:!0,callback:{beforeSend:function(t){Y({type:Sc,name:Pc,args:{context:t}})},afterSend:function(t){Eu.pageLoadEventEnd=!0,Wu.xhrs=Wu.errs=null,He(),Y({type:Ec,name:wc,args:{actionData:t}})}}}),F(Pc,Bl),Q()){var t=mt($u(gs));t&&t.fromUrl&&Pu.referrer&&t.fromUrl.indexOf(Pu.referrer)>-1&&(Eu.recordingCpActions=!0,Eu.cpParent=t,F(Pc,Si)),Zu(gs)}return uo()&&!Eu.pfSent&&yo(),Mf.on(Qo,function(){var t=0;if(Hu.pfDelay&&jo(Hu.pfDelay)){var e=mo();r(Hu.pfDelay,function(n,r){(!e||null==e[r])&&Ho(n)&&n>t&&(t=n)})}Hu.spaMetricEnable&&Eu.pageLoadEvent&&!Eu.pageLoadEvent.hasChildType(Na)&&Hu.pageLoadDelay>t&&(t=Hu.pageLoadDelay),I(function(){yo()},t)}).on([Zo,ta,ea],Ul)}function xo(t,e){t&&Hu.routerEnable&&gr({key:t,autoEnd:!0,endDelay:Hu.router_event_delay,type:Ks,debugInfo:{api:e}})}function bo(){r(Fl,function(t){On(e.history,t,function(n){return function(r,i,o){var a;a=n.apply(this,arguments);try{xo(e.location.href,t)}catch(s){}return a}})}),Jo(e,sc,function(){xo(e.location.href,sc)})}function Eo(){Jo(e,ac,function(){xo(e.location.href,ac)})}function To(){var t=e.history;t?bo():Eo()}function So(){Hu.routerEnable&&To()}function Ao(){ct(Hu.req_capacity),R(),dn(Wu),Q()&&Gi(),_o(),co(),An(),So(),Wu._end=k(),me(function(){hf._end=Wu._end}),Cr()}function Co(){return e[sa]&&e[sa].inited}function ko(t,n){return _({},e[Aa].config||{},t||{},n||{})}function wo(t){var n={};if(Lo(t)){var r={};t(r),n=r}else n={server:t};e[Aa]||(e[Aa]={hook:{}}),gl(Hu.token,function(t){t=t||{};var r=ko(n.server,t.config),i=Co();(!i||r.reinit)&&($e(r),Qe(),!Hu.key&&!Hu.appKey||i||(Ao(),e[sa].inited=!0),Y({type:Ec,name:kc,args:{firstInit:!i}}),Ar(t))})}function Oo(t){if(t&&(Lo(t)||jo(t))){var e=Y({type:Ec,name:Cc,args:{firstInit:!Co()}});e.exist&&Vt(e.results,function(t){return t===!1})||wo(t)}}function No(){return window[sa]&&3===window[sa].mainVersion?window[sa]:(ml.init=Oo,ml)}var Io,Po,Do=s("String"),Ro=s("Array"),Lo=s("Function"),jo=s("Object"),Ho=s("Number"),qo=s("Undefined"),Mo=s("Headers"),Bo=s("Request"),Uo=[].slice,Fo='"',Go=/([\"\\])/g,Yo=/\n/g,zo=e.JSON;d();var Jo;Jo=e.addEventListener?h:v;var Wo=e.encodeURIComponent,Ko=function(){return!document.addEventListener},Vo=String.prototype.trim?function(t){return null==t?"":t.trim()}:function(t){return null==t?"":t.toString().replace(/^\s+/,"").replace(/\s+$/,"")},Xo=(e.location.protocol,function(){function t(t){return 0>t?NaN:30>=t?0|Math.random()*(1<<t):53>=t?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<t-30))*(1<<30):NaN}function e(t,e){for(var n=t.toString(16),r=e-n.length,i="0";r>0;r>>>=1,i+=i)1&r&&(n=i+n);return n}return function(n){return n||(n=""),e(t(32),8)+n+e(t(16),4)+n+e(16384|t(12),4)+n+e(32768|t(14),4)+n+e(t(48),12)}}());N.prototype={on:function(t,e){var n=this;return Do(t)?(n.events[t]||(n.events[t]=[])).push(e):Ro(t)&&r(t,function(t){n.on(t,e)}),n},off:function(t,e){var n=arguments.length,r=this;if(0===n)return r.events={},r;var i=r.events[t];if(!i)return r;if(1===n)return r.events[t]=null,r;for(var o,a=i.length;a--;)if(o=i[a],o===e){i.splice(a,1);break}return r},emit:function(t){var e=[].slice.call(arguments,1),n=this.events[t];return n&&r(n,function(t){return t.apply(this,e)}),this},unshift:function(t,e){var n=this;return(n.events[t]||(n.events[t]=[])).unshift(e),n}};var $o="error",Qo="load",Zo="unload",ta="beforeunload",ea="pagehide",na="readystatechange",ra="complete",ia="DOMContentLoaded",oa="on",aa="_ty_rum",sa="TINGYUN",ca=2,ua="__ign",fa="__ty_asyncWrap__",la="3",da="1",pa="2",ha="1",va="2",ma="3",ga="4",ya="5",_a="reqBody",xa="TINGYUN_COOKIE_VALUE",ba="TINGYUN_DATA",Ea="X-Tingyun",Ta="X-Tingyun-Data",Sa="TY_BASE64",Aa="__TINGYUN",Ca="ty_",ka=6e4,wa="common",Oa="event",Na="ajax",Ia="timer",Pa="iframe",Da="pf",Ra="crossPage",La="jsError",ja="resource",Ha="main",qa="quit",Ma="e",Ba="a",Ua="t",Fa="i",Ga="p",Ya="c",za="j",Ja="finish",Wa="pending",Ka="finish",Va="timeout",Xa="fetchStart",$a="requestStart",Qa="responseStart",Za="responseEnd",ts="domContentLoadedEventStart",es="domContentLoadedEventEnd",ns="domInteractive",rs="domComplete",is="loadEventStart",os="loadEventEnd",as="unloadEventStart",ss="unloadEventEnd",cs="domainLookupStart",us="domainLookupEnd",fs="redirectStart",ls="redirectEnd",ds="connectStart",ps="connectEnd",hs="secureConnectionStart",vs=5,ms=5,gs="__ty_crs_page_events",ys="window_open",_s="a_link",xs="form_submit",bs="__ty_event_patch_tag",Es="__ty_event_patch_disable",Ts="__ty_event_patch_id",Ss="click",As="submit",Cs="spe",ks="addEventListener",ws="onProperty",Os="inline",Ns="IMG",Is="A",Ps="FORM",Ds=3,Rs="__ty_ignore",Ls="__ty_xhr_hooked",js="__ty_xhr_hooked_type",Hs=200,qs="TY_USER_ID",Ms="TY_SESSION_N_ID",Bs="TY_DEVICE_N_ID",Us=18e5,Fs="|",Gs="__TY_SPE_STORE",Ys=6e4,zs=6e5,Js="auto",Ws="defined",Ks="route",Vs=500,Xs="success",$s="fail",Qs="EagleEye-TraceID",Zs="__TY_ELEMENT_CB",tc="__TY_CB_COUNTER",ec="__TY_IMAGE_LOAD_HOOK",nc=60,rc="__tagFirstPaintTime",ic=500,oc=1e4,ac="hashchange",sc="popstate",cc="pushState",uc="replaceState",fc="vueRouter",lc="normal",dc="script",pc="current",hc="crossPage",vc="visibilitychange",mc="URL",gc="QH",yc="QB",_c="RH",xc="RB",bc=200,Ec="lifecycle",Tc="action",Sc="contextSend",Ac="send",Cc="preInit",kc="init",wc="pageLoad",Oc="ajax",Nc="error",Ic="userAction",Pc="pageLoad",Dc="ajax_send",Rc="ajax_finish",Lc="error_trigger",jc="paint",Hc="largest-contentful-paint",qc="first-contentful-paint",Mc=500,Bc=1e4,Uc=100,Fc="__ty_resource_load_bind_id",Gc="xhr",Yc="fetch",zc="mPaaS_rpc",Jc="auto",Wc="session",Kc="start",Vc="data",Xc="end",$c="immediateEvent",Qc="event",Zc=1,tu=2,eu=3,nu="xhr",ru="xdr",iu="beacon",ou="postMessage",au="TINGYUN_STORAGE",su="AGENT_CONFIG",cu=60,uu=3e4,fu="/js-config/config/web-agent",lu="GET",du="POST",pu="http://mgw/",hu=100,vu=2e3,mu=4e3,gu=4e3,yu=7e3,_u={},xu={
imageResources:[]},bu={},Eu={context:null,uniqueId:0,actions:[],opt_custom_param:{},unAssignedEvents:[],cpActions:[],recordingCpActions:!1,cpParent:null,cpRemain:{ajax:0,iframe:0},tryEndCpActionsFailed:!1,globalAsyncStore:null,globalAjaxContext:null,pfSent:!1,ajaxUniqueId:0,scope:null,performanceObserver:{},enableLCPObserver:!0,recordingPageLoadEvent:!1,recentFinishedAjaxContext:null,iframeMetric:{},pageLoadEventEnd:!1},Tu="extra";D.prototype.setContext=function(t,e){var n=this;t&&jo(t)?r(t,function(t,e){n._mergeContext(e,t)}):this._mergeContext(t,e)},D.prototype.setExtraContext=function(t){this.setContext(Tu,t)},D.prototype.getContext=function(t){return null==t?this._contexts:null==this._contexts?null:this._contexts[t]},D.prototype.getData=function(){return null==this._contexts?null:{contexts:this._contexts}},D.prototype._mergeContext=function(t,e){null!=t&&jo(e)&&(this._contexts||(this._contexts={}),this._contexts[t]=_(this._contexts[t]||{},e))},D.prototype.toJSON=function(){};var Su,Au,Cu={lifecycle:[Cc,kc,wc],action:[Oc,Nc,Ic],contextSend:[Pc],send:[]},ku="default",wu="default",Ou={},Nu=Object.create?Object.create:J,Iu=e.Error,Pu=e.document,Du=e.XMLHttpRequest,Ru=e.location,Lu=e.navigator,ju=(e.HTMLElement,{}),Hu={},qu={info:{}},Mu=qu.info,Bu={},Uu=function(){var t=e.navigator.standalone,n=$().toLowerCase(),r=/safari/.test(n),i=/iphone|ipod|ipad/.test(n);return i&&!t&&!r},Fu=!/(MSIE [0-8].\d+)/.test($())&&document.addEventListener,Gu=Q()?A:S,Yu=et,zu=!1;at.prototype.add=function(t){this.queue.length>=this.size||(this.queue.push(t),this.running||(this.running=!0,this.run()))},at.prototype.run=function(){var t=this,e=function(){t.queue.length>0?t.run():t.running=!1};this.handler(this.queue.shift(),e)},at.prototype.handler=function(t,e){Su(t,w(function(){e()}))},Lu.sendBeacon&&(zu=!0),Z()?(Su=ot,zu=!1,Mu.initiator=ou):e.XDomainRequest?(Su=nt,Mu.initiator=ru):Uu()?st():(Su=rt,Mu.initiator=nu),Su||(Su=function(t,e){e()},zu=!1),Jo(e,ta,function(t){zu&&(Su=it,Mu.initiator=iu)});var Ju=ft.prototype;_(Ju,N.prototype);var Wu=new ft;Wu.on("send",function(t,e,n){n=n||C,ut({url:t,data:e,callback:n})});var Ku={},Vu=e.screen;Vu&&(Ku.sh=Vu.height,Ku.sw=Vu.width);var Xu,$u,Qu,Zu,tf="http:",ef="https:",nf=[tf,ef],rf=[],of=[];$u=function(t){try{return e.localStorage.getItem(t)}catch(n){}},Qu=function(t,n){try{e.localStorage.setItem(t,n)}catch(r){}return n},Zu=function(t){try{e.localStorage.removeItem(t)}catch(n){}};var af=!0,sf=function(){try{var t=Xo();return e.localStorage.setItem(t,t),e.localStorage.removeItem(t),!0}catch(n){return!1}}(),cf={};cf.localStorage=sf,cf.getEntriesByName=e.performance&&Lo(e.performance.getEntriesByName),function(){function t(){var t,f,l=Pu.documentElement;l.appendChild(c),u.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",n=i=s=!1,r=a=!0,e.getComputedStyle&&(f=e.getComputedStyle(u),n="1%"!==(f||{}).top,s="2px"===(f||{}).marginLeft,i="4px"===(f||{width:"4px"}).width,u.style.marginRight="50%",r="4px"===(f||{marginRight:"4px"}).marginRight,t=u.appendChild(Pu.createElement("div")),t.style.cssText=u.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",u.style.width="1px",a=!parseFloat((e.getComputedStyle(t)||{}).marginRight),u.removeChild(t)),u.style.display="none",o=0===u.getClientRects().length,o&&(u.style.display="",u.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=u.getElementsByTagName("td"),t[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===t[0].offsetHeight,o&&(t[0].style.display="",t[1].style.display="none",o=0===t[0].offsetHeight)),l.removeChild(c)}var n,r,i,o,a,s,c=(Pu.documentElement,Pu.createElement("div")),u=Pu.createElement("div");u.style&&(u.style.cssText="float:left;opacity:.5",cf.opacity="0.5"===u.style.opacity,cf.cssFloat=!!u.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",cf.clearCloneStyle="content-box"===u.style.backgroundClip,c=Pu.createElement("div"),c.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",u.innerHTML="",c.appendChild(u),cf.boxSizing=""===u.style.boxSizing||""===u.style.MozBoxSizing||""===u.style.WebkitBoxSizing,cf.reliableHiddenOffsets=function(){return null==n&&t(),o})}();var uf=[Na,Ia,Pa,ja];re.prototype.end=function(t){var e=this;if(this.closed)return void(!this.cleared&&Hu.console_debug&&console.warn("Current context is already closed"));if(t&&(this.actionCount.ajax+=t.actionCount.ajax,this.actionCount.iframe+=t.actionCount.iframe,ee(this.items,t),this.updateRemain(-1,t.type)),!this.endLock&&(this.isNoRemain()||this.isTimeout))if(this.e=k(),this.closed=!0,this.i&&clearTimeout(this.i),this.e-this.s>Hu.eventTimeout&&(this.isTimeout=!0),this.setState(this.isTimeout?Va:Ka),this.data&&(this.data.state=this.state),this.parent)this.parent.end(this);else{var n;this.isTimeout&&(this.isRemainMeaningfulAction()||this.isMeaningfulAction())?n=this.composeTimeoutActionData():this.isMeaningfulAction()&&(n=this.composeActionData()),n&&(this.eventData=n,this.speBinded?null==this.spe?(this.waitingSpeEnd=!0,this.waitingSpeTimer=I(function(){e.waitingSpeEnd=!1,e.send()},oc)):(this.buildEventDataWithSpe(),this.send()):this.send()),Eu.context=null}},re.prototype.isNoRemain=function(t){t=t||{};var e=!0;return r(this.remain,function(n,r){if(t.ignoreFields&&E(t.ignoreFields,r)>-1)return!0;var i=n.current<=0&&(t.testCurrent?!0:n.children<=0);return i?void 0:(e=!1,!1)}),e},re.prototype.clear=function(){this.closed=!0,this.cleared=!0,this.i&&clearTimeout(this.i)},re.prototype.isMeaningfulAction=function(){return this.actionCount.ajax>0||this.actionCount.iframe>0||this.type===Da},re.prototype.isRemainMeaningfulAction=function(){return this.remain.ajax.current>0||this.remain.ajax.children>0||this.remain.iframe.current>0||this.remain.iframe.children>0},re.prototype.timeout=function(){this.isTimeout=!0,this.setState(Va),this.end(null,!0)},re.prototype.setData=function(t){this.data||(this.data={}),_(this.data,t||{})},re.prototype.composeActionData=function(){return{type:this.type,subType:this.subType,start:this.s,end:this.e,duration:this.e-this.s>0?this.e-this.s:0,data:_({},this.data||{},{items:(this.items||[]).slice()},Zt(this.resource.srcs)?null:{resource:{srcs:this.resource.srcs,loaded:this.resource.loaded}})}},re.prototype.composeTimeoutActionData=function(){return this.collectActionDataFromTop(),this.composeActionData()},re.prototype.collectActionDataFromTop=function(){ne(this.items,this.children)},re.prototype.collectCrossPageData=function(t){if(t||(t=[]),this.crossPage=!0,this.data&&(this.data.crossPage=!0),t.unshift(this.data),this.parent)return this.parent.collectCrossPageData(t);var e={type:this.type,subType:this.subType,start:this.s};return(this.isNoRemain()||1===this.children.length)&&this.clear(),{action:e,data:t,requestInfo:Jt(),commonActionInfo:Xt(),fromUrl:Hu.ref}},re.prototype.canEnd=function(t){return!this.closed&&this.isNoRemain(_({testCurrent:!0},t))},re.prototype.updateRemain=function(t,e){if(this.remain[e]){e||(e=Na);var n=t||0;this.remain[e].current=this.remain[e].current+n;for(var r=this.parent;r;)r.remain[e].children=r.remain[e].children+n,r=r.parent}},re.prototype.setState=function(t){return this.stateChanged?!1:(this.state=t,this.stateChanged=!0,!0)},re.prototype.current=function(){return Eu.context},re.prototype.buildEventDataWithSpe=function(){if(this.spe&&this.eventData&&this.eventData.data){var t=this.spe.xhrs;this.spe.hasAjax=t&&t.length>0,delete this.spe.xhrs,this.eventData.data.spe=this.spe}},re.prototype.setSpe=function(t){return t?(this.spe=t,this.waitingSpeEnd&&(this.buildEventDataWithSpe(),this.send(),clearTimeout(this.waitingSpeTimer)),this.sent):void 0},re.prototype.send=function(){if(!this.sent){var t={};null!=this.spe&&this.speBinded&&(t.query={ss:1},this.spe.type===Ks&&(t.query.rs=1)),Lo(this.callback.beforeSend)&&this.callback.beforeSend.call(this,this),Lo(this.callback.afterSend)&&(t.cb=this.callback.afterSend),this.setSendOptions(t),$t(this.eventData,this.sendOptions),this.sent=!0}},re.prototype.removeFromParent=function(){if(this.parent){var t=this.parent.children.indexOf(this);t>-1&&this.parent.children.splice(t,1);var e=this.parent.items.indexOf(this.data);e>-1&&this.parent.items.splice(e,1),this.parent.updateRemain(-1,this.type),this.parent.end()}},re.prototype.addResource=function(t){var e=this;if(!t[Fc]){var n={timeout:!1},r=Xo();t[Fc]=r,this.resource.handler[r]=n,this.resource.srcs[t.src]?this.resource.srcs[t.src]++:this.resource.srcs[t.src]=1,this.updateRemain(1,ja),n.timerId=I(function(){var t=e.resource.handler[r];t&&(t.timeout=!0,e.updateRemain(-1,ja),e.end())},Hu.resourceWaitTime),n.handler=function(){var n=e.resource.handler[r];if(n&&!n.timeout){clearTimeout(n.timerId),e.updateRemain(-1,ja);try{if(!e.resource.loaded[t.src]&&cf.getEntriesByName){var i=window.performance.getEntriesByName(t.src)[0];i&&(e.resource.loaded[t.src]=i)}}catch(o){}e.end()}},t.addEventListener("load",n.handler)}},re.prototype.hasChildType=function(t){var e=!1;return r(this.children,function(n){return n.type===t?(e=!0,!1):void 0}),e},re.buildImmediateAction=function(t,e,n,r){r=r||{};var i=_({type:t,subType:e,state:Ja,data:n},r.actionOptions||{});return i.data&&(i.data.state=i.state),r.notSend||$t(i,r.sendOptions),i},re.getRootContext=function(t,e){if(!t&&!Lo(e))return null;for(;t;){if(null==t.parent&&e.call(null,t))return t;t=t.parent}return null},re.prototype.toJSON=function(){},re.prototype.setSendOptions=function(t){this.sendOptions||(this.sendOptions={}),_(this.sendOptions,t)},re.prototype.registerTimeout=function(){var t=this;null==this.parent&&this.type!==Da&&(this.i=I(function(){t.timeout()},Hu.eventTimeout))},re.prototype.unregisterTimeout=function(){try{clearTimeout(this.i)}catch(t){}};var ff,lf,df={},pf=Hu.debuggable,hf={start:t,e:{},an:{count:0},visible:[]},vf=0,mf=1,gf=2,yf=3,_f=4,xf=5,bf=0,Ef=1,Tf=2,Sf=3,Af=4,Cf=5,kf=0,wf=1,Of=2,Nf=3,If=e,Pf=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=function(t){for(var e={},n=0,r=t.length;r>n;n++)e[t.charAt(n)]=n;return e}(t),n=String.fromCharCode,r=function(t){if(t.length<2){var e=t.charCodeAt(0);return 128>e?t:2048>e?n(192|e>>>6)+n(128|63&e):n(224|e>>>12&15)+n(128|e>>>6&63)+n(128|63&e)}var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return n(240|e>>>18&7)+n(128|e>>>12&63)+n(128|e>>>6&63)+n(128|63&e)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,o=function(t){return t.replace(i,r)},a=function(e){var n=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),i=[t.charAt(r>>>18),t.charAt(r>>>12&63),n>=2?"=":t.charAt(r>>>6&63),n>=1?"=":t.charAt(63&r)];return i.join("")},s=If.btoa?function(t){return If.btoa(t)}:function(t){return t.replace(/[\s\S]{1,3}/g,a)},c=function(t){var e="[object Uint8Array]"===Object.prototype.toString.call(t);return e?t.toString("base64"):s(o(String(t)))},u=function(t,e){return e?c(String(t)).replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,""):c(t)},f=function(t){return u(t,!0)},l=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),d=function(t){switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return n((r>>>10)+55296)+n((1023&r)+56320);case 3:return n((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return n((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},p=function(t){return t.replace(l,d)},h=function(t){var r=t.length,i=r%4,o=(r>0?e[t.charAt(0)]<<18:0)|(r>1?e[t.charAt(1)]<<12:0)|(r>2?e[t.charAt(2)]<<6:0)|(r>3?e[t.charAt(3)]:0),a=[n(o>>>16),n(o>>>8&255),n(255&o)];return a.length-=[0,0,2,1][i],a.join("")},v=If.atob?function(t){return If.atob(t)}:function(t){return t.replace(/\S{1,4}/g,h)},m=function(t){return v(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},g=function(t){return p(v(t))},y=function(t){return g(String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};return{atob:m,btoa:s,utob:o,encode:u,encodeURI:f,btou:p,decode:y}}(),Df=["id","key","appKey","token"],Rf={},Lf="undefined"!=typeof e.console,jf=["IMG","SCRIPT","IFRAME"];!function(){if(Hu.debuggable){var t,e,n="visibilitychange";qo(Pu.hidden)?qo(Pu.msHidden)?qo(Pu.webkitHidden)||(t="webkitHidden",e="webkit"+n):(t="msHidden",e="ms"+n):(t="hidden",e=n),qo(Pu.addEventListener)||qo(Pu[t])||Jo(Pu,e,ge(function(){hf.visible.push([Pu[t],k()])}))}}();var Hf,qf=null,Mf=new N;Hf=String.prototype.trim?String.prototype.trim:function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};var Bf=1e4,Uf=0,Ff="report",Gf="error";mn.prototype={add:function(t,e){this.len>this.limit||this.get(t)||(this.c[t]=e,this.len++)},get:function(t){return this.c[t]},reset:function(){this.c={},this.len=0}};var Yf=new mn(100),zf={},Jf={};_n.prototype={increase:function(){this.recordFileName(),this.count++},recordFileName:function(){var t=this.filename||"_";this.fep+=Jf[t]?0:1,Jf[t]=!0},fix:function(){var t=this,e=t.stack;if(e&&Do(e)){e=e.split(/\n/);var n=[];r(e,function(t,e){-1==t.indexOf(fa)&&n.push(t)}),t.stack=n.join("\n")}},getErrorOverview:function(){var t=this;return{o:t.time,e:t.msg,l:t.lineno,c:t.colno,r:t.filename,ec:t.count,s:t.stack,m:t.module,ep:t.ep,fep:t.fep,tr:t.trigger}},toObject:function(){var t=this.getErrorOverview(),e={};return r(this.trace,function(t,n){e[n]=H({time:t.time},t.scope)}),t.trace=e,t},initTraceInstance:function(){var t={id:Xo(),time:k(),scope:new D};return t},triggerActionHook:function(t){if(t){var e=_(this.getErrorOverview(),{id:t.id,o:t.time});Y({type:Tc,name:Nc,args:{target:this.error,actionData:e},scope:t.scope}),e.id&&(t.id=e.id)}}},wn.prototype.put=function(t,e){if(this._size>=this._capacity)try{var n=this._cacheKeys.shift();this._size--,this._cache[n]=null,delete this._cache[n]}catch(r){}this._cache[t]=e,this._cacheKeys.push(t),this._size++},wn.prototype.get=function(t){return this._cache[t]};var Wf=[Ss,As],Kf=1,Vf=2,Xf=[Ss,As],$f=[],Qf=new wn({capacity:20}),Zf=null;Bn.regex=/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i;var tl=1,el=2,nl=4,rl=8,il=tr.prototype;il.create=il.before=il.after=il.error=null;var ol;ar.prototype={createContext:function(){return Nu(this.active)},getContext:function(){return this.active},get:function(t){return this.active?this.active[t]:void 0},set:function(t,e){return this.active?this.active[t]=e:void 0},enter:function(t){if(!t)throw new Iu("context required!");this._set.push(this.active),this.active=t},exit:function(t){if(!t)throw new Iu("context required!");if(t===this.active)return void(this.active=this._set.pop());var e=this._set.lastIndexOf?this._set.lastIndexOf(t):T(this._set,t);if(0>e)throw new Iu("context not currently entered!");this._set.splice(e,1)},bind:function(t,e){e||(e=this.active?this.active:this.createContext());var n=this;return function(){n.enter(e);try{return t.apply(this,arguments)}catch(r){try{var i="moduleId";r[i]=e[i]}catch(o){}throw r}finally{n.exit(e)}}}};var al,sl=!1,cl=cr(),ul=1,fl=0,ll={},dl={},pl=lr.prototype;pl.fail=pl.end=pl.store=C;var hl=dr.prototype;hl.end=hl.finish=hl.fail=null,hl.send=function(t){this.sent=!0;var e=this.getEventData(t);(Hu.collect_noajax_hashroute||!(e.debugInfo&&e.debugInfo.api===ac||e.type===Ks&&e.key.indexOf("#")>-1)||0!==e.xhrs.length)&&(e.duration>=this.timeout||(Y({type:Tc,name:Ic,args:{actionData:e},scope:this.scope}),H(e,this.scope),fr(e)))},hl.getEventData=function(t){var e=this,n=t.event&&t.event.xhrs||[];r(n,function(t){t.startSpeOffset=t.start-e.s});var i={key:e.key,start:e.s,duration:e.e-e.s,status:e.status,type:e.type,xhrs:n};return e.duration>0&&(i.duration=e.duration,i.start=e.e-e.duration),e.type===Ks&&Hu.baseHref&&(i.baseHref=Hu.baseHref),this.debugInfo&&(i.debugInfo=this.debugInfo),i},hl.refreshEventAndStore=function(t){this.finish();var e=this.getEventData(t);Qu(Gs,Po(e))};var vl,ml={mainVersion:Ds,version:"3.3.7-huobi.1",key:Hu.key,pvid:Hu.pvid,DIAGNOSE_HREF:ca,diagnose:tn,createEvent:gr,globalStart:t,currentAgent:Wu,mark:br,wrapVueRouter:xr,setUid:Ut,createAutoEvent:gr,endStoreEvent:vr,captureException:Sn,setDid:Ft,addHook:M,addLifeCycleHook:B,addActionHook:U,addSendHook:G,setContext:L,setExtraContext:j,stopLCPObserver:qe,checkHookSupported:z,newSession:oe,endSession:ae,setSessionContext:se,newEvent:kn,createCustomEvent:kn,parseQuery:bt,JSON:{stringify:Po,parse:mt},newAction:gr,getAgentConfig:Ze,util:{uuid:Xo}};vl=e.localStorage?Er():Tr();var gl=vl.get,yl=vl.set,_l=0,xl=/(msie|trident)/i.test($()),bl=Pu.createElement("a"),El=kr(Ru.href),Tl={uniqueId:0},Sl={error:990,abort:905,timeout:903},Al="onload",Cl=oa+na,kl={},wl=0,Ol={},Nl=0,Il=null,Pl=0,Dl="load",Rl="reload",Ll=["__wvjb_queue_message__","__bridge_loaded__"],jl={literal:{addHeader:function(t,e){this.fetchOptions.headers[t]=e},getHeader:function(t){return this.fetchOptions.headers[t]}},headers:{addHeader:function(t,e){this.fetchOptions.headers.append(t,e)},getHeader:function(t){return this.fetchOptions.headers.get(t)}},notSupport:{addHeader:C,getHeader:C}},Hl="{0} not support",ql={},Ml=w(function(){if(ql.overview){var t=_({},ql.overview),n=De(t,e);t.st=n;var r=go(t,null,qa);re.buildImmediateAction(Da,qa,r)}}),Bl=w(function(t){function n(t){return t?"1":"0"}var i=t.context;if(!Eu.pfSent){var o=e.performance,a=!!o,s=o&&o.timing;a||ht(b(Hl,["pf"]));var c=_(Re(e),Hu.pageServerData,_u),u=_({le:c.le},Ku);u.fp=be(u,e),u.dr=Ie(u,e),u.fs=Ee(u,e),u.le=Pe(u,e,i);var f=_(c,u)||{},l=mo();l&&r(l,function(t,e){Ho(t)&&t>=0&&(f[e]=t)});var d,p="",h=s?vo(s):0;r(["fp","fs","dr","le"],function(t){var e=t;"le"===t&&(e="trace"),p+=n((h?f[t]-h:f[t])>=ju[e+"_threshold"])}),a&&p.indexOf("1")>-1&&(d=po(o,s),f.ressize=!(!o||!o.getEntriesByName)),l&&(d||(d={}),d.mark=l),f.trflag=p||"0000",xu.pfStart=k(),delete f.firstScreenResources,delete f.resources,d||(d={tr:!1,tt:y(Pu.title),charset:Pu.characterSet});var v=Eu.pageUrlInfo||{};Hu.collectAllParam[mc]&&v.operaAllParam&&(d.opera_all_param={},d.opera_all_param[mc]=v.operaAllParam),i._ctx.pageClose&&(f.st=De(u.fp,e)),ql.overview=f;var m=go(f,d);_(i.eventData.data,m);try{fo(f,d)}catch(g){}Eu.pfSent=!0}}),Ul=w(function(){Eu.pageLoadEvent&&(Eu.pageLoadEvent.closed?Ml():(yo(!0),Eu.pageLoadEvent.closed||Eu.pageLoadEvent.timeout()))}),Fl=[cc,uc],Gl=No();return Gl}(+new Date,window);window.TINGYUN && window.TINGYUN.init && window.TINGYUN.init(function(ty_rum){ty_rum.server={"event_timeout":60000,"dr_threshold":4000,"opt_custom_param_rule":[],"cross_page_delay":3000,"router_enable":true,"fp_threshold":2000,"token":"c7d872d0f7ef49aebb6f6a0e5a14d8ad","beacon":"wkbrs1.tingyun.com","trace_threshold":7000,"x_server_switch":true,"ignore_err":false,"id":"J-_do1C-0i4","key":"0V34iLQLFY0","fs_threshold":2000}});/*TY_AGENT_END*/